<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.7.0"/>
    <title>kerykeion.charts.chart_drawer API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../charts.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;kerykeion.charts</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#ChartDrawer">ChartDrawer</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ChartDrawer.__init__">ChartDrawer</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.first_obj">first_obj</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.second_obj">second_obj</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.chart_type">chart_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.new_output_directory">new_output_directory</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.new_settings_file">new_settings_file</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.output_directory">output_directory</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.theme">theme</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.double_chart_aspect_grid_type">double_chart_aspect_grid_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.chart_language">chart_language</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.active_points">active_points</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.active_aspects">active_aspects</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.fire">fire</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.earth">earth</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.air">air</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.water">water</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.first_circle_radius">first_circle_radius</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.second_circle_radius">second_circle_radius</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.third_circle_radius">third_circle_radius</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.width">width</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.language_settings">language_settings</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.chart_colors_settings">chart_colors_settings</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.planets_settings">planets_settings</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.aspects_settings">aspects_settings</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.user">user</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.available_planets_setting">available_planets_setting</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.height">height</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.location">location</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.geolat">geolat</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.geolon">geolon</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.template">template</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.available_kerykeion_celestial_points">available_kerykeion_celestial_points</a>
                        </li>
                        <li>
                                <a class="variable" href="#ChartDrawer.main_radius">main_radius</a>
                        </li>
                        <li>
                                <a class="function" href="#ChartDrawer.set_up_theme">set_up_theme</a>
                        </li>
                        <li>
                                <a class="function" href="#ChartDrawer.set_output_directory">set_output_directory</a>
                        </li>
                        <li>
                                <a class="function" href="#ChartDrawer.parse_json_settings">parse_json_settings</a>
                        </li>
                        <li>
                                <a class="function" href="#ChartDrawer.makeTemplate">makeTemplate</a>
                        </li>
                        <li>
                                <a class="function" href="#ChartDrawer.makeSVG">makeSVG</a>
                        </li>
                        <li>
                                <a class="function" href="#ChartDrawer.makeWheelOnlyTemplate">makeWheelOnlyTemplate</a>
                        </li>
                        <li>
                                <a class="function" href="#ChartDrawer.makeWheelOnlySVG">makeWheelOnlySVG</a>
                        </li>
                        <li>
                                <a class="function" href="#ChartDrawer.makeAspectGridOnlyTemplate">makeAspectGridOnlyTemplate</a>
                        </li>
                        <li>
                                <a class="function" href="#ChartDrawer.makeAspectGridOnlySVG">makeAspectGridOnlySVG</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../kerykeion.html">kerykeion</a><wbr>.<a href="./../charts.html">charts</a><wbr>.chart_drawer    </h1>

                        <div class="docstring"><p>This is part of Kerykeion (C) 2025 Giacomo Battaglia</p>
</div>

                        <input id="mod-chart_drawer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-chart_drawer-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="c1"># -*- coding: utf-8 -*-</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="sd">    This is part of Kerykeion (C) 2025 Giacomo Battaglia</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">swisseph</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">swe</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_args</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kerykeion.settings.kerykeion_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_settings</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kerykeion.aspects.synastry_aspects</span><span class="w"> </span><span class="kn">import</span> <span class="n">SynastryAspects</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kerykeion.aspects.natal_aspects</span><span class="w"> </span><span class="kn">import</span> <span class="n">NatalAspects</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kerykeion.astrological_subject</span><span class="w"> </span><span class="kn">import</span> <span class="n">AstrologicalSubject</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kerykeion.kr_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">KerykeionException</span><span class="p">,</span> <span class="n">ChartType</span><span class="p">,</span> <span class="n">KerykeionPointModel</span><span class="p">,</span> <span class="n">Sign</span><span class="p">,</span> <span class="n">ActiveAspect</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kerykeion.kr_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChartTemplateDictionary</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kerykeion.kr_types.kr_models</span><span class="w"> </span><span class="kn">import</span> <span class="n">AstrologicalSubjectModel</span><span class="p">,</span> <span class="n">CompositeSubjectModel</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kerykeion.kr_types.settings_models</span><span class="w"> </span><span class="kn">import</span> <span class="n">KerykeionSettingsCelestialPointModel</span><span class="p">,</span> <span class="n">KerykeionSettingsModel</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kerykeion.kr_types.kr_literals</span><span class="w"> </span><span class="kn">import</span> <span class="n">KerykeionChartTheme</span><span class="p">,</span> <span class="n">KerykeionChartLanguage</span><span class="p">,</span> <span class="n">AxialCusps</span><span class="p">,</span> <span class="n">Planet</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kerykeion.charts.charts_utils</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a>    <span class="n">draw_zodiac_slice</span><span class="p">,</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a>    <span class="n">convert_latitude_coordinate_to_string</span><span class="p">,</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a>    <span class="n">convert_longitude_coordinate_to_string</span><span class="p">,</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a>    <span class="n">draw_aspect_line</span><span class="p">,</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a>    <span class="n">draw_transit_ring_degree_steps</span><span class="p">,</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a>    <span class="n">draw_degree_ring</span><span class="p">,</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a>    <span class="n">draw_transit_ring</span><span class="p">,</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a>    <span class="n">draw_first_circle</span><span class="p">,</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a>    <span class="n">draw_second_circle</span><span class="p">,</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a>    <span class="n">draw_third_circle</span><span class="p">,</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a>    <span class="n">draw_aspect_grid</span><span class="p">,</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a>    <span class="n">draw_houses_cusps_and_text_number</span><span class="p">,</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a>    <span class="n">draw_transit_aspect_list</span><span class="p">,</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a>    <span class="n">draw_transit_aspect_grid</span><span class="p">,</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a>    <span class="n">calculate_moon_phase_chart_params</span><span class="p">,</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a>    <span class="n">draw_house_grid</span><span class="p">,</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a>    <span class="n">draw_planet_grid</span><span class="p">,</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a><span class="p">)</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kerykeion.charts.draw_planets</span><span class="w"> </span><span class="kn">import</span> <span class="n">draw_planets</span> <span class="c1"># type: ignore</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kerykeion.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_houses_list</span><span class="p">,</span> <span class="n">inline_css_variables_in_svg</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">kerykeion.settings.config_constants</span><span class="w"> </span><span class="kn">import</span> <span class="n">DEFAULT_ACTIVE_POINTS</span><span class="p">,</span> <span class="n">DEFAULT_ACTIVE_ASPECTS</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">scour.scour</span><span class="w"> </span><span class="kn">import</span> <span class="n">scourString</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">string</span><span class="w"> </span><span class="kn">import</span> <span class="n">Template</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Union</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Literal</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ChartDrawer</span><span class="p">:</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a><span class="sd">    ChartDrawer generates astrological chart visualizations as SVG files.</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a><span class="sd">    This class supports creating full chart SVGs, wheel-only SVGs, and aspect-grid-only SVGs</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a><span class="sd">    for various chart types including Natal, ExternalNatal, Transit, Synastry, and Composite.</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a><span class="sd">    Charts are rendered using XML templates and drawing utilities, with customizable themes,</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a><span class="sd">    language, active points, and aspects.</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a><span class="sd">    The rendered SVGs can be saved to a specified output directory or, by default, to the user&#39;s home directory.</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a><span class="sd">    NOTE:</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a><span class="sd">        The generated SVG files are optimized for web use, opening in browsers. If you want to</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a><span class="sd">        use them in other applications, you might need to adjust the SVG settings or styles.</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a><span class="sd">    Args:</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a><span class="sd">        first_obj (AstrologicalSubject | AstrologicalSubjectModel | CompositeSubjectModel):</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a><span class="sd">            The primary astrological subject for the chart.</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a><span class="sd">        chart_type (ChartType, optional):</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a><span class="sd">            The type of chart to generate (&#39;Natal&#39;, &#39;ExternalNatal&#39;, &#39;Transit&#39;, &#39;Synastry&#39;, &#39;Composite&#39;).</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a><span class="sd">            Defaults to &#39;Natal&#39;.</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a><span class="sd">        second_obj (AstrologicalSubject | AstrologicalSubjectModel, optional):</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a><span class="sd">            The secondary subject for Transit or Synastry charts. Not required for Natal or Composite.</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a><span class="sd">        new_output_directory (str | Path, optional):</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a><span class="sd">            Directory to write generated SVG files. Defaults to the user&#39;s home directory.</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a><span class="sd">        new_settings_file (Path | dict | KerykeionSettingsModel, optional):</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a><span class="sd">            Path or settings object to override default chart configuration (colors, fonts, aspects).</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a><span class="sd">        theme (KerykeionChartTheme, optional):</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a><span class="sd">            CSS theme for the chart. If None, no default styles are applied. Defaults to &#39;classic&#39;.</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a><span class="sd">        double_chart_aspect_grid_type (Literal[&#39;list&#39;, &#39;table&#39;], optional):</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a><span class="sd">            Specifies rendering style for double-chart aspect grids. Defaults to &#39;list&#39;.</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a><span class="sd">        chart_language (KerykeionChartLanguage, optional):</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a><span class="sd">            Language code for chart labels. Defaults to &#39;EN&#39;.</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a><span class="sd">        active_points (list[Planet | AxialCusps], optional):</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a><span class="sd">            List of celestial points and angles to include. Defaults to DEFAULT_ACTIVE_POINTS.</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a><span class="sd">            Example:</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a><span class="sd">            [&quot;Sun&quot;, &quot;Moon&quot;, &quot;Mercury&quot;, &quot;Venus&quot;]</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a><span class="sd">        active_aspects (list[ActiveAspect], optional):</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a><span class="sd">            List of aspects (name and orb) to calculate. Defaults to DEFAULT_ACTIVE_ASPECTS.</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a><span class="sd">            Example:</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a><span class="sd">            [</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a><span class="sd">                {&quot;name&quot;: &quot;conjunction&quot;, &quot;orb&quot;: 10},</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a><span class="sd">                {&quot;name&quot;: &quot;opposition&quot;, &quot;orb&quot;: 10},</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a><span class="sd">                {&quot;name&quot;: &quot;trine&quot;, &quot;orb&quot;: 8},</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a><span class="sd">                {&quot;name&quot;: &quot;sextile&quot;, &quot;orb&quot;: 6},</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a><span class="sd">                {&quot;name&quot;: &quot;square&quot;, &quot;orb&quot;: 5},</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a><span class="sd">                {&quot;name&quot;: &quot;quintile&quot;, &quot;orb&quot;: 1},</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a><span class="sd">            ]</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a><span class="sd">    Public Methods:</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a><span class="sd">        makeTemplate(minify=False, remove_css_variables=False) -&gt; str:</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a><span class="sd">            Render the full chart SVG as a string without writing to disk. Use `minify=True`</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a><span class="sd">            to remove whitespace and quotes, and `remove_css_variables=True` to embed CSS vars.</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a><span class="sd">        makeSVG(minify=False, remove_css_variables=False) -&gt; None:</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a><span class="sd">            Generate and write the full chart SVG file to the output directory.</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a><span class="sd">            Filenames follow the pattern:</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a><span class="sd">            &#39;{subject.name} - {chart_type} Chart.svg&#39;.</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a><span class="sd">        makeWheelOnlyTemplate(minify=False, remove_css_variables=False) -&gt; str:</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a><span class="sd">            Render only the chart wheel (no aspect grid) as an SVG string.</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a><span class="sd">        makeWheelOnlySVG(minify=False, remove_css_variables=False) -&gt; None:</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a><span class="sd">            Generate and write the wheel-only SVG file:</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a><span class="sd">            &#39;{subject.name} - {chart_type} Chart - Wheel Only.svg&#39;.</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a><span class="sd">        makeAspectGridOnlyTemplate(minify=False, remove_css_variables=False) -&gt; str:</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a><span class="sd">            Render only the aspect grid as an SVG string.</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a><span class="sd">        makeAspectGridOnlySVG(minify=False, remove_css_variables=False) -&gt; None:</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a><span class="sd">            Generate and write the aspect-grid-only SVG file:</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a><span class="sd">            &#39;{subject.name} - {chart_type} Chart - Aspect Grid Only.svg&#39;.</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a>    <span class="c1"># Constants</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a>    <span class="n">_BASIC_CHART_VIEWBOX</span> <span class="o">=</span> <span class="s2">&quot;0 0 820 550.0&quot;</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a>    <span class="n">_WIDE_CHART_VIEWBOX</span> <span class="o">=</span> <span class="s2">&quot;0 0 1200 546.0&quot;</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a>    <span class="n">_TRANSIT_CHART_WITH_TABLE_VIWBOX</span> <span class="o">=</span> <span class="s2">&quot;0 0 960 546.0&quot;</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a>    <span class="n">_DEFAULT_HEIGHT</span> <span class="o">=</span> <span class="mi">550</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a>    <span class="n">_DEFAULT_FULL_WIDTH</span> <span class="o">=</span> <span class="mi">1200</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a>    <span class="n">_DEFAULT_NATAL_WIDTH</span> <span class="o">=</span> <span class="mi">820</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a>    <span class="n">_DEFAULT_FULL_WIDTH_WITH_TABLE</span> <span class="o">=</span> <span class="mi">960</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a>    <span class="n">_PLANET_IN_ZODIAC_EXTRA_POINTS</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a>    <span class="c1"># Set at init</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a>    <span class="n">first_obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AstrologicalSubject</span><span class="p">,</span> <span class="n">AstrologicalSubjectModel</span><span class="p">]</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a>    <span class="n">second_obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AstrologicalSubject</span><span class="p">,</span> <span class="n">AstrologicalSubjectModel</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a>    <span class="n">chart_type</span><span class="p">:</span> <span class="n">ChartType</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a>    <span class="n">new_output_directory</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a>    <span class="n">new_settings_file</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">KerykeionSettingsModel</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a>    <span class="n">output_directory</span><span class="p">:</span> <span class="n">Path</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a>    <span class="n">new_settings_file</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">KerykeionSettingsModel</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a>    <span class="n">theme</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">KerykeionChartTheme</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a>    <span class="n">double_chart_aspect_grid_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="s2">&quot;table&quot;</span><span class="p">]</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a>    <span class="n">chart_language</span><span class="p">:</span> <span class="n">KerykeionChartLanguage</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a>    <span class="n">active_points</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Planet</span><span class="p">,</span> <span class="n">AxialCusps</span><span class="p">]]</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a>    <span class="n">active_aspects</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ActiveAspect</span><span class="p">]</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a>    <span class="c1"># Internal properties</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a>    <span class="n">fire</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a>    <span class="n">earth</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a>    <span class="n">air</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a>    <span class="n">water</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a>    <span class="n">first_circle_radius</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a>    <span class="n">second_circle_radius</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a>    <span class="n">third_circle_radius</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a>    <span class="n">width</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a>    <span class="n">language_settings</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a>    <span class="n">chart_colors_settings</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a>    <span class="n">planets_settings</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a>    <span class="n">aspects_settings</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a>    <span class="n">user</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AstrologicalSubject</span><span class="p">,</span> <span class="n">AstrologicalSubjectModel</span><span class="p">,</span> <span class="n">CompositeSubjectModel</span><span class="p">]</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a>    <span class="n">available_planets_setting</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">KerykeionSettingsCelestialPointModel</span><span class="p">]</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a>    <span class="n">height</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a>    <span class="n">location</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a>    <span class="n">geolat</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a>    <span class="n">geolon</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a>    <span class="n">template</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a>        <span class="n">first_obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AstrologicalSubject</span><span class="p">,</span> <span class="n">AstrologicalSubjectModel</span><span class="p">,</span> <span class="n">CompositeSubjectModel</span><span class="p">],</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a>        <span class="n">chart_type</span><span class="p">:</span> <span class="n">ChartType</span> <span class="o">=</span> <span class="s2">&quot;Natal&quot;</span><span class="p">,</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>        <span class="n">second_obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AstrologicalSubject</span><span class="p">,</span> <span class="n">AstrologicalSubjectModel</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a>        <span class="n">new_output_directory</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a>        <span class="n">new_settings_file</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">KerykeionSettingsModel</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a>        <span class="n">theme</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">KerykeionChartTheme</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;classic&quot;</span><span class="p">,</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a>        <span class="n">double_chart_aspect_grid_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="s2">&quot;table&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a>        <span class="n">chart_language</span><span class="p">:</span> <span class="n">KerykeionChartLanguage</span> <span class="o">=</span> <span class="s2">&quot;EN&quot;</span><span class="p">,</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a>        <span class="n">active_points</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Planet</span><span class="p">,</span> <span class="n">AxialCusps</span><span class="p">]]</span> <span class="o">=</span> <span class="n">DEFAULT_ACTIVE_POINTS</span><span class="p">,</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a>    <span class="n">active_aspects</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ActiveAspect</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_ACTIVE_ASPECTS</span><span class="p">,</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a>    <span class="p">):</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a><span class="sd">        Initialize the chart generator with subject data and configuration options.</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a><span class="sd">        Args:</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a><span class="sd">            first_obj (AstrologicalSubject, AstrologicalSubjectModel, or CompositeSubjectModel):</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a><span class="sd">                Primary astrological subject instance.</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a><span class="sd">            chart_type (ChartType, optional):</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a><span class="sd">                Type of chart to generate (e.g., &#39;Natal&#39;, &#39;Transit&#39;).</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a><span class="sd">            second_obj (AstrologicalSubject or AstrologicalSubjectModel, optional):</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a><span class="sd">                Secondary subject for Transit or Synastry charts.</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a><span class="sd">            new_output_directory (str or Path, optional):</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a><span class="sd">                Base directory to save generated SVG files.</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a><span class="sd">            new_settings_file (Path, dict, or KerykeionSettingsModel, optional):</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a><span class="sd">                Custom settings source for chart colors, fonts, and aspects.</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a><span class="sd">            theme (KerykeionChartTheme or None, optional):</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a><span class="sd">                CSS theme to apply; None for default styling.</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a><span class="sd">            double_chart_aspect_grid_type (Literal[&#39;list&#39;,&#39;table&#39;], optional):</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a><span class="sd">                Layout style for double-chart aspect grids (&#39;list&#39; or &#39;table&#39;).</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a><span class="sd">            chart_language (KerykeionChartLanguage, optional):</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a><span class="sd">                Language code for chart labels (e.g., &#39;EN&#39;, &#39;IT&#39;).</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a><span class="sd">            active_points (List[Planet or AxialCusps], optional):</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a><span class="sd">                Celestial points to include in the chart visualization.</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a><span class="sd">            active_aspects (List[ActiveAspect], optional):</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a><span class="sd">                Aspects to calculate, each defined by name and orb.</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a>        <span class="n">home_directory</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">new_settings_file</span> <span class="o">=</span> <span class="n">new_settings_file</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">chart_language</span> <span class="o">=</span> <span class="n">chart_language</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_points</span> <span class="o">=</span> <span class="n">active_points</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_aspects</span> <span class="o">=</span> <span class="n">active_aspects</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a>        <span class="k">if</span> <span class="n">new_output_directory</span><span class="p">:</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">new_output_directory</span><span class="p">)</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">=</span> <span class="n">home_directory</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parse_json_settings</span><span class="p">(</span><span class="n">new_settings_file</span><span class="p">)</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">=</span> <span class="n">chart_type</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a>        <span class="c1"># Kerykeion instance</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">first_obj</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a>        <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">:</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a>            <span class="k">if</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">active_points</span><span class="p">:</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a>                <span class="k">continue</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a>                <span class="n">body</span><span class="p">[</span><span class="s2">&quot;is_active&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a>        <span class="c1"># Available bodies</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a>        <span class="n">available_celestial_points_names</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a>        <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">:</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a>            <span class="n">available_celestial_points_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">body</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">available_kerykeion_celestial_points</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">KerykeionPointModel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a>        <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="n">available_celestial_points_names</span><span class="p">:</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">available_kerykeion_celestial_points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a>        <span class="c1"># Makes the sign number list.</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Natal&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">:</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a>            <span class="n">natal_aspects_instance</span> <span class="o">=</span> <span class="n">NatalAspects</span><span class="p">(</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">new_settings_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_settings_file</span><span class="p">,</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a>                <span class="n">active_points</span><span class="o">=</span><span class="n">active_points</span><span class="p">,</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a>                <span class="n">active_aspects</span><span class="o">=</span><span class="n">active_aspects</span><span class="p">,</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a>            <span class="p">)</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span> <span class="o">=</span> <span class="n">natal_aspects_instance</span><span class="o">.</span><span class="n">relevant_aspects</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">:</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">second_obj</span><span class="p">:</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a>                <span class="k">raise</span> <span class="n">KerykeionException</span><span class="p">(</span><span class="s2">&quot;Second object is required for Transit or Synastry charts.&quot;</span><span class="p">)</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a>            <span class="c1"># Kerykeion instance</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span> <span class="o">=</span> <span class="n">second_obj</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a>            <span class="c1"># Aspects</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a>                <span class="n">synastry_aspects_instance</span> <span class="o">=</span> <span class="n">SynastryAspects</span><span class="p">(</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="p">,</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a>                    <span class="n">new_settings_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_settings_file</span><span class="p">,</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a>                    <span class="n">active_points</span><span class="o">=</span><span class="n">active_points</span><span class="p">,</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a>                    <span class="n">active_aspects</span><span class="o">=</span><span class="n">active_aspects</span><span class="p">,</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a>                <span class="p">)</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a>                <span class="n">synastry_aspects_instance</span> <span class="o">=</span> <span class="n">SynastryAspects</span><span class="p">(</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="p">,</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a>                    <span class="n">new_settings_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_settings_file</span><span class="p">,</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a>                    <span class="n">active_points</span><span class="o">=</span><span class="n">active_points</span><span class="p">,</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a>                    <span class="n">active_aspects</span><span class="o">=</span><span class="n">active_aspects</span><span class="p">,</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>                <span class="p">)</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span> <span class="o">=</span> <span class="n">synastry_aspects_instance</span><span class="o">.</span><span class="n">relevant_aspects</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">t_available_kerykeion_celestial_points</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a>            <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="n">available_celestial_points_names</span><span class="p">:</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">t_available_kerykeion_celestial_points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">first_obj</span><span class="p">,</span> <span class="n">CompositeSubjectModel</span><span class="p">):</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a>                <span class="k">raise</span> <span class="n">KerykeionException</span><span class="p">(</span><span class="s2">&quot;First object must be a CompositeSubjectModel instance.&quot;</span><span class="p">)</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span> <span class="o">=</span> <span class="n">NatalAspects</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">new_settings_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_settings_file</span><span class="p">,</span> <span class="n">active_points</span><span class="o">=</span><span class="n">active_points</span><span class="p">)</span><span class="o">.</span><span class="n">relevant_aspects</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a>        <span class="c1"># Double chart aspect grid type</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">double_chart_aspect_grid_type</span> <span class="o">=</span> <span class="n">double_chart_aspect_grid_type</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a>        <span class="c1"># screen size</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_HEIGHT</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Synastry&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_FULL_WIDTH</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">double_chart_aspect_grid_type</span> <span class="o">==</span> <span class="s2">&quot;table&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_FULL_WIDTH_WITH_TABLE</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_NATAL_WIDTH</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Natal&quot;</span><span class="p">,</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">]:</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">city</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">lat</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolon</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">lng</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolat</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">lat</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolon</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">lng</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">lng</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Transit&quot;</span><span class="p">]:</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">city</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">lat</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">lng</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">t_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;transit_name&quot;</span><span class="p">]</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a>        <span class="c1"># Default radius for the chart</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span> <span class="o">=</span> <span class="mi">240</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a>        <span class="c1"># Set circle radii based on chart type</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">:</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">first_circle_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">second_circle_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span> <span class="o">=</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">92</span><span class="p">,</span> <span class="mi">112</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">first_circle_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">second_circle_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">120</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a>        <span class="c1"># Initialize element points</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fire</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">earth</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">air</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">water</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a>        <span class="c1"># Calculate element points from planets</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_elements_points_from_planets</span><span class="p">()</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a>        <span class="c1"># Set up theme</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a>        <span class="k">if</span> <span class="n">theme</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">get_args</span><span class="p">(</span><span class="n">KerykeionChartTheme</span><span class="p">)</span> <span class="ow">and</span> <span class="n">theme</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a>            <span class="k">raise</span> <span class="n">KerykeionException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Theme </span><span class="si">{</span><span class="n">theme</span><span class="si">}</span><span class="s2"> is not available. Set None for default theme.&quot;</span><span class="p">)</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_up_theme</span><span class="p">(</span><span class="n">theme</span><span class="p">)</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_up_theme</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theme</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">KerykeionChartTheme</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a><span class="sd">        Load and apply a CSS theme for the chart visualization.</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a><span class="sd">        Args:</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a><span class="sd">            theme (KerykeionChartTheme or None): Name of the theme to apply. If None, no CSS is applied.</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a>        <span class="k">if</span> <span class="n">theme</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">color_style_tag</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a>            <span class="k">return</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a>        <span class="n">theme_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;themes&quot;</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">theme_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">theme</span><span class="si">}</span><span class="s2">.css&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">color_style_tag</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_output_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dir_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a><span class="sd">        Set the directory where generated SVG files will be saved.</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a><span class="sd">        Args:</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a><span class="sd">            dir_path (Path): Target directory for SVG output.</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">=</span> <span class="n">dir_path</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Output direcotry set to: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_json_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings_file_or_dict</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">KerykeionSettingsModel</span><span class="p">,</span> <span class="kc">None</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a><span class="sd">        Load and parse chart configuration settings.</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a><span class="sd">        Args:</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a><span class="sd">            settings_file_or_dict (Path, dict, or KerykeionSettingsModel):</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a><span class="sd">                Source for custom chart settings.</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a>        <span class="n">settings</span> <span class="o">=</span> <span class="n">get_settings</span><span class="p">(</span><span class="n">settings_file_or_dict</span><span class="p">)</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;language_settings&quot;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_language</span><span class="p">]</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;chart_colors&quot;</span><span class="p">]</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;celestial_points&quot;</span><span class="p">]</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">aspects_settings</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;aspects&quot;</span><span class="p">]</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_draw_zodiac_circle_slices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a><span class="sd">        Draw zodiac circle slices for each sign.</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a><span class="sd">        Args:</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a><span class="sd">            r (float): Outer radius of the zodiac ring.</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a><span class="sd">        Returns:</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a><span class="sd">            str: Concatenated SVG elements for zodiac slices.</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a>        <span class="n">sings</span> <span class="o">=</span> <span class="n">get_args</span><span class="p">(</span><span class="n">Sign</span><span class="p">)</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a>        <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sing</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sings</span><span class="p">):</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a>            <span class="n">output</span> <span class="o">+=</span> <span class="n">draw_zodiac_slice</span><span class="p">(</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a>                <span class="n">c1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">first_circle_radius</span><span class="p">,</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a>                <span class="n">seventh_house_degree_ut</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">seventh_house</span><span class="o">.</span><span class="n">abs_pos</span><span class="p">,</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a>                <span class="n">num</span><span class="o">=</span><span class="n">i</span><span class="p">,</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a>                <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">,</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a>                <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;fill:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;zodiac_bg_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">; fill-opacity: 0.5;&#39;</span><span class="p">,</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a>                <span class="nb">type</span><span class="o">=</span><span class="n">sing</span><span class="p">,</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a>            <span class="p">)</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a>        <span class="k">return</span> <span class="n">output</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_calculate_elements_points_from_planets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a><span class="sd">        Compute elemental point totals based on active planetary positions.</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a><span class="sd">        Iterates over each active planet to determine its zodiac element and adds extra points</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a><span class="sd">        if the planet is in a related sign. Updates self.fire, self.earth, self.air, and self.water.</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a><span class="sd">        Returns:</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a><span class="sd">            None</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>        <span class="n">ZODIAC</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Ari&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;fire&quot;</span><span class="p">},</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Tau&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;earth&quot;</span><span class="p">},</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Gem&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;air&quot;</span><span class="p">},</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Can&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;water&quot;</span><span class="p">},</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Leo&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;fire&quot;</span><span class="p">},</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Vir&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;earth&quot;</span><span class="p">},</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Lib&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;air&quot;</span><span class="p">},</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Sco&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;water&quot;</span><span class="p">},</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Sag&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;fire&quot;</span><span class="p">},</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Cap&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;earth&quot;</span><span class="p">},</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Aqu&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;air&quot;</span><span class="p">},</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Pis&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;water&quot;</span><span class="p">},</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a>        <span class="p">)</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a>        <span class="c1"># Available bodies</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a>        <span class="n">available_celestial_points_names</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a>        <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">:</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a>            <span class="n">available_celestial_points_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">body</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a>        <span class="c1"># Make list of the points sign</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>        <span class="n">points_sign</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a>        <span class="k">for</span> <span class="n">planet</span> <span class="ow">in</span> <span class="n">available_celestial_points_names</span><span class="p">:</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a>            <span class="n">points_sign</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">planet</span><span class="p">)</span><span class="o">.</span><span class="n">sign_num</span><span class="p">)</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">)):</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a>            <span class="c1"># element: get extra points if planet is in own zodiac sign.</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a>            <span class="n">related_zodiac_signs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;related_zodiac_signs&quot;</span><span class="p">]</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a>            <span class="n">cz</span> <span class="o">=</span> <span class="n">points_sign</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a>            <span class="n">extra_points</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a>            <span class="k">if</span> <span class="n">related_zodiac_signs</span> <span class="o">!=</span> <span class="p">[]:</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">related_zodiac_signs</span><span class="p">)):</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a>                    <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">related_zodiac_signs</span><span class="p">[</span><span class="n">e</span><span class="p">])</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="n">cz</span><span class="p">):</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>                        <span class="n">extra_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_PLANET_IN_ZODIAC_EXTRA_POINTS</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a>            <span class="n">ele</span> <span class="o">=</span> <span class="n">ZODIAC</span><span class="p">[</span><span class="n">points_sign</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s2">&quot;element&quot;</span><span class="p">]</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a>            <span class="k">if</span> <span class="n">ele</span> <span class="o">==</span> <span class="s2">&quot;fire&quot;</span><span class="p">:</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">fire</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fire</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;element_points&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">extra_points</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a>            <span class="k">elif</span> <span class="n">ele</span> <span class="o">==</span> <span class="s2">&quot;earth&quot;</span><span class="p">:</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">earth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">earth</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;element_points&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">extra_points</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a>            <span class="k">elif</span> <span class="n">ele</span> <span class="o">==</span> <span class="s2">&quot;air&quot;</span><span class="p">:</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">air</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">air</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;element_points&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">extra_points</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a>            <span class="k">elif</span> <span class="n">ele</span> <span class="o">==</span> <span class="s2">&quot;water&quot;</span><span class="p">:</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">water</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">water</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;element_points&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">extra_points</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_draw_all_aspects_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">ar</span><span class="p">):</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a><span class="sd">        Render SVG lines for all aspects in the chart.</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a><span class="sd">        Args:</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a><span class="sd">            r (float): Radius at which aspect lines originate.</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a><span class="sd">            ar (float): Radius at which aspect lines terminate.</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a><span class="sd">        Returns:</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a><span class="sd">            str: SVG markup for all aspect lines.</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a>        <span class="n">out</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a>        <span class="k">for</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span><span class="p">:</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a>            <span class="n">aspect_name</span> <span class="o">=</span> <span class="n">aspect</span><span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">]</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a>            <span class="n">aspect_color</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_settings</span> <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">aspect_name</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a>            <span class="k">if</span> <span class="n">aspect_color</span><span class="p">:</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a>                <span class="n">out</span> <span class="o">+=</span> <span class="n">draw_aspect_line</span><span class="p">(</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a>                    <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">,</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a>                    <span class="n">ar</span><span class="o">=</span><span class="n">ar</span><span class="p">,</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a>                    <span class="n">aspect</span><span class="o">=</span><span class="n">aspect</span><span class="p">,</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a>                    <span class="n">color</span><span class="o">=</span><span class="n">aspect_color</span><span class="p">,</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a>                    <span class="n">seventh_house_degree_ut</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">seventh_house</span><span class="o">.</span><span class="n">abs_pos</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>                <span class="p">)</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>        <span class="k">return</span> <span class="n">out</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_draw_all_transit_aspects_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">ar</span><span class="p">):</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a><span class="sd">        Render SVG lines for all transit aspects in the chart.</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a><span class="sd">        Args:</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a><span class="sd">            r (float): Radius at which transit aspect lines originate.</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a><span class="sd">            ar (float): Radius at which transit aspect lines terminate.</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a><span class="sd">        Returns:</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a><span class="sd">            str: SVG markup for all transit aspect lines.</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a>        <span class="n">out</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a>        <span class="k">for</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span><span class="p">:</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a>            <span class="n">aspect_name</span> <span class="o">=</span> <span class="n">aspect</span><span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">]</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a>            <span class="n">aspect_color</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_settings</span> <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">aspect_name</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a>            <span class="k">if</span> <span class="n">aspect_color</span><span class="p">:</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a>                <span class="n">out</span> <span class="o">+=</span> <span class="n">draw_aspect_line</span><span class="p">(</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>                    <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">,</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a>                    <span class="n">ar</span><span class="o">=</span><span class="n">ar</span><span class="p">,</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a>                    <span class="n">aspect</span><span class="o">=</span><span class="n">aspect</span><span class="p">,</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a>                    <span class="n">color</span><span class="o">=</span><span class="n">aspect_color</span><span class="p">,</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a>                    <span class="n">seventh_house_degree_ut</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">seventh_house</span><span class="o">.</span><span class="n">abs_pos</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a>                <span class="p">)</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a>        <span class="k">return</span> <span class="n">out</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_create_template_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChartTemplateDictionary</span><span class="p">:</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a><span class="sd">        Assemble chart data and rendering instructions into a template dictionary.</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a><span class="sd">        Gathers styling, dimensions, and SVG fragments for chart components based on</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a><span class="sd">        chart type and subjects.</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a><span class="sd">        Returns:</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a><span class="sd">            ChartTemplateDictionary: Populated structure of template variables.</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a>        <span class="c1"># Initialize template dictionary</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a>        <span class="n">template_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a>        <span class="c1"># Set the color style tag</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;color_style_tag&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_style_tag</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a>        <span class="c1"># Set chart dimensions</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;chart_height&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;chart_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a>        <span class="c1"># Set viewbox based on chart type</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Natal&quot;</span><span class="p">,</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">,</span> <span class="s2">&quot;Composite&quot;</span><span class="p">]:</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s1">&#39;viewbox&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_BASIC_CHART_VIEWBOX</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">double_chart_aspect_grid_type</span> <span class="o">==</span> <span class="s2">&quot;table&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s1">&#39;viewbox&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_TRANSIT_CHART_WITH_TABLE_VIWBOX</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s1">&#39;viewbox&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_WIDE_CHART_VIEWBOX</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a>        <span class="c1"># Generate rings and circles based on chart type</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Transit&quot;</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">]:</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;transitRing&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_transit_ring</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_1&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;zodiac_transit_ring_3&quot;</span><span class="p">])</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;degreeRing&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_transit_ring_degree_steps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">seventh_house</span><span class="o">.</span><span class="n">abs_pos</span><span class="p">)</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;first_circle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_first_circle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;zodiac_transit_ring_2&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">)</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;second_circle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_second_circle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;zodiac_transit_ring_1&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;paper_1&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">)</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s1">&#39;third_circle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_third_circle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;zodiac_transit_ring_0&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;paper_1&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span><span class="p">)</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">double_chart_aspect_grid_type</span> <span class="o">==</span> <span class="s2">&quot;list&quot;</span><span class="p">:</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a>                <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">:</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a>                    <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;couple_aspects&quot;</span><span class="p">,</span> <span class="s2">&quot;Couple Aspects&quot;</span><span class="p">)</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a>                    <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;transit_aspects&quot;</span><span class="p">,</span> <span class="s2">&quot;Transit Aspects&quot;</span><span class="p">)</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>                <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeAspectGrid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_transit_aspect_list</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_settings</span><span class="p">)</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>                <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeAspectGrid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_transit_aspect_grid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;paper_0&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span><span class="p">,</span> <span class="mi">550</span><span class="p">,</span> <span class="mi">450</span><span class="p">)</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeAspects&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_all_transit_aspects_lines</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span> <span class="o">-</span> <span class="mi">160</span><span class="p">)</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;transitRing&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;degreeRing&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_degree_ring</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">first_circle_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">seventh_house</span><span class="o">.</span><span class="n">abs_pos</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_0&quot;</span><span class="p">])</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s1">&#39;first_circle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_first_circle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;zodiac_radix_ring_2&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">first_circle_radius</span><span class="p">)</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;second_circle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_second_circle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;zodiac_radix_ring_1&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_1&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">second_circle_radius</span><span class="p">)</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s1">&#39;third_circle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_third_circle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;zodiac_radix_ring_0&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_1&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span><span class="p">)</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeAspectGrid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_aspect_grid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;paper_0&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span><span class="p">)</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeAspects&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_all_aspects_lines</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span><span class="p">)</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a>        <span class="c1"># Set chart title</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">:</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;stringTitle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;and_word&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;stringTitle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;transits&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">day</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">month</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">year</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Natal&quot;</span><span class="p">,</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">]:</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;stringTitle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;stringTitle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;and_word&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a>        <span class="c1"># Zodiac Type Info</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">zodiac_type</span> <span class="o">==</span> <span class="s1">&#39;Tropic&#39;</span><span class="p">:</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>            <span class="n">zodiac_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;zodiac&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Zodiac&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tropical&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Tropical&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>            <span class="n">mode_const</span> <span class="o">=</span> <span class="s2">&quot;SIDM_&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">sidereal_mode</span> <span class="c1"># type: ignore</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a>            <span class="n">mode_name</span> <span class="o">=</span> <span class="n">swe</span><span class="o">.</span><span class="n">get_ayanamsa_name</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">swe</span><span class="p">,</span> <span class="n">mode_const</span><span class="p">))</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a>            <span class="n">zodiac_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ayanamsa&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Ayanamsa&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">mode_name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;houses_system_&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">houses_system_identifier</span><span class="p">,</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">houses_system_name</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;houses&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Houses&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">zodiac_info</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Natal&quot;</span><span class="p">,</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">]:</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;lunar_phase&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Lunar Phase&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;day&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Day&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">lunar_phase</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;moon_phase&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;lunar_phase&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Lunar Phase&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">lunar_phase</span><span class="o">.</span><span class="n">moon_phase_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;_&quot;</span><span class="p">),</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">lunar_phase</span><span class="o">.</span><span class="n">moon_phase_name</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_4&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">perspective_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;_&quot;</span><span class="p">),</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">perspective_type</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;lunar_phase&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Lunar Phase&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;day&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Day&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">lunar_phase</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;moon_phase&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;lunar_phase&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Lunar Phase&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">lunar_phase</span><span class="o">.</span><span class="n">moon_phase_name</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_4&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">perspective_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;_&quot;</span><span class="p">),</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">perspective_type</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">perspective_type</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;composite_chart&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Composite Chart&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;midpoints&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Midpoints&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_4&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a>        <span class="c1"># Draw moon phase</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a>        <span class="n">moon_phase_dict</span> <span class="o">=</span> <span class="n">calculate_moon_phase_chart_params</span><span class="p">(</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">lunar_phase</span><span class="p">[</span><span class="s2">&quot;degrees_between_s_m&quot;</span><span class="p">],</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolat</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a>        <span class="p">)</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;lunar_phase_rotate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">moon_phase_dict</span><span class="p">[</span><span class="s2">&quot;lunar_phase_rotate&quot;</span><span class="p">]</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;lunar_phase_circle_center_x&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">moon_phase_dict</span><span class="p">[</span><span class="s2">&quot;circle_center_x&quot;</span><span class="p">]</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;lunar_phase_circle_radius&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">moon_phase_dict</span><span class="p">[</span><span class="s2">&quot;circle_radius&quot;</span><span class="p">]</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">iso_formatted_local_datetime</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a>        <span class="c1"># Set location string</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a>        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">35</span><span class="p">:</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a>            <span class="n">split_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">split_location</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a>                <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">split_location</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="n">split_location</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_1&quot;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">35</span><span class="p">:</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a>                    <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_1&quot;</span><span class="p">][:</span><span class="mi">35</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>                <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">[:</span><span class="mi">35</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">location</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a>        <span class="c1"># Set chart name</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Synastry&quot;</span><span class="p">,</span> <span class="s2">&quot;Transit&quot;</span><span class="p">]:</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:&quot;</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Natal&quot;</span><span class="p">,</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">]:</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;info&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">:&#39;</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a>        <span class="c1"># Set additional information for Synastry chart type</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">:</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: &quot;</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_4&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">city</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_5&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">year</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">month</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">day</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">hour</span><span class="si">:</span><span class="s2">02d</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">minute</span><span class="si">:</span><span class="s2">02d</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_4&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">iso_formatted_local_datetime</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a>            <span class="n">latitude_string</span> <span class="o">=</span> <span class="n">convert_latitude_coordinate_to_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;north_letter&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;south_letter&#39;</span><span class="p">])</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a>            <span class="n">longitude_string</span> <span class="o">=</span> <span class="n">convert_longitude_coordinate_to_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">lng</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;east_letter&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;west_letter&#39;</span><span class="p">])</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_5&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">latitude_string</span><span class="si">}</span><span class="s2"> / </span><span class="si">{</span><span class="n">longitude_string</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a>            <span class="n">latitude_string</span> <span class="o">=</span> <span class="n">convert_latitude_coordinate_to_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geolat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;north&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;south&#39;</span><span class="p">])</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a>            <span class="n">longitude_string</span> <span class="o">=</span> <span class="n">convert_longitude_coordinate_to_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geolon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;east&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;west&#39;</span><span class="p">])</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;latitude&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">latitude_string</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_4&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;longitude&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">longitude_string</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_5&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a>        <span class="c1"># Set paper colors</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;paper_color_0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_0&quot;</span><span class="p">]</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;paper_color_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_1&quot;</span><span class="p">]</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a>        <span class="c1"># Set planet colors</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>        <span class="k">for</span> <span class="n">planet</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">:</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a>            <span class="n">planet_id</span> <span class="o">=</span> <span class="n">planet</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;planets_color_</span><span class="si">{</span><span class="n">planet_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">planet</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="c1"># type: ignore</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a>        <span class="c1"># Set zodiac colors</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">):</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;zodiac_color_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;zodiac_icon_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="c1"># type: ignore</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>        <span class="c1"># Set orb colors</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>        <span class="k">for</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_settings</span><span class="p">:</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;orb_color_</span><span class="si">{</span><span class="n">aspect</span><span class="p">[</span><span class="s1">&#39;degree&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">aspect</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="c1"># type: ignore</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>        <span class="c1"># Drawing functions</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeZodiac&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_zodiac_circle_slices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">)</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>        <span class="n">first_subject_houses_list</span> <span class="o">=</span> <span class="n">get_houses_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>        <span class="c1"># Draw houses grid and cusps</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Transit&quot;</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">]:</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>            <span class="n">second_subject_houses_list</span> <span class="o">=</span> <span class="n">get_houses_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="p">)</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeHousesGrid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_house_grid</span><span class="p">(</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a>                <span class="n">main_subject_houses_list</span><span class="o">=</span><span class="n">first_subject_houses_list</span><span class="p">,</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a>                <span class="n">secondary_subject_houses_list</span><span class="o">=</span><span class="n">second_subject_houses_list</span><span class="p">,</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>                <span class="n">text_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_0&quot;</span><span class="p">],</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a>                <span class="n">house_cusp_generale_name_label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;cusp&quot;</span><span class="p">]</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a>            <span class="p">)</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeHouses&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_houses_cusps_and_text_number</span><span class="p">(</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>                <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a>                <span class="n">first_subject_houses_list</span><span class="o">=</span><span class="n">first_subject_houses_list</span><span class="p">,</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a>                <span class="n">standard_house_cusp_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;houses_radix_line&quot;</span><span class="p">],</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a>                <span class="n">first_house_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">[</span><span class="mi">12</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a>                <span class="n">tenth_house_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">[</span><span class="mi">13</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a>                <span class="n">seventh_house_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">[</span><span class="mi">14</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a>                <span class="n">fourth_house_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">[</span><span class="mi">15</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a>                <span class="n">c1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">first_circle_radius</span><span class="p">,</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>                <span class="n">c3</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span><span class="p">,</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a>                <span class="n">second_subject_houses_list</span><span class="o">=</span><span class="n">second_subject_houses_list</span><span class="p">,</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a>                <span class="n">transit_house_cusp_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;houses_transit_line&quot;</span><span class="p">],</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a>            <span class="p">)</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeHousesGrid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_house_grid</span><span class="p">(</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>                <span class="n">main_subject_houses_list</span><span class="o">=</span><span class="n">first_subject_houses_list</span><span class="p">,</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a>                <span class="n">text_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_0&quot;</span><span class="p">],</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a>                <span class="n">house_cusp_generale_name_label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;cusp&quot;</span><span class="p">]</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a>            <span class="p">)</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeHouses&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_houses_cusps_and_text_number</span><span class="p">(</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>                <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>                <span class="n">first_subject_houses_list</span><span class="o">=</span><span class="n">first_subject_houses_list</span><span class="p">,</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a>                <span class="n">standard_house_cusp_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;houses_radix_line&quot;</span><span class="p">],</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a>                <span class="n">first_house_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">[</span><span class="mi">12</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>                <span class="n">tenth_house_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">[</span><span class="mi">13</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a>                <span class="n">seventh_house_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">[</span><span class="mi">14</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a>                <span class="n">fourth_house_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">[</span><span class="mi">15</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a>                <span class="n">c1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">first_circle_radius</span><span class="p">,</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>                <span class="n">c3</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span><span class="p">,</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>            <span class="p">)</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a>        <span class="c1"># Draw planets</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Transit&quot;</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">]:</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makePlanets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_planets</span><span class="p">(</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a>                <span class="n">available_kerykeion_celestial_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">available_kerykeion_celestial_points</span><span class="p">,</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a>                <span class="n">available_planets_setting</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">,</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a>                <span class="n">second_subject_available_kerykeion_celestial_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">t_available_kerykeion_celestial_points</span><span class="p">,</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>                <span class="n">radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>                <span class="n">main_subject_first_house_degree_ut</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_house</span><span class="o">.</span><span class="n">abs_pos</span><span class="p">,</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>                <span class="n">main_subject_seventh_house_degree_ut</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">seventh_house</span><span class="o">.</span><span class="n">abs_pos</span><span class="p">,</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a>                <span class="n">third_circle_radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span><span class="p">,</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a>            <span class="p">)</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makePlanets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_planets</span><span class="p">(</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a>                <span class="n">available_planets_setting</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">,</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a>                <span class="n">radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a>                <span class="n">available_kerykeion_celestial_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">available_kerykeion_celestial_points</span><span class="p">,</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a>                <span class="n">third_circle_radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span><span class="p">,</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a>                <span class="n">main_subject_first_house_degree_ut</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_house</span><span class="o">.</span><span class="n">abs_pos</span><span class="p">,</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>                <span class="n">main_subject_seventh_house_degree_ut</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">seventh_house</span><span class="o">.</span><span class="n">abs_pos</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a>            <span class="p">)</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a>        <span class="c1"># Draw elements percentages</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>        <span class="n">total</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fire</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">water</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">earth</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">air</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a>        <span class="n">fire_percentage</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">fire</span> <span class="o">/</span> <span class="n">total</span><span class="p">))</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a>        <span class="n">earth_percentage</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">earth</span> <span class="o">/</span> <span class="n">total</span><span class="p">))</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a>        <span class="n">air_percentage</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">air</span> <span class="o">/</span> <span class="n">total</span><span class="p">))</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a>        <span class="n">water_percentage</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">water</span> <span class="o">/</span> <span class="n">total</span><span class="p">))</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;fire_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;fire&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">fire_percentage</span><span class="si">}</span><span class="s2">%&quot;</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;earth_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;earth&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">earth_percentage</span><span class="si">}</span><span class="s2">%&quot;</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;air_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;air&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">air_percentage</span><span class="si">}</span><span class="s2">%&quot;</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;water_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;water&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">water_percentage</span><span class="si">}</span><span class="s2">%&quot;</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a>        <span class="c1"># Draw planet grid</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Transit&quot;</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">]:</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a>                <span class="n">second_subject_table_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;transit_name&quot;</span><span class="p">]</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a>                <span class="n">second_subject_table_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makePlanetGrid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_planet_grid</span><span class="p">(</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a>                <span class="n">planets_and_houses_grid_title</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;planets_and_house&quot;</span><span class="p">],</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a>                <span class="n">subject_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a>                <span class="n">available_kerykeion_celestial_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">available_kerykeion_celestial_points</span><span class="p">,</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>                <span class="n">text_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_0&quot;</span><span class="p">],</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a>                <span class="n">celestial_point_language</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;celestial_points&quot;</span><span class="p">],</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>                <span class="n">second_subject_name</span><span class="o">=</span><span class="n">second_subject_table_name</span><span class="p">,</span>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a>                <span class="n">second_subject_available_kerykeion_celestial_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">t_available_kerykeion_celestial_points</span><span class="p">,</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>            <span class="p">)</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a>                <span class="n">subject_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;and_word&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a>                <span class="n">subject_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makePlanetGrid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_planet_grid</span><span class="p">(</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a>                <span class="n">planets_and_houses_grid_title</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;planets_and_house&quot;</span><span class="p">],</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>                <span class="n">subject_name</span><span class="o">=</span><span class="n">subject_name</span><span class="p">,</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a>                <span class="n">available_kerykeion_celestial_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">available_kerykeion_celestial_points</span><span class="p">,</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a>                <span class="n">text_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_0&quot;</span><span class="p">],</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a>                <span class="n">celestial_point_language</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;celestial_points&quot;</span><span class="p">],</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a>            <span class="p">)</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a>        <span class="c1"># Set date time string</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Composite&quot;</span><span class="p">]:</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a>            <span class="c1"># First Subject Latitude and Longitude</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a>            <span class="n">latitude</span> <span class="o">=</span> <span class="n">convert_latitude_coordinate_to_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;north_letter&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;south_letter&quot;</span><span class="p">])</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a>            <span class="n">longitude</span> <span class="o">=</span> <span class="n">convert_longitude_coordinate_to_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">lng</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;east_letter&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;west_letter&quot;</span><span class="p">])</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">latitude</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">longitude</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>            <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">iso_formatted_local_datetime</span><span class="p">)</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a>            <span class="n">custom_format</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M [%z]&#39;</span><span class="p">)</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a>            <span class="n">custom_format</span> <span class="o">=</span> <span class="n">custom_format</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="n">custom_format</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">custom_format</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a>        <span class="k">return</span> <span class="n">ChartTemplateDictionary</span><span class="p">(</span><span class="o">**</span><span class="n">template_dict</span><span class="p">)</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeTemplate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a><span class="sd">        Render the full chart SVG as a string.</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a><span class="sd">        Reads the XML template, substitutes variables, and optionally inlines CSS</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a><span class="sd">        variables and minifies the output.</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a><span class="sd">        Args:</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a><span class="sd">            minify (bool): Remove whitespace and quotes for compactness.</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a><span class="sd">            remove_css_variables (bool): Embed CSS variable definitions.</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a><span class="sd">        Returns:</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a><span class="sd">            str: SVG markup as a string.</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>        <span class="n">td</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_template_dictionary</span><span class="p">()</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a>        <span class="n">DATA_DIR</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a>        <span class="n">xml_svg</span> <span class="o">=</span> <span class="n">DATA_DIR</span> <span class="o">/</span> <span class="s2">&quot;templates&quot;</span> <span class="o">/</span> <span class="s2">&quot;chart.xml&quot;</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a>        <span class="c1"># read template</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">xml_svg</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">td</span><span class="p">)</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a>        <span class="c1"># return filename</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Template dictionary keys: </span><span class="si">{</span><span class="n">td</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_create_template_dictionary</span><span class="p">()</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a>        <span class="k">if</span> <span class="n">remove_css_variables</span><span class="p">:</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">inline_css_variables_in_svg</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>        <span class="k">if</span> <span class="n">minify</span><span class="p">:</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">scourString</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;    &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a>        <span class="k">return</span> <span class="n">template</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeSVG</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a><span class="sd">        Generate and save the full chart SVG to disk.</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a><span class="sd">        Calls makeTemplate to render the SVG, then writes a file named</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a><span class="sd">        &quot;{subject.name} - {chart_type} Chart.svg&quot; in the output directory.</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a><span class="sd">        Args:</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a><span class="sd">            minify (bool): Pass-through to makeTemplate for compact output.</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a><span class="sd">            remove_css_variables (bool): Pass-through to makeTemplate to embed CSS variables.</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a><span class="sd">        Returns:</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a><span class="sd">            None</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeTemplate</span><span class="p">(</span><span class="n">minify</span><span class="p">,</span> <span class="n">remove_css_variables</span><span class="p">)</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a>        <span class="n">chartname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="si">}</span><span class="s2"> Chart.svg&quot;</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">chartname</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a>            <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">)</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SVG Generated Correctly in: </span><span class="si">{</span><span class="n">chartname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeWheelOnlyTemplate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a><span class="sd">        Render the wheel-only chart SVG as a string.</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a><span class="sd">        Reads the wheel-only XML template, substitutes chart data, and applies optional</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a><span class="sd">        CSS inlining and minification.</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a><span class="sd">        Args:</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a><span class="sd">            minify (bool): Remove whitespace and quotes for compactness.</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a><span class="sd">            remove_css_variables (bool): Embed CSS variable definitions.</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a><span class="sd">        Returns:</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a><span class="sd">            str: SVG markup for the chart wheel only.</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;templates&quot;</span> <span class="o">/</span> <span class="s2">&quot;wheel_only.xml&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>        <span class="n">template_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_template_dictionary</span><span class="p">()</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a>        <span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">template_dict</span><span class="p">)</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a>        <span class="k">if</span> <span class="n">remove_css_variables</span><span class="p">:</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">inline_css_variables_in_svg</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>        <span class="k">if</span> <span class="n">minify</span><span class="p">:</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">scourString</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;    &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>        <span class="k">return</span> <span class="n">template</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeWheelOnlySVG</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a><span class="sd">        Generate and save wheel-only chart SVG to disk.</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a><span class="sd">        Calls makeWheelOnlyTemplate and writes a file named</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a><span class="sd">        &quot;{subject.name} - {chart_type} Chart - Wheel Only.svg&quot; in the output directory.</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a><span class="sd">        Args:</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a><span class="sd">            minify (bool): Pass-through to makeWheelOnlyTemplate for compact output.</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a><span class="sd">            remove_css_variables (bool): Pass-through to makeWheelOnlyTemplate to embed CSS variables.</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a><span class="sd">        Returns:</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a><span class="sd">            None</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a>        <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeWheelOnlyTemplate</span><span class="p">(</span><span class="n">minify</span><span class="p">,</span> <span class="n">remove_css_variables</span><span class="p">)</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>        <span class="n">chartname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="si">}</span><span class="s2"> Chart - Wheel Only.svg&quot;</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">chartname</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a>            <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SVG Generated Correctly in: </span><span class="si">{</span><span class="n">chartname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeAspectGridOnlyTemplate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a><span class="sd">        Render the aspect-grid-only chart SVG as a string.</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a><span class="sd">        Reads the aspect-grid XML template, generates the aspect grid based on chart type,</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a><span class="sd">        and applies optional CSS inlining and minification.</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a><span class="sd">        Args:</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a><span class="sd">            minify (bool): Remove whitespace and quotes for compactness.</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a><span class="sd">            remove_css_variables (bool): Embed CSS variable definitions.</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a><span class="sd">        Returns:</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a><span class="sd">            str: SVG markup for the aspect grid only.</span>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;templates&quot;</span> <span class="o">/</span> <span class="s2">&quot;aspect_grid_only.xml&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>        <span class="n">template_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_template_dictionary</span><span class="p">()</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Transit&quot;</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">]:</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a>            <span class="n">aspects_grid</span> <span class="o">=</span> <span class="n">draw_transit_aspect_grid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;paper_0&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span><span class="p">)</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a>            <span class="n">aspects_grid</span> <span class="o">=</span> <span class="n">draw_aspect_grid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;paper_0&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span><span class="p">,</span> <span class="n">x_start</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">y_start</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a>        <span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">substitute</span><span class="p">({</span><span class="o">**</span><span class="n">template_dict</span><span class="p">,</span> <span class="s2">&quot;makeAspectGrid&quot;</span><span class="p">:</span> <span class="n">aspects_grid</span><span class="p">})</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a>        <span class="k">if</span> <span class="n">remove_css_variables</span><span class="p">:</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">inline_css_variables_in_svg</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>        <span class="k">if</span> <span class="n">minify</span><span class="p">:</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">scourString</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;    &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>        <span class="k">return</span> <span class="n">template</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeAspectGridOnlySVG</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a><span class="sd">        Generate and save aspect-grid-only chart SVG to disk.</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a><span class="sd">        Calls makeAspectGridOnlyTemplate and writes a file named</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a><span class="sd">        &quot;{subject.name} - {chart_type} Chart - Aspect Grid Only.svg&quot; in the output directory.</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a><span class="sd">        Args:</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a><span class="sd">            minify (bool): Pass-through to makeAspectGridOnlyTemplate for compact output.</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a><span class="sd">            remove_css_variables (bool): Pass-through to makeAspectGridOnlyTemplate to embed CSS variables.</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a><span class="sd">        Returns:</span>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a><span class="sd">            None</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>        <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeAspectGridOnlyTemplate</span><span class="p">(</span><span class="n">minify</span><span class="p">,</span> <span class="n">remove_css_variables</span><span class="p">)</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a>        <span class="n">chartname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="si">}</span><span class="s2"> Chart - Aspect Grid Only.svg&quot;</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">chartname</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>            <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SVG Generated Correctly in: </span><span class="si">{</span><span class="n">chartname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a>    <span class="kn">from</span><span class="w"> </span><span class="nn">kerykeion.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="n">setup_logging</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a>    <span class="kn">from</span><span class="w"> </span><span class="nn">kerykeion.composite_subject_factory</span><span class="w"> </span><span class="kn">import</span> <span class="n">CompositeSubjectFactory</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a>    <span class="n">setup_logging</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">&quot;debug&quot;</span><span class="p">)</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a>    <span class="n">first</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a>    <span class="n">second</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;Paul McCartney&quot;</span><span class="p">,</span> <span class="mi">1942</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>    <span class="c1"># Internal Natal Chart</span>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>    <span class="n">internal_natal_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">first</span><span class="p">)</span>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>    <span class="n">internal_natal_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a>    <span class="c1"># External Natal Chart</span>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a>    <span class="n">external_natal_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">,</span> <span class="n">second</span><span class="p">)</span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a>    <span class="n">external_natal_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a>    <span class="c1"># Synastry Chart</span>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a>    <span class="n">synastry_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">,</span> <span class="n">second</span><span class="p">)</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a>    <span class="n">synastry_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a>    <span class="c1"># Transits Chart</span>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a>    <span class="n">transits_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="s2">&quot;Transit&quot;</span><span class="p">,</span> <span class="n">second</span><span class="p">)</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a>    <span class="n">transits_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a>    <span class="c1"># Sidereal Birth Chart (Lahiri)</span>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a>    <span class="n">sidereal_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon Lahiri&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">,</span> <span class="n">zodiac_type</span><span class="o">=</span><span class="s2">&quot;Sidereal&quot;</span><span class="p">,</span> <span class="n">sidereal_mode</span><span class="o">=</span><span class="s2">&quot;LAHIRI&quot;</span><span class="p">)</span>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a>    <span class="n">sidereal_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">sidereal_subject</span><span class="p">)</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a>    <span class="n">sidereal_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a>    <span class="c1"># Sidereal Birth Chart (Fagan-Bradley)</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a>    <span class="n">sidereal_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon Fagan-Bradley&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">,</span> <span class="n">zodiac_type</span><span class="o">=</span><span class="s2">&quot;Sidereal&quot;</span><span class="p">,</span> <span class="n">sidereal_mode</span><span class="o">=</span><span class="s2">&quot;FAGAN_BRADLEY&quot;</span><span class="p">)</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a>    <span class="n">sidereal_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">sidereal_subject</span><span class="p">)</span>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a>    <span class="n">sidereal_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a>    <span class="c1"># Sidereal Birth Chart (DeLuce)</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a>    <span class="n">sidereal_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon DeLuce&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">,</span> <span class="n">zodiac_type</span><span class="o">=</span><span class="s2">&quot;Sidereal&quot;</span><span class="p">,</span> <span class="n">sidereal_mode</span><span class="o">=</span><span class="s2">&quot;DELUCE&quot;</span><span class="p">)</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a>    <span class="n">sidereal_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">sidereal_subject</span><span class="p">)</span>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a>    <span class="n">sidereal_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a>    <span class="c1"># Sidereal Birth Chart (J2000)</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a>    <span class="n">sidereal_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon J2000&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">,</span> <span class="n">zodiac_type</span><span class="o">=</span><span class="s2">&quot;Sidereal&quot;</span><span class="p">,</span> <span class="n">sidereal_mode</span><span class="o">=</span><span class="s2">&quot;J2000&quot;</span><span class="p">)</span>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a>    <span class="n">sidereal_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">sidereal_subject</span><span class="p">)</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a>    <span class="n">sidereal_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a>    <span class="c1"># House System Morinus</span>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>    <span class="n">morinus_house_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - House System Morinus&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">,</span> <span class="n">houses_system_identifier</span><span class="o">=</span><span class="s2">&quot;M&quot;</span><span class="p">)</span>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a>    <span class="n">morinus_house_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">morinus_house_subject</span><span class="p">)</span>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a>    <span class="n">morinus_house_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a>    <span class="c1">## To check all the available house systems uncomment the following code:</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a>    <span class="c1"># from kerykeion.kr_types import HousesSystemIdentifier</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>    <span class="c1"># from typing import get_args</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a>    <span class="c1"># for i in get_args(HousesSystemIdentifier):</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>    <span class="c1">#     alternatives_house_subject = AstrologicalSubject(f&quot;John Lennon - House System {i}&quot;, 1940, 10, 9, 18, 30, &quot;Liverpool&quot;, &quot;GB&quot;, houses_system=i)</span>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>    <span class="c1">#     alternatives_house_chart = ChartDrawer(alternatives_house_subject)</span>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a>    <span class="c1">#     alternatives_house_chart.makeSVG()</span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>    <span class="c1"># With True Geocentric Perspective</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a>    <span class="n">true_geocentric_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - True Geocentric&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">,</span> <span class="n">perspective_type</span><span class="o">=</span><span class="s2">&quot;True Geocentric&quot;</span><span class="p">)</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a>    <span class="n">true_geocentric_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">true_geocentric_subject</span><span class="p">)</span>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a>    <span class="n">true_geocentric_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a>    <span class="c1"># With Heliocentric Perspective</span>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a>    <span class="n">heliocentric_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Heliocentric&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">,</span> <span class="n">perspective_type</span><span class="o">=</span><span class="s2">&quot;Heliocentric&quot;</span><span class="p">)</span>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a>    <span class="n">heliocentric_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">heliocentric_subject</span><span class="p">)</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a>    <span class="n">heliocentric_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>    <span class="c1"># With Topocentric Perspective</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a>    <span class="n">topocentric_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Topocentric&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">,</span> <span class="n">perspective_type</span><span class="o">=</span><span class="s2">&quot;Topocentric&quot;</span><span class="p">)</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a>    <span class="n">topocentric_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">topocentric_subject</span><span class="p">)</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a>    <span class="n">topocentric_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a>    <span class="c1"># Minified SVG</span>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a>    <span class="n">minified_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Minified&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a>    <span class="n">minified_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">minified_subject</span><span class="p">)</span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a>    <span class="n">minified_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">(</span><span class="n">minify</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a>    <span class="c1"># Dark Theme Natal Chart</span>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>    <span class="n">dark_theme_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Dark Theme&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a>    <span class="n">dark_theme_natal_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">dark_theme_subject</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s2">&quot;dark&quot;</span><span class="p">)</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a>    <span class="n">dark_theme_natal_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a>    <span class="c1"># Dark High Contrast Theme Natal Chart</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a>    <span class="n">dark_high_contrast_theme_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Dark High Contrast Theme&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>    <span class="n">dark_high_contrast_theme_natal_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">dark_high_contrast_theme_subject</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s2">&quot;dark-high-contrast&quot;</span><span class="p">)</span>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a>    <span class="n">dark_high_contrast_theme_natal_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>    <span class="c1"># Light Theme Natal Chart</span>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>    <span class="n">light_theme_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Light Theme&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a>    <span class="n">light_theme_natal_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">light_theme_subject</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s2">&quot;light&quot;</span><span class="p">)</span>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a>    <span class="n">light_theme_natal_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a>    <span class="c1"># Dark Theme External Natal Chart</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>    <span class="n">dark_theme_external_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Dark Theme External&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>    <span class="n">dark_theme_external_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">dark_theme_external_subject</span><span class="p">,</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">,</span> <span class="n">second</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s2">&quot;dark&quot;</span><span class="p">)</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a>    <span class="n">dark_theme_external_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a>    <span class="c1"># Dark Theme Synastry Chart</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a>    <span class="n">dark_theme_synastry_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - DTS&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a>    <span class="n">dark_theme_synastry_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">dark_theme_synastry_subject</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">,</span> <span class="n">second</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s2">&quot;dark&quot;</span><span class="p">)</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a>    <span class="n">dark_theme_synastry_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>    <span class="c1"># Wheel Natal Only Chart</span>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a>    <span class="n">wheel_only_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Wheel Only&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>    <span class="n">wheel_only_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">wheel_only_subject</span><span class="p">)</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a>    <span class="n">wheel_only_chart</span><span class="o">.</span><span class="n">makeWheelOnlySVG</span><span class="p">()</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>    <span class="c1"># Wheel External Natal Only Chart</span>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>    <span class="n">wheel_external_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Wheel External Only&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>    <span class="n">wheel_external_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">wheel_external_subject</span><span class="p">,</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">,</span> <span class="n">second</span><span class="p">)</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>    <span class="n">wheel_external_chart</span><span class="o">.</span><span class="n">makeWheelOnlySVG</span><span class="p">()</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a>    <span class="c1"># Wheel Synastry Only Chart</span>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a>    <span class="n">wheel_synastry_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Wheel Synastry Only&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a>    <span class="n">wheel_synastry_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">wheel_synastry_subject</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">,</span> <span class="n">second</span><span class="p">)</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>    <span class="n">wheel_synastry_chart</span><span class="o">.</span><span class="n">makeWheelOnlySVG</span><span class="p">()</span>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a>    <span class="c1"># Wheel Transit Only Chart</span>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a>    <span class="n">wheel_transit_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Wheel Transit Only&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a>    <span class="n">wheel_transit_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">wheel_transit_subject</span><span class="p">,</span> <span class="s2">&quot;Transit&quot;</span><span class="p">,</span> <span class="n">second</span><span class="p">)</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a>    <span class="n">wheel_transit_chart</span><span class="o">.</span><span class="n">makeWheelOnlySVG</span><span class="p">()</span>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a>    <span class="c1"># Wheel Sidereal Birth Chart (Lahiri) Dark Theme</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>    <span class="n">sidereal_dark_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon Lahiri - Dark Theme&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">,</span> <span class="n">zodiac_type</span><span class="o">=</span><span class="s2">&quot;Sidereal&quot;</span><span class="p">,</span> <span class="n">sidereal_mode</span><span class="o">=</span><span class="s2">&quot;LAHIRI&quot;</span><span class="p">)</span>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>    <span class="n">sidereal_dark_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">sidereal_dark_subject</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s2">&quot;dark&quot;</span><span class="p">)</span>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>    <span class="n">sidereal_dark_chart</span><span class="o">.</span><span class="n">makeWheelOnlySVG</span><span class="p">()</span>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a>    <span class="c1"># Wheel Sidereal Birth Chart (Fagan-Bradley) Light Theme</span>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a>    <span class="n">sidereal_light_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon Fagan-Bradley - Light Theme&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">,</span> <span class="n">zodiac_type</span><span class="o">=</span><span class="s2">&quot;Sidereal&quot;</span><span class="p">,</span> <span class="n">sidereal_mode</span><span class="o">=</span><span class="s2">&quot;FAGAN_BRADLEY&quot;</span><span class="p">)</span>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a>    <span class="n">sidereal_light_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">sidereal_light_subject</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s2">&quot;light&quot;</span><span class="p">)</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a>    <span class="n">sidereal_light_chart</span><span class="o">.</span><span class="n">makeWheelOnlySVG</span><span class="p">()</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a>    <span class="c1"># Aspect Grid Only Natal Chart</span>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a>    <span class="n">aspect_grid_only_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Aspect Grid Only&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a>    <span class="n">aspect_grid_only_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">aspect_grid_only_subject</span><span class="p">)</span>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a>    <span class="n">aspect_grid_only_chart</span><span class="o">.</span><span class="n">makeAspectGridOnlySVG</span><span class="p">()</span>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a>    <span class="c1"># Aspect Grid Only Dark Theme Natal Chart</span>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a>    <span class="n">aspect_grid_dark_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Aspect Grid Dark Theme&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a>    <span class="n">aspect_grid_dark_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">aspect_grid_dark_subject</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s2">&quot;dark&quot;</span><span class="p">)</span>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a>    <span class="n">aspect_grid_dark_chart</span><span class="o">.</span><span class="n">makeAspectGridOnlySVG</span><span class="p">()</span>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a>    <span class="c1"># Aspect Grid Only Light Theme Natal Chart</span>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a>    <span class="n">aspect_grid_light_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Aspect Grid Light Theme&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a>    <span class="n">aspect_grid_light_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">aspect_grid_light_subject</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s2">&quot;light&quot;</span><span class="p">)</span>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a>    <span class="n">aspect_grid_light_chart</span><span class="o">.</span><span class="n">makeAspectGridOnlySVG</span><span class="p">()</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a>    <span class="c1"># Synastry Chart Aspect Grid Only</span>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a>    <span class="n">aspect_grid_synastry_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Aspect Grid Synastry&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a>    <span class="n">aspect_grid_synastry_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">aspect_grid_synastry_subject</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">,</span> <span class="n">second</span><span class="p">)</span>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a>    <span class="n">aspect_grid_synastry_chart</span><span class="o">.</span><span class="n">makeAspectGridOnlySVG</span><span class="p">()</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a>    <span class="c1"># Transit Chart Aspect Grid Only</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a>    <span class="n">aspect_grid_transit_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Aspect Grid Transit&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a>    <span class="n">aspect_grid_transit_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">aspect_grid_transit_subject</span><span class="p">,</span> <span class="s2">&quot;Transit&quot;</span><span class="p">,</span> <span class="n">second</span><span class="p">)</span>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a>    <span class="n">aspect_grid_transit_chart</span><span class="o">.</span><span class="n">makeAspectGridOnlySVG</span><span class="p">()</span>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a>    <span class="c1"># Synastry Chart Aspect Grid Only Dark Theme</span>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a>    <span class="n">aspect_grid_dark_synastry_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - Aspect Grid Dark Synastry&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a>    <span class="n">aspect_grid_dark_synastry_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">aspect_grid_dark_synastry_subject</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">,</span> <span class="n">second</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s2">&quot;dark&quot;</span><span class="p">)</span>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a>    <span class="n">aspect_grid_dark_synastry_chart</span><span class="o">.</span><span class="n">makeAspectGridOnlySVG</span><span class="p">()</span>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a>    <span class="c1"># Synastry Chart With draw_transit_aspect_list table</span>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a>    <span class="n">synastry_chart_with_table_list_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - SCTWL&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a>    <span class="n">synastry_chart_with_table_list</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">synastry_chart_with_table_list_subject</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">,</span> <span class="n">second</span><span class="p">,</span> <span class="n">double_chart_aspect_grid_type</span><span class="o">=</span><span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s2">&quot;dark&quot;</span><span class="p">)</span>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a>    <span class="n">synastry_chart_with_table_list</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a>    <span class="c1"># Transit Chart With draw_transit_aspect_grid table</span>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a>    <span class="n">transit_chart_with_table_grid_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;John Lennon - TCWTG&quot;</span><span class="p">,</span> <span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Liverpool&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">)</span>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a>    <span class="n">transit_chart_with_table_grid</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">transit_chart_with_table_grid_subject</span><span class="p">,</span> <span class="s2">&quot;Transit&quot;</span><span class="p">,</span> <span class="n">second</span><span class="p">,</span> <span class="n">double_chart_aspect_grid_type</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s2">&quot;dark&quot;</span><span class="p">)</span>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a>    <span class="n">transit_chart_with_table_grid</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a>    <span class="c1"># Chines Language Chart</span>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a>    <span class="n">chinese_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;Hua Chenyu&quot;</span><span class="p">,</span> <span class="mi">1990</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Hunan&quot;</span><span class="p">,</span> <span class="s2">&quot;CN&quot;</span><span class="p">)</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a>    <span class="n">chinese_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">chinese_subject</span><span class="p">,</span> <span class="n">chart_language</span><span class="o">=</span><span class="s2">&quot;CN&quot;</span><span class="p">)</span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a>    <span class="n">chinese_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a>    <span class="c1"># French Language Chart</span>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a>    <span class="n">french_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;Jeanne Moreau&quot;</span><span class="p">,</span> <span class="mi">1928</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Paris&quot;</span><span class="p">,</span> <span class="s2">&quot;FR&quot;</span><span class="p">)</span>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a>    <span class="n">french_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">french_subject</span><span class="p">,</span> <span class="n">chart_language</span><span class="o">=</span><span class="s2">&quot;FR&quot;</span><span class="p">)</span>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a>    <span class="n">french_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a>    <span class="c1"># Spanish Language Chart</span>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>    <span class="n">spanish_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;Antonio Banderas&quot;</span><span class="p">,</span> <span class="mi">1960</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Malaga&quot;</span><span class="p">,</span> <span class="s2">&quot;ES&quot;</span><span class="p">)</span>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a>    <span class="n">spanish_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">spanish_subject</span><span class="p">,</span> <span class="n">chart_language</span><span class="o">=</span><span class="s2">&quot;ES&quot;</span><span class="p">)</span>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a>    <span class="n">spanish_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a>    <span class="c1"># Portuguese Language Chart</span>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a>    <span class="n">portuguese_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;Cristiano Ronaldo&quot;</span><span class="p">,</span> <span class="mi">1985</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="s2">&quot;Funchal&quot;</span><span class="p">,</span> <span class="s2">&quot;PT&quot;</span><span class="p">)</span>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a>    <span class="n">portuguese_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">portuguese_subject</span><span class="p">,</span> <span class="n">chart_language</span><span class="o">=</span><span class="s2">&quot;PT&quot;</span><span class="p">)</span>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a>    <span class="n">portuguese_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a>    <span class="c1"># Italian Language Chart</span>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a>    <span class="n">italian_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;Sophia Loren&quot;</span><span class="p">,</span> <span class="mi">1934</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Rome&quot;</span><span class="p">,</span> <span class="s2">&quot;IT&quot;</span><span class="p">)</span>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a>    <span class="n">italian_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">italian_subject</span><span class="p">,</span> <span class="n">chart_language</span><span class="o">=</span><span class="s2">&quot;IT&quot;</span><span class="p">)</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a>    <span class="n">italian_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a>    <span class="c1"># Russian Language Chart</span>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a>    <span class="n">russian_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;Mikhail Bulgakov&quot;</span><span class="p">,</span> <span class="mi">1891</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Kiev&quot;</span><span class="p">,</span> <span class="s2">&quot;UA&quot;</span><span class="p">)</span>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a>    <span class="n">russian_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">russian_subject</span><span class="p">,</span> <span class="n">chart_language</span><span class="o">=</span><span class="s2">&quot;RU&quot;</span><span class="p">)</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a>    <span class="n">russian_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a>    <span class="c1"># Turkish Language Chart</span>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a>    <span class="n">turkish_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;Mehmet Oz&quot;</span><span class="p">,</span> <span class="mi">1960</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Istanbul&quot;</span><span class="p">,</span> <span class="s2">&quot;TR&quot;</span><span class="p">)</span>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a>    <span class="n">turkish_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">turkish_subject</span><span class="p">,</span> <span class="n">chart_language</span><span class="o">=</span><span class="s2">&quot;TR&quot;</span><span class="p">)</span>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a>    <span class="n">turkish_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a>    <span class="c1"># German Language Chart</span>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a>    <span class="n">german_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;Albert Einstein&quot;</span><span class="p">,</span> <span class="mi">1879</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Ulm&quot;</span><span class="p">,</span> <span class="s2">&quot;DE&quot;</span><span class="p">)</span>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a>    <span class="n">german_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">german_subject</span><span class="p">,</span> <span class="n">chart_language</span><span class="o">=</span><span class="s2">&quot;DE&quot;</span><span class="p">)</span>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a>    <span class="n">german_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a>    <span class="c1"># Hindi Language Chart</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a>    <span class="n">hindi_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;Amitabh Bachchan&quot;</span><span class="p">,</span> <span class="mi">1942</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Allahabad&quot;</span><span class="p">,</span> <span class="s2">&quot;IN&quot;</span><span class="p">)</span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a>    <span class="n">hindi_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">hindi_subject</span><span class="p">,</span> <span class="n">chart_language</span><span class="o">=</span><span class="s2">&quot;HI&quot;</span><span class="p">)</span>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a>    <span class="n">hindi_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a>    <span class="c1"># Kanye West Natal Chart</span>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a>    <span class="n">kanye_west_subject</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;Kanye&quot;</span><span class="p">,</span> <span class="mi">1977</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="s2">&quot;Atlanta&quot;</span><span class="p">,</span> <span class="s2">&quot;US&quot;</span><span class="p">)</span>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a>    <span class="n">kanye_west_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">kanye_west_subject</span><span class="p">)</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a>    <span class="n">kanye_west_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a>    <span class="c1"># Composite Chart</span>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a>    <span class="n">angelina</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;Angelina Jolie&quot;</span><span class="p">,</span> <span class="mi">1975</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="s2">&quot;Los Angeles&quot;</span><span class="p">,</span> <span class="s2">&quot;US&quot;</span><span class="p">,</span> <span class="n">lng</span><span class="o">=-</span><span class="mf">118.15</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="mf">34.03</span><span class="p">,</span> <span class="n">tz_str</span><span class="o">=</span><span class="s2">&quot;America/Los_Angeles&quot;</span><span class="p">)</span>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a>    <span class="n">brad</span> <span class="o">=</span> <span class="n">AstrologicalSubject</span><span class="p">(</span><span class="s2">&quot;Brad Pitt&quot;</span><span class="p">,</span> <span class="mi">1963</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="s2">&quot;Shawnee&quot;</span><span class="p">,</span> <span class="s2">&quot;US&quot;</span><span class="p">,</span> <span class="n">lng</span><span class="o">=-</span><span class="mf">96.56</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="mf">35.20</span><span class="p">,</span> <span class="n">tz_str</span><span class="o">=</span><span class="s2">&quot;America/Chicago&quot;</span><span class="p">)</span>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a>    <span class="n">composite_subject_factory</span> <span class="o">=</span> <span class="n">CompositeSubjectFactory</span><span class="p">(</span><span class="n">angelina</span><span class="p">,</span> <span class="n">brad</span><span class="p">)</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a>    <span class="n">composite_subject_model</span> <span class="o">=</span> <span class="n">composite_subject_factory</span><span class="o">.</span><span class="n">get_midpoint_composite_subject_model</span><span class="p">()</span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a>    <span class="n">composite_chart</span> <span class="o">=</span> <span class="n">ChartDrawer</span><span class="p">(</span><span class="n">composite_subject_model</span><span class="p">,</span> <span class="s2">&quot;Composite&quot;</span><span class="p">)</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a>    <span class="n">composite_chart</span><span class="o">.</span><span class="n">makeSVG</span><span class="p">()</span>
</span></pre></div>


            </section>
                <section id="ChartDrawer">
                            <input id="ChartDrawer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">

    <span class="def">class</span>
    <span class="name">ChartDrawer</span>:

                <label class="view-source-button" for="ChartDrawer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ChartDrawer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ChartDrawer-49"><a href="#ChartDrawer-49"><span class="linenos"> 49</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ChartDrawer</span><span class="p">:</span>
</span><span id="ChartDrawer-50"><a href="#ChartDrawer-50"><span class="linenos"> 50</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer-51"><a href="#ChartDrawer-51"><span class="linenos"> 51</span></a><span class="sd">    ChartDrawer generates astrological chart visualizations as SVG files.</span>
</span><span id="ChartDrawer-52"><a href="#ChartDrawer-52"><span class="linenos"> 52</span></a>
</span><span id="ChartDrawer-53"><a href="#ChartDrawer-53"><span class="linenos"> 53</span></a><span class="sd">    This class supports creating full chart SVGs, wheel-only SVGs, and aspect-grid-only SVGs</span>
</span><span id="ChartDrawer-54"><a href="#ChartDrawer-54"><span class="linenos"> 54</span></a><span class="sd">    for various chart types including Natal, ExternalNatal, Transit, Synastry, and Composite.</span>
</span><span id="ChartDrawer-55"><a href="#ChartDrawer-55"><span class="linenos"> 55</span></a><span class="sd">    Charts are rendered using XML templates and drawing utilities, with customizable themes,</span>
</span><span id="ChartDrawer-56"><a href="#ChartDrawer-56"><span class="linenos"> 56</span></a><span class="sd">    language, active points, and aspects.</span>
</span><span id="ChartDrawer-57"><a href="#ChartDrawer-57"><span class="linenos"> 57</span></a><span class="sd">    The rendered SVGs can be saved to a specified output directory or, by default, to the user&#39;s home directory.</span>
</span><span id="ChartDrawer-58"><a href="#ChartDrawer-58"><span class="linenos"> 58</span></a>
</span><span id="ChartDrawer-59"><a href="#ChartDrawer-59"><span class="linenos"> 59</span></a><span class="sd">    NOTE:</span>
</span><span id="ChartDrawer-60"><a href="#ChartDrawer-60"><span class="linenos"> 60</span></a><span class="sd">        The generated SVG files are optimized for web use, opening in browsers. If you want to</span>
</span><span id="ChartDrawer-61"><a href="#ChartDrawer-61"><span class="linenos"> 61</span></a><span class="sd">        use them in other applications, you might need to adjust the SVG settings or styles.</span>
</span><span id="ChartDrawer-62"><a href="#ChartDrawer-62"><span class="linenos"> 62</span></a>
</span><span id="ChartDrawer-63"><a href="#ChartDrawer-63"><span class="linenos"> 63</span></a><span class="sd">    Args:</span>
</span><span id="ChartDrawer-64"><a href="#ChartDrawer-64"><span class="linenos"> 64</span></a><span class="sd">        first_obj (AstrologicalSubject | AstrologicalSubjectModel | CompositeSubjectModel):</span>
</span><span id="ChartDrawer-65"><a href="#ChartDrawer-65"><span class="linenos"> 65</span></a><span class="sd">            The primary astrological subject for the chart.</span>
</span><span id="ChartDrawer-66"><a href="#ChartDrawer-66"><span class="linenos"> 66</span></a><span class="sd">        chart_type (ChartType, optional):</span>
</span><span id="ChartDrawer-67"><a href="#ChartDrawer-67"><span class="linenos"> 67</span></a><span class="sd">            The type of chart to generate (&#39;Natal&#39;, &#39;ExternalNatal&#39;, &#39;Transit&#39;, &#39;Synastry&#39;, &#39;Composite&#39;).</span>
</span><span id="ChartDrawer-68"><a href="#ChartDrawer-68"><span class="linenos"> 68</span></a><span class="sd">            Defaults to &#39;Natal&#39;.</span>
</span><span id="ChartDrawer-69"><a href="#ChartDrawer-69"><span class="linenos"> 69</span></a><span class="sd">        second_obj (AstrologicalSubject | AstrologicalSubjectModel, optional):</span>
</span><span id="ChartDrawer-70"><a href="#ChartDrawer-70"><span class="linenos"> 70</span></a><span class="sd">            The secondary subject for Transit or Synastry charts. Not required for Natal or Composite.</span>
</span><span id="ChartDrawer-71"><a href="#ChartDrawer-71"><span class="linenos"> 71</span></a><span class="sd">        new_output_directory (str | Path, optional):</span>
</span><span id="ChartDrawer-72"><a href="#ChartDrawer-72"><span class="linenos"> 72</span></a><span class="sd">            Directory to write generated SVG files. Defaults to the user&#39;s home directory.</span>
</span><span id="ChartDrawer-73"><a href="#ChartDrawer-73"><span class="linenos"> 73</span></a><span class="sd">        new_settings_file (Path | dict | KerykeionSettingsModel, optional):</span>
</span><span id="ChartDrawer-74"><a href="#ChartDrawer-74"><span class="linenos"> 74</span></a><span class="sd">            Path or settings object to override default chart configuration (colors, fonts, aspects).</span>
</span><span id="ChartDrawer-75"><a href="#ChartDrawer-75"><span class="linenos"> 75</span></a><span class="sd">        theme (KerykeionChartTheme, optional):</span>
</span><span id="ChartDrawer-76"><a href="#ChartDrawer-76"><span class="linenos"> 76</span></a><span class="sd">            CSS theme for the chart. If None, no default styles are applied. Defaults to &#39;classic&#39;.</span>
</span><span id="ChartDrawer-77"><a href="#ChartDrawer-77"><span class="linenos"> 77</span></a><span class="sd">        double_chart_aspect_grid_type (Literal[&#39;list&#39;, &#39;table&#39;], optional):</span>
</span><span id="ChartDrawer-78"><a href="#ChartDrawer-78"><span class="linenos"> 78</span></a><span class="sd">            Specifies rendering style for double-chart aspect grids. Defaults to &#39;list&#39;.</span>
</span><span id="ChartDrawer-79"><a href="#ChartDrawer-79"><span class="linenos"> 79</span></a><span class="sd">        chart_language (KerykeionChartLanguage, optional):</span>
</span><span id="ChartDrawer-80"><a href="#ChartDrawer-80"><span class="linenos"> 80</span></a><span class="sd">            Language code for chart labels. Defaults to &#39;EN&#39;.</span>
</span><span id="ChartDrawer-81"><a href="#ChartDrawer-81"><span class="linenos"> 81</span></a><span class="sd">        active_points (list[Planet | AxialCusps], optional):</span>
</span><span id="ChartDrawer-82"><a href="#ChartDrawer-82"><span class="linenos"> 82</span></a><span class="sd">            List of celestial points and angles to include. Defaults to DEFAULT_ACTIVE_POINTS.</span>
</span><span id="ChartDrawer-83"><a href="#ChartDrawer-83"><span class="linenos"> 83</span></a><span class="sd">            Example:</span>
</span><span id="ChartDrawer-84"><a href="#ChartDrawer-84"><span class="linenos"> 84</span></a><span class="sd">            [&quot;Sun&quot;, &quot;Moon&quot;, &quot;Mercury&quot;, &quot;Venus&quot;]</span>
</span><span id="ChartDrawer-85"><a href="#ChartDrawer-85"><span class="linenos"> 85</span></a>
</span><span id="ChartDrawer-86"><a href="#ChartDrawer-86"><span class="linenos"> 86</span></a><span class="sd">        active_aspects (list[ActiveAspect], optional):</span>
</span><span id="ChartDrawer-87"><a href="#ChartDrawer-87"><span class="linenos"> 87</span></a><span class="sd">            List of aspects (name and orb) to calculate. Defaults to DEFAULT_ACTIVE_ASPECTS.</span>
</span><span id="ChartDrawer-88"><a href="#ChartDrawer-88"><span class="linenos"> 88</span></a><span class="sd">            Example:</span>
</span><span id="ChartDrawer-89"><a href="#ChartDrawer-89"><span class="linenos"> 89</span></a><span class="sd">            [</span>
</span><span id="ChartDrawer-90"><a href="#ChartDrawer-90"><span class="linenos"> 90</span></a><span class="sd">                {&quot;name&quot;: &quot;conjunction&quot;, &quot;orb&quot;: 10},</span>
</span><span id="ChartDrawer-91"><a href="#ChartDrawer-91"><span class="linenos"> 91</span></a><span class="sd">                {&quot;name&quot;: &quot;opposition&quot;, &quot;orb&quot;: 10},</span>
</span><span id="ChartDrawer-92"><a href="#ChartDrawer-92"><span class="linenos"> 92</span></a><span class="sd">                {&quot;name&quot;: &quot;trine&quot;, &quot;orb&quot;: 8},</span>
</span><span id="ChartDrawer-93"><a href="#ChartDrawer-93"><span class="linenos"> 93</span></a><span class="sd">                {&quot;name&quot;: &quot;sextile&quot;, &quot;orb&quot;: 6},</span>
</span><span id="ChartDrawer-94"><a href="#ChartDrawer-94"><span class="linenos"> 94</span></a><span class="sd">                {&quot;name&quot;: &quot;square&quot;, &quot;orb&quot;: 5},</span>
</span><span id="ChartDrawer-95"><a href="#ChartDrawer-95"><span class="linenos"> 95</span></a><span class="sd">                {&quot;name&quot;: &quot;quintile&quot;, &quot;orb&quot;: 1},</span>
</span><span id="ChartDrawer-96"><a href="#ChartDrawer-96"><span class="linenos"> 96</span></a><span class="sd">            ]</span>
</span><span id="ChartDrawer-97"><a href="#ChartDrawer-97"><span class="linenos"> 97</span></a>
</span><span id="ChartDrawer-98"><a href="#ChartDrawer-98"><span class="linenos"> 98</span></a><span class="sd">    Public Methods:</span>
</span><span id="ChartDrawer-99"><a href="#ChartDrawer-99"><span class="linenos"> 99</span></a><span class="sd">        makeTemplate(minify=False, remove_css_variables=False) -&gt; str:</span>
</span><span id="ChartDrawer-100"><a href="#ChartDrawer-100"><span class="linenos">100</span></a><span class="sd">            Render the full chart SVG as a string without writing to disk. Use `minify=True`</span>
</span><span id="ChartDrawer-101"><a href="#ChartDrawer-101"><span class="linenos">101</span></a><span class="sd">            to remove whitespace and quotes, and `remove_css_variables=True` to embed CSS vars.</span>
</span><span id="ChartDrawer-102"><a href="#ChartDrawer-102"><span class="linenos">102</span></a>
</span><span id="ChartDrawer-103"><a href="#ChartDrawer-103"><span class="linenos">103</span></a><span class="sd">        makeSVG(minify=False, remove_css_variables=False) -&gt; None:</span>
</span><span id="ChartDrawer-104"><a href="#ChartDrawer-104"><span class="linenos">104</span></a><span class="sd">            Generate and write the full chart SVG file to the output directory.</span>
</span><span id="ChartDrawer-105"><a href="#ChartDrawer-105"><span class="linenos">105</span></a><span class="sd">            Filenames follow the pattern:</span>
</span><span id="ChartDrawer-106"><a href="#ChartDrawer-106"><span class="linenos">106</span></a><span class="sd">            &#39;{subject.name} - {chart_type} Chart.svg&#39;.</span>
</span><span id="ChartDrawer-107"><a href="#ChartDrawer-107"><span class="linenos">107</span></a>
</span><span id="ChartDrawer-108"><a href="#ChartDrawer-108"><span class="linenos">108</span></a><span class="sd">        makeWheelOnlyTemplate(minify=False, remove_css_variables=False) -&gt; str:</span>
</span><span id="ChartDrawer-109"><a href="#ChartDrawer-109"><span class="linenos">109</span></a><span class="sd">            Render only the chart wheel (no aspect grid) as an SVG string.</span>
</span><span id="ChartDrawer-110"><a href="#ChartDrawer-110"><span class="linenos">110</span></a>
</span><span id="ChartDrawer-111"><a href="#ChartDrawer-111"><span class="linenos">111</span></a><span class="sd">        makeWheelOnlySVG(minify=False, remove_css_variables=False) -&gt; None:</span>
</span><span id="ChartDrawer-112"><a href="#ChartDrawer-112"><span class="linenos">112</span></a><span class="sd">            Generate and write the wheel-only SVG file:</span>
</span><span id="ChartDrawer-113"><a href="#ChartDrawer-113"><span class="linenos">113</span></a><span class="sd">            &#39;{subject.name} - {chart_type} Chart - Wheel Only.svg&#39;.</span>
</span><span id="ChartDrawer-114"><a href="#ChartDrawer-114"><span class="linenos">114</span></a>
</span><span id="ChartDrawer-115"><a href="#ChartDrawer-115"><span class="linenos">115</span></a><span class="sd">        makeAspectGridOnlyTemplate(minify=False, remove_css_variables=False) -&gt; str:</span>
</span><span id="ChartDrawer-116"><a href="#ChartDrawer-116"><span class="linenos">116</span></a><span class="sd">            Render only the aspect grid as an SVG string.</span>
</span><span id="ChartDrawer-117"><a href="#ChartDrawer-117"><span class="linenos">117</span></a>
</span><span id="ChartDrawer-118"><a href="#ChartDrawer-118"><span class="linenos">118</span></a><span class="sd">        makeAspectGridOnlySVG(minify=False, remove_css_variables=False) -&gt; None:</span>
</span><span id="ChartDrawer-119"><a href="#ChartDrawer-119"><span class="linenos">119</span></a><span class="sd">            Generate and write the aspect-grid-only SVG file:</span>
</span><span id="ChartDrawer-120"><a href="#ChartDrawer-120"><span class="linenos">120</span></a><span class="sd">            &#39;{subject.name} - {chart_type} Chart - Aspect Grid Only.svg&#39;.</span>
</span><span id="ChartDrawer-121"><a href="#ChartDrawer-121"><span class="linenos">121</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ChartDrawer-122"><a href="#ChartDrawer-122"><span class="linenos">122</span></a>
</span><span id="ChartDrawer-123"><a href="#ChartDrawer-123"><span class="linenos">123</span></a>    <span class="c1"># Constants</span>
</span><span id="ChartDrawer-124"><a href="#ChartDrawer-124"><span class="linenos">124</span></a>    <span class="n">_BASIC_CHART_VIEWBOX</span> <span class="o">=</span> <span class="s2">&quot;0 0 820 550.0&quot;</span>
</span><span id="ChartDrawer-125"><a href="#ChartDrawer-125"><span class="linenos">125</span></a>    <span class="n">_WIDE_CHART_VIEWBOX</span> <span class="o">=</span> <span class="s2">&quot;0 0 1200 546.0&quot;</span>
</span><span id="ChartDrawer-126"><a href="#ChartDrawer-126"><span class="linenos">126</span></a>    <span class="n">_TRANSIT_CHART_WITH_TABLE_VIWBOX</span> <span class="o">=</span> <span class="s2">&quot;0 0 960 546.0&quot;</span>
</span><span id="ChartDrawer-127"><a href="#ChartDrawer-127"><span class="linenos">127</span></a>
</span><span id="ChartDrawer-128"><a href="#ChartDrawer-128"><span class="linenos">128</span></a>    <span class="n">_DEFAULT_HEIGHT</span> <span class="o">=</span> <span class="mi">550</span>
</span><span id="ChartDrawer-129"><a href="#ChartDrawer-129"><span class="linenos">129</span></a>    <span class="n">_DEFAULT_FULL_WIDTH</span> <span class="o">=</span> <span class="mi">1200</span>
</span><span id="ChartDrawer-130"><a href="#ChartDrawer-130"><span class="linenos">130</span></a>    <span class="n">_DEFAULT_NATAL_WIDTH</span> <span class="o">=</span> <span class="mi">820</span>
</span><span id="ChartDrawer-131"><a href="#ChartDrawer-131"><span class="linenos">131</span></a>    <span class="n">_DEFAULT_FULL_WIDTH_WITH_TABLE</span> <span class="o">=</span> <span class="mi">960</span>
</span><span id="ChartDrawer-132"><a href="#ChartDrawer-132"><span class="linenos">132</span></a>    <span class="n">_PLANET_IN_ZODIAC_EXTRA_POINTS</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="ChartDrawer-133"><a href="#ChartDrawer-133"><span class="linenos">133</span></a>
</span><span id="ChartDrawer-134"><a href="#ChartDrawer-134"><span class="linenos">134</span></a>    <span class="c1"># Set at init</span>
</span><span id="ChartDrawer-135"><a href="#ChartDrawer-135"><span class="linenos">135</span></a>    <span class="n">first_obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AstrologicalSubject</span><span class="p">,</span> <span class="n">AstrologicalSubjectModel</span><span class="p">]</span>
</span><span id="ChartDrawer-136"><a href="#ChartDrawer-136"><span class="linenos">136</span></a>    <span class="n">second_obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AstrologicalSubject</span><span class="p">,</span> <span class="n">AstrologicalSubjectModel</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="ChartDrawer-137"><a href="#ChartDrawer-137"><span class="linenos">137</span></a>    <span class="n">chart_type</span><span class="p">:</span> <span class="n">ChartType</span>
</span><span id="ChartDrawer-138"><a href="#ChartDrawer-138"><span class="linenos">138</span></a>    <span class="n">new_output_directory</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="ChartDrawer-139"><a href="#ChartDrawer-139"><span class="linenos">139</span></a>    <span class="n">new_settings_file</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">KerykeionSettingsModel</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>
</span><span id="ChartDrawer-140"><a href="#ChartDrawer-140"><span class="linenos">140</span></a>    <span class="n">output_directory</span><span class="p">:</span> <span class="n">Path</span>
</span><span id="ChartDrawer-141"><a href="#ChartDrawer-141"><span class="linenos">141</span></a>    <span class="n">new_settings_file</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">KerykeionSettingsModel</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>
</span><span id="ChartDrawer-142"><a href="#ChartDrawer-142"><span class="linenos">142</span></a>    <span class="n">theme</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">KerykeionChartTheme</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="ChartDrawer-143"><a href="#ChartDrawer-143"><span class="linenos">143</span></a>    <span class="n">double_chart_aspect_grid_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="s2">&quot;table&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-144"><a href="#ChartDrawer-144"><span class="linenos">144</span></a>    <span class="n">chart_language</span><span class="p">:</span> <span class="n">KerykeionChartLanguage</span>
</span><span id="ChartDrawer-145"><a href="#ChartDrawer-145"><span class="linenos">145</span></a>    <span class="n">active_points</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Planet</span><span class="p">,</span> <span class="n">AxialCusps</span><span class="p">]]</span>
</span><span id="ChartDrawer-146"><a href="#ChartDrawer-146"><span class="linenos">146</span></a>    <span class="n">active_aspects</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ActiveAspect</span><span class="p">]</span>
</span><span id="ChartDrawer-147"><a href="#ChartDrawer-147"><span class="linenos">147</span></a>
</span><span id="ChartDrawer-148"><a href="#ChartDrawer-148"><span class="linenos">148</span></a>    <span class="c1"># Internal properties</span>
</span><span id="ChartDrawer-149"><a href="#ChartDrawer-149"><span class="linenos">149</span></a>    <span class="n">fire</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="ChartDrawer-150"><a href="#ChartDrawer-150"><span class="linenos">150</span></a>    <span class="n">earth</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="ChartDrawer-151"><a href="#ChartDrawer-151"><span class="linenos">151</span></a>    <span class="n">air</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="ChartDrawer-152"><a href="#ChartDrawer-152"><span class="linenos">152</span></a>    <span class="n">water</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="ChartDrawer-153"><a href="#ChartDrawer-153"><span class="linenos">153</span></a>    <span class="n">first_circle_radius</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="ChartDrawer-154"><a href="#ChartDrawer-154"><span class="linenos">154</span></a>    <span class="n">second_circle_radius</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="ChartDrawer-155"><a href="#ChartDrawer-155"><span class="linenos">155</span></a>    <span class="n">third_circle_radius</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="ChartDrawer-156"><a href="#ChartDrawer-156"><span class="linenos">156</span></a>    <span class="n">width</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
</span><span id="ChartDrawer-157"><a href="#ChartDrawer-157"><span class="linenos">157</span></a>    <span class="n">language_settings</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="ChartDrawer-158"><a href="#ChartDrawer-158"><span class="linenos">158</span></a>    <span class="n">chart_colors_settings</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="ChartDrawer-159"><a href="#ChartDrawer-159"><span class="linenos">159</span></a>    <span class="n">planets_settings</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="ChartDrawer-160"><a href="#ChartDrawer-160"><span class="linenos">160</span></a>    <span class="n">aspects_settings</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="ChartDrawer-161"><a href="#ChartDrawer-161"><span class="linenos">161</span></a>    <span class="n">user</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AstrologicalSubject</span><span class="p">,</span> <span class="n">AstrologicalSubjectModel</span><span class="p">,</span> <span class="n">CompositeSubjectModel</span><span class="p">]</span>
</span><span id="ChartDrawer-162"><a href="#ChartDrawer-162"><span class="linenos">162</span></a>    <span class="n">available_planets_setting</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">KerykeionSettingsCelestialPointModel</span><span class="p">]</span>
</span><span id="ChartDrawer-163"><a href="#ChartDrawer-163"><span class="linenos">163</span></a>    <span class="n">height</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="ChartDrawer-164"><a href="#ChartDrawer-164"><span class="linenos">164</span></a>    <span class="n">location</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="ChartDrawer-165"><a href="#ChartDrawer-165"><span class="linenos">165</span></a>    <span class="n">geolat</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="ChartDrawer-166"><a href="#ChartDrawer-166"><span class="linenos">166</span></a>    <span class="n">geolon</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="ChartDrawer-167"><a href="#ChartDrawer-167"><span class="linenos">167</span></a>    <span class="n">template</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="ChartDrawer-168"><a href="#ChartDrawer-168"><span class="linenos">168</span></a>
</span><span id="ChartDrawer-169"><a href="#ChartDrawer-169"><span class="linenos">169</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="ChartDrawer-170"><a href="#ChartDrawer-170"><span class="linenos">170</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ChartDrawer-171"><a href="#ChartDrawer-171"><span class="linenos">171</span></a>        <span class="n">first_obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AstrologicalSubject</span><span class="p">,</span> <span class="n">AstrologicalSubjectModel</span><span class="p">,</span> <span class="n">CompositeSubjectModel</span><span class="p">],</span>
</span><span id="ChartDrawer-172"><a href="#ChartDrawer-172"><span class="linenos">172</span></a>        <span class="n">chart_type</span><span class="p">:</span> <span class="n">ChartType</span> <span class="o">=</span> <span class="s2">&quot;Natal&quot;</span><span class="p">,</span>
</span><span id="ChartDrawer-173"><a href="#ChartDrawer-173"><span class="linenos">173</span></a>        <span class="n">second_obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AstrologicalSubject</span><span class="p">,</span> <span class="n">AstrologicalSubjectModel</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ChartDrawer-174"><a href="#ChartDrawer-174"><span class="linenos">174</span></a>        <span class="n">new_output_directory</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ChartDrawer-175"><a href="#ChartDrawer-175"><span class="linenos">175</span></a>        <span class="n">new_settings_file</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">KerykeionSettingsModel</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ChartDrawer-176"><a href="#ChartDrawer-176"><span class="linenos">176</span></a>        <span class="n">theme</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">KerykeionChartTheme</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;classic&quot;</span><span class="p">,</span>
</span><span id="ChartDrawer-177"><a href="#ChartDrawer-177"><span class="linenos">177</span></a>        <span class="n">double_chart_aspect_grid_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="s2">&quot;table&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
</span><span id="ChartDrawer-178"><a href="#ChartDrawer-178"><span class="linenos">178</span></a>        <span class="n">chart_language</span><span class="p">:</span> <span class="n">KerykeionChartLanguage</span> <span class="o">=</span> <span class="s2">&quot;EN&quot;</span><span class="p">,</span>
</span><span id="ChartDrawer-179"><a href="#ChartDrawer-179"><span class="linenos">179</span></a>        <span class="n">active_points</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Planet</span><span class="p">,</span> <span class="n">AxialCusps</span><span class="p">]]</span> <span class="o">=</span> <span class="n">DEFAULT_ACTIVE_POINTS</span><span class="p">,</span>
</span><span id="ChartDrawer-180"><a href="#ChartDrawer-180"><span class="linenos">180</span></a>    <span class="n">active_aspects</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ActiveAspect</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_ACTIVE_ASPECTS</span><span class="p">,</span>
</span><span id="ChartDrawer-181"><a href="#ChartDrawer-181"><span class="linenos">181</span></a>    <span class="p">):</span>
</span><span id="ChartDrawer-182"><a href="#ChartDrawer-182"><span class="linenos">182</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer-183"><a href="#ChartDrawer-183"><span class="linenos">183</span></a><span class="sd">        Initialize the chart generator with subject data and configuration options.</span>
</span><span id="ChartDrawer-184"><a href="#ChartDrawer-184"><span class="linenos">184</span></a>
</span><span id="ChartDrawer-185"><a href="#ChartDrawer-185"><span class="linenos">185</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer-186"><a href="#ChartDrawer-186"><span class="linenos">186</span></a><span class="sd">            first_obj (AstrologicalSubject, AstrologicalSubjectModel, or CompositeSubjectModel):</span>
</span><span id="ChartDrawer-187"><a href="#ChartDrawer-187"><span class="linenos">187</span></a><span class="sd">                Primary astrological subject instance.</span>
</span><span id="ChartDrawer-188"><a href="#ChartDrawer-188"><span class="linenos">188</span></a><span class="sd">            chart_type (ChartType, optional):</span>
</span><span id="ChartDrawer-189"><a href="#ChartDrawer-189"><span class="linenos">189</span></a><span class="sd">                Type of chart to generate (e.g., &#39;Natal&#39;, &#39;Transit&#39;).</span>
</span><span id="ChartDrawer-190"><a href="#ChartDrawer-190"><span class="linenos">190</span></a><span class="sd">            second_obj (AstrologicalSubject or AstrologicalSubjectModel, optional):</span>
</span><span id="ChartDrawer-191"><a href="#ChartDrawer-191"><span class="linenos">191</span></a><span class="sd">                Secondary subject for Transit or Synastry charts.</span>
</span><span id="ChartDrawer-192"><a href="#ChartDrawer-192"><span class="linenos">192</span></a><span class="sd">            new_output_directory (str or Path, optional):</span>
</span><span id="ChartDrawer-193"><a href="#ChartDrawer-193"><span class="linenos">193</span></a><span class="sd">                Base directory to save generated SVG files.</span>
</span><span id="ChartDrawer-194"><a href="#ChartDrawer-194"><span class="linenos">194</span></a><span class="sd">            new_settings_file (Path, dict, or KerykeionSettingsModel, optional):</span>
</span><span id="ChartDrawer-195"><a href="#ChartDrawer-195"><span class="linenos">195</span></a><span class="sd">                Custom settings source for chart colors, fonts, and aspects.</span>
</span><span id="ChartDrawer-196"><a href="#ChartDrawer-196"><span class="linenos">196</span></a><span class="sd">            theme (KerykeionChartTheme or None, optional):</span>
</span><span id="ChartDrawer-197"><a href="#ChartDrawer-197"><span class="linenos">197</span></a><span class="sd">                CSS theme to apply; None for default styling.</span>
</span><span id="ChartDrawer-198"><a href="#ChartDrawer-198"><span class="linenos">198</span></a><span class="sd">            double_chart_aspect_grid_type (Literal[&#39;list&#39;,&#39;table&#39;], optional):</span>
</span><span id="ChartDrawer-199"><a href="#ChartDrawer-199"><span class="linenos">199</span></a><span class="sd">                Layout style for double-chart aspect grids (&#39;list&#39; or &#39;table&#39;).</span>
</span><span id="ChartDrawer-200"><a href="#ChartDrawer-200"><span class="linenos">200</span></a><span class="sd">            chart_language (KerykeionChartLanguage, optional):</span>
</span><span id="ChartDrawer-201"><a href="#ChartDrawer-201"><span class="linenos">201</span></a><span class="sd">                Language code for chart labels (e.g., &#39;EN&#39;, &#39;IT&#39;).</span>
</span><span id="ChartDrawer-202"><a href="#ChartDrawer-202"><span class="linenos">202</span></a><span class="sd">            active_points (List[Planet or AxialCusps], optional):</span>
</span><span id="ChartDrawer-203"><a href="#ChartDrawer-203"><span class="linenos">203</span></a><span class="sd">                Celestial points to include in the chart visualization.</span>
</span><span id="ChartDrawer-204"><a href="#ChartDrawer-204"><span class="linenos">204</span></a><span class="sd">            active_aspects (List[ActiveAspect], optional):</span>
</span><span id="ChartDrawer-205"><a href="#ChartDrawer-205"><span class="linenos">205</span></a><span class="sd">                Aspects to calculate, each defined by name and orb.</span>
</span><span id="ChartDrawer-206"><a href="#ChartDrawer-206"><span class="linenos">206</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer-207"><a href="#ChartDrawer-207"><span class="linenos">207</span></a>        <span class="n">home_directory</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span>
</span><span id="ChartDrawer-208"><a href="#ChartDrawer-208"><span class="linenos">208</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">new_settings_file</span> <span class="o">=</span> <span class="n">new_settings_file</span>
</span><span id="ChartDrawer-209"><a href="#ChartDrawer-209"><span class="linenos">209</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">chart_language</span> <span class="o">=</span> <span class="n">chart_language</span>
</span><span id="ChartDrawer-210"><a href="#ChartDrawer-210"><span class="linenos">210</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_points</span> <span class="o">=</span> <span class="n">active_points</span>
</span><span id="ChartDrawer-211"><a href="#ChartDrawer-211"><span class="linenos">211</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_aspects</span> <span class="o">=</span> <span class="n">active_aspects</span>
</span><span id="ChartDrawer-212"><a href="#ChartDrawer-212"><span class="linenos">212</span></a>
</span><span id="ChartDrawer-213"><a href="#ChartDrawer-213"><span class="linenos">213</span></a>        <span class="k">if</span> <span class="n">new_output_directory</span><span class="p">:</span>
</span><span id="ChartDrawer-214"><a href="#ChartDrawer-214"><span class="linenos">214</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">new_output_directory</span><span class="p">)</span>
</span><span id="ChartDrawer-215"><a href="#ChartDrawer-215"><span class="linenos">215</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-216"><a href="#ChartDrawer-216"><span class="linenos">216</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">=</span> <span class="n">home_directory</span>
</span><span id="ChartDrawer-217"><a href="#ChartDrawer-217"><span class="linenos">217</span></a>
</span><span id="ChartDrawer-218"><a href="#ChartDrawer-218"><span class="linenos">218</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parse_json_settings</span><span class="p">(</span><span class="n">new_settings_file</span><span class="p">)</span>
</span><span id="ChartDrawer-219"><a href="#ChartDrawer-219"><span class="linenos">219</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">=</span> <span class="n">chart_type</span>
</span><span id="ChartDrawer-220"><a href="#ChartDrawer-220"><span class="linenos">220</span></a>
</span><span id="ChartDrawer-221"><a href="#ChartDrawer-221"><span class="linenos">221</span></a>        <span class="c1"># Kerykeion instance</span>
</span><span id="ChartDrawer-222"><a href="#ChartDrawer-222"><span class="linenos">222</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">first_obj</span>
</span><span id="ChartDrawer-223"><a href="#ChartDrawer-223"><span class="linenos">223</span></a>
</span><span id="ChartDrawer-224"><a href="#ChartDrawer-224"><span class="linenos">224</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ChartDrawer-225"><a href="#ChartDrawer-225"><span class="linenos">225</span></a>        <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">:</span>
</span><span id="ChartDrawer-226"><a href="#ChartDrawer-226"><span class="linenos">226</span></a>            <span class="k">if</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">active_points</span><span class="p">:</span>
</span><span id="ChartDrawer-227"><a href="#ChartDrawer-227"><span class="linenos">227</span></a>                <span class="k">continue</span>
</span><span id="ChartDrawer-228"><a href="#ChartDrawer-228"><span class="linenos">228</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-229"><a href="#ChartDrawer-229"><span class="linenos">229</span></a>                <span class="n">body</span><span class="p">[</span><span class="s2">&quot;is_active&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ChartDrawer-230"><a href="#ChartDrawer-230"><span class="linenos">230</span></a>
</span><span id="ChartDrawer-231"><a href="#ChartDrawer-231"><span class="linenos">231</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
</span><span id="ChartDrawer-232"><a href="#ChartDrawer-232"><span class="linenos">232</span></a>
</span><span id="ChartDrawer-233"><a href="#ChartDrawer-233"><span class="linenos">233</span></a>        <span class="c1"># Available bodies</span>
</span><span id="ChartDrawer-234"><a href="#ChartDrawer-234"><span class="linenos">234</span></a>        <span class="n">available_celestial_points_names</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ChartDrawer-235"><a href="#ChartDrawer-235"><span class="linenos">235</span></a>        <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">:</span>
</span><span id="ChartDrawer-236"><a href="#ChartDrawer-236"><span class="linenos">236</span></a>            <span class="n">available_celestial_points_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">body</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
</span><span id="ChartDrawer-237"><a href="#ChartDrawer-237"><span class="linenos">237</span></a>
</span><span id="ChartDrawer-238"><a href="#ChartDrawer-238"><span class="linenos">238</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">available_kerykeion_celestial_points</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">KerykeionPointModel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ChartDrawer-239"><a href="#ChartDrawer-239"><span class="linenos">239</span></a>        <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="n">available_celestial_points_names</span><span class="p">:</span>
</span><span id="ChartDrawer-240"><a href="#ChartDrawer-240"><span class="linenos">240</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">available_kerykeion_celestial_points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
</span><span id="ChartDrawer-241"><a href="#ChartDrawer-241"><span class="linenos">241</span></a>
</span><span id="ChartDrawer-242"><a href="#ChartDrawer-242"><span class="linenos">242</span></a>        <span class="c1"># Makes the sign number list.</span>
</span><span id="ChartDrawer-243"><a href="#ChartDrawer-243"><span class="linenos">243</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Natal&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-244"><a href="#ChartDrawer-244"><span class="linenos">244</span></a>            <span class="n">natal_aspects_instance</span> <span class="o">=</span> <span class="n">NatalAspects</span><span class="p">(</span>
</span><span id="ChartDrawer-245"><a href="#ChartDrawer-245"><span class="linenos">245</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">new_settings_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_settings_file</span><span class="p">,</span>
</span><span id="ChartDrawer-246"><a href="#ChartDrawer-246"><span class="linenos">246</span></a>                <span class="n">active_points</span><span class="o">=</span><span class="n">active_points</span><span class="p">,</span>
</span><span id="ChartDrawer-247"><a href="#ChartDrawer-247"><span class="linenos">247</span></a>                <span class="n">active_aspects</span><span class="o">=</span><span class="n">active_aspects</span><span class="p">,</span>
</span><span id="ChartDrawer-248"><a href="#ChartDrawer-248"><span class="linenos">248</span></a>            <span class="p">)</span>
</span><span id="ChartDrawer-249"><a href="#ChartDrawer-249"><span class="linenos">249</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span> <span class="o">=</span> <span class="n">natal_aspects_instance</span><span class="o">.</span><span class="n">relevant_aspects</span>
</span><span id="ChartDrawer-250"><a href="#ChartDrawer-250"><span class="linenos">250</span></a>
</span><span id="ChartDrawer-251"><a href="#ChartDrawer-251"><span class="linenos">251</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-252"><a href="#ChartDrawer-252"><span class="linenos">252</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">second_obj</span><span class="p">:</span>
</span><span id="ChartDrawer-253"><a href="#ChartDrawer-253"><span class="linenos">253</span></a>                <span class="k">raise</span> <span class="n">KerykeionException</span><span class="p">(</span><span class="s2">&quot;Second object is required for Transit or Synastry charts.&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer-254"><a href="#ChartDrawer-254"><span class="linenos">254</span></a>
</span><span id="ChartDrawer-255"><a href="#ChartDrawer-255"><span class="linenos">255</span></a>            <span class="c1"># Kerykeion instance</span>
</span><span id="ChartDrawer-256"><a href="#ChartDrawer-256"><span class="linenos">256</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span> <span class="o">=</span> <span class="n">second_obj</span>
</span><span id="ChartDrawer-257"><a href="#ChartDrawer-257"><span class="linenos">257</span></a>
</span><span id="ChartDrawer-258"><a href="#ChartDrawer-258"><span class="linenos">258</span></a>            <span class="c1"># Aspects</span>
</span><span id="ChartDrawer-259"><a href="#ChartDrawer-259"><span class="linenos">259</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-260"><a href="#ChartDrawer-260"><span class="linenos">260</span></a>                <span class="n">synastry_aspects_instance</span> <span class="o">=</span> <span class="n">SynastryAspects</span><span class="p">(</span>
</span><span id="ChartDrawer-261"><a href="#ChartDrawer-261"><span class="linenos">261</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="p">,</span>
</span><span id="ChartDrawer-262"><a href="#ChartDrawer-262"><span class="linenos">262</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
</span><span id="ChartDrawer-263"><a href="#ChartDrawer-263"><span class="linenos">263</span></a>                    <span class="n">new_settings_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_settings_file</span><span class="p">,</span>
</span><span id="ChartDrawer-264"><a href="#ChartDrawer-264"><span class="linenos">264</span></a>                    <span class="n">active_points</span><span class="o">=</span><span class="n">active_points</span><span class="p">,</span>
</span><span id="ChartDrawer-265"><a href="#ChartDrawer-265"><span class="linenos">265</span></a>                    <span class="n">active_aspects</span><span class="o">=</span><span class="n">active_aspects</span><span class="p">,</span>
</span><span id="ChartDrawer-266"><a href="#ChartDrawer-266"><span class="linenos">266</span></a>                <span class="p">)</span>
</span><span id="ChartDrawer-267"><a href="#ChartDrawer-267"><span class="linenos">267</span></a>
</span><span id="ChartDrawer-268"><a href="#ChartDrawer-268"><span class="linenos">268</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-269"><a href="#ChartDrawer-269"><span class="linenos">269</span></a>                <span class="n">synastry_aspects_instance</span> <span class="o">=</span> <span class="n">SynastryAspects</span><span class="p">(</span>
</span><span id="ChartDrawer-270"><a href="#ChartDrawer-270"><span class="linenos">270</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
</span><span id="ChartDrawer-271"><a href="#ChartDrawer-271"><span class="linenos">271</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="p">,</span>
</span><span id="ChartDrawer-272"><a href="#ChartDrawer-272"><span class="linenos">272</span></a>                    <span class="n">new_settings_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_settings_file</span><span class="p">,</span>
</span><span id="ChartDrawer-273"><a href="#ChartDrawer-273"><span class="linenos">273</span></a>                    <span class="n">active_points</span><span class="o">=</span><span class="n">active_points</span><span class="p">,</span>
</span><span id="ChartDrawer-274"><a href="#ChartDrawer-274"><span class="linenos">274</span></a>                    <span class="n">active_aspects</span><span class="o">=</span><span class="n">active_aspects</span><span class="p">,</span>
</span><span id="ChartDrawer-275"><a href="#ChartDrawer-275"><span class="linenos">275</span></a>                <span class="p">)</span>
</span><span id="ChartDrawer-276"><a href="#ChartDrawer-276"><span class="linenos">276</span></a>
</span><span id="ChartDrawer-277"><a href="#ChartDrawer-277"><span class="linenos">277</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span> <span class="o">=</span> <span class="n">synastry_aspects_instance</span><span class="o">.</span><span class="n">relevant_aspects</span>
</span><span id="ChartDrawer-278"><a href="#ChartDrawer-278"><span class="linenos">278</span></a>
</span><span id="ChartDrawer-279"><a href="#ChartDrawer-279"><span class="linenos">279</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">t_available_kerykeion_celestial_points</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ChartDrawer-280"><a href="#ChartDrawer-280"><span class="linenos">280</span></a>            <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="n">available_celestial_points_names</span><span class="p">:</span>
</span><span id="ChartDrawer-281"><a href="#ChartDrawer-281"><span class="linenos">281</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">t_available_kerykeion_celestial_points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
</span><span id="ChartDrawer-282"><a href="#ChartDrawer-282"><span class="linenos">282</span></a>
</span><span id="ChartDrawer-283"><a href="#ChartDrawer-283"><span class="linenos">283</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-284"><a href="#ChartDrawer-284"><span class="linenos">284</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">first_obj</span><span class="p">,</span> <span class="n">CompositeSubjectModel</span><span class="p">):</span>
</span><span id="ChartDrawer-285"><a href="#ChartDrawer-285"><span class="linenos">285</span></a>                <span class="k">raise</span> <span class="n">KerykeionException</span><span class="p">(</span><span class="s2">&quot;First object must be a CompositeSubjectModel instance.&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer-286"><a href="#ChartDrawer-286"><span class="linenos">286</span></a>
</span><span id="ChartDrawer-287"><a href="#ChartDrawer-287"><span class="linenos">287</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span> <span class="o">=</span> <span class="n">NatalAspects</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">new_settings_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_settings_file</span><span class="p">,</span> <span class="n">active_points</span><span class="o">=</span><span class="n">active_points</span><span class="p">)</span><span class="o">.</span><span class="n">relevant_aspects</span>
</span><span id="ChartDrawer-288"><a href="#ChartDrawer-288"><span class="linenos">288</span></a>
</span><span id="ChartDrawer-289"><a href="#ChartDrawer-289"><span class="linenos">289</span></a>        <span class="c1"># Double chart aspect grid type</span>
</span><span id="ChartDrawer-290"><a href="#ChartDrawer-290"><span class="linenos">290</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">double_chart_aspect_grid_type</span> <span class="o">=</span> <span class="n">double_chart_aspect_grid_type</span>
</span><span id="ChartDrawer-291"><a href="#ChartDrawer-291"><span class="linenos">291</span></a>
</span><span id="ChartDrawer-292"><a href="#ChartDrawer-292"><span class="linenos">292</span></a>        <span class="c1"># screen size</span>
</span><span id="ChartDrawer-293"><a href="#ChartDrawer-293"><span class="linenos">293</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_HEIGHT</span>
</span><span id="ChartDrawer-294"><a href="#ChartDrawer-294"><span class="linenos">294</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Synastry&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-295"><a href="#ChartDrawer-295"><span class="linenos">295</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_FULL_WIDTH</span>
</span><span id="ChartDrawer-296"><a href="#ChartDrawer-296"><span class="linenos">296</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">double_chart_aspect_grid_type</span> <span class="o">==</span> <span class="s2">&quot;table&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-297"><a href="#ChartDrawer-297"><span class="linenos">297</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_FULL_WIDTH_WITH_TABLE</span>
</span><span id="ChartDrawer-298"><a href="#ChartDrawer-298"><span class="linenos">298</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-299"><a href="#ChartDrawer-299"><span class="linenos">299</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_NATAL_WIDTH</span>
</span><span id="ChartDrawer-300"><a href="#ChartDrawer-300"><span class="linenos">300</span></a>
</span><span id="ChartDrawer-301"><a href="#ChartDrawer-301"><span class="linenos">301</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Natal&quot;</span><span class="p">,</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">]:</span>
</span><span id="ChartDrawer-302"><a href="#ChartDrawer-302"><span class="linenos">302</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">city</span>
</span><span id="ChartDrawer-303"><a href="#ChartDrawer-303"><span class="linenos">303</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">lat</span>
</span><span id="ChartDrawer-304"><a href="#ChartDrawer-304"><span class="linenos">304</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolon</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">lng</span>
</span><span id="ChartDrawer-305"><a href="#ChartDrawer-305"><span class="linenos">305</span></a>
</span><span id="ChartDrawer-306"><a href="#ChartDrawer-306"><span class="linenos">306</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-307"><a href="#ChartDrawer-307"><span class="linenos">307</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ChartDrawer-308"><a href="#ChartDrawer-308"><span class="linenos">308</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolat</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">lat</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="ChartDrawer-309"><a href="#ChartDrawer-309"><span class="linenos">309</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolon</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">lng</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">lng</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="ChartDrawer-310"><a href="#ChartDrawer-310"><span class="linenos">310</span></a>
</span><span id="ChartDrawer-311"><a href="#ChartDrawer-311"><span class="linenos">311</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Transit&quot;</span><span class="p">]:</span>
</span><span id="ChartDrawer-312"><a href="#ChartDrawer-312"><span class="linenos">312</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">city</span>
</span><span id="ChartDrawer-313"><a href="#ChartDrawer-313"><span class="linenos">313</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">lat</span>
</span><span id="ChartDrawer-314"><a href="#ChartDrawer-314"><span class="linenos">314</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">lng</span>
</span><span id="ChartDrawer-315"><a href="#ChartDrawer-315"><span class="linenos">315</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">t_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;transit_name&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-316"><a href="#ChartDrawer-316"><span class="linenos">316</span></a>
</span><span id="ChartDrawer-317"><a href="#ChartDrawer-317"><span class="linenos">317</span></a>        <span class="c1"># Default radius for the chart</span>
</span><span id="ChartDrawer-318"><a href="#ChartDrawer-318"><span class="linenos">318</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span> <span class="o">=</span> <span class="mi">240</span>
</span><span id="ChartDrawer-319"><a href="#ChartDrawer-319"><span class="linenos">319</span></a>
</span><span id="ChartDrawer-320"><a href="#ChartDrawer-320"><span class="linenos">320</span></a>        <span class="c1"># Set circle radii based on chart type</span>
</span><span id="ChartDrawer-321"><a href="#ChartDrawer-321"><span class="linenos">321</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-322"><a href="#ChartDrawer-322"><span class="linenos">322</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">first_circle_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">second_circle_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span> <span class="o">=</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">92</span><span class="p">,</span> <span class="mi">112</span>
</span><span id="ChartDrawer-323"><a href="#ChartDrawer-323"><span class="linenos">323</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-324"><a href="#ChartDrawer-324"><span class="linenos">324</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">first_circle_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">second_circle_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">120</span>
</span><span id="ChartDrawer-325"><a href="#ChartDrawer-325"><span class="linenos">325</span></a>
</span><span id="ChartDrawer-326"><a href="#ChartDrawer-326"><span class="linenos">326</span></a>        <span class="c1"># Initialize element points</span>
</span><span id="ChartDrawer-327"><a href="#ChartDrawer-327"><span class="linenos">327</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fire</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="ChartDrawer-328"><a href="#ChartDrawer-328"><span class="linenos">328</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">earth</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="ChartDrawer-329"><a href="#ChartDrawer-329"><span class="linenos">329</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">air</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="ChartDrawer-330"><a href="#ChartDrawer-330"><span class="linenos">330</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">water</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="ChartDrawer-331"><a href="#ChartDrawer-331"><span class="linenos">331</span></a>
</span><span id="ChartDrawer-332"><a href="#ChartDrawer-332"><span class="linenos">332</span></a>        <span class="c1"># Calculate element points from planets</span>
</span><span id="ChartDrawer-333"><a href="#ChartDrawer-333"><span class="linenos">333</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_elements_points_from_planets</span><span class="p">()</span>
</span><span id="ChartDrawer-334"><a href="#ChartDrawer-334"><span class="linenos">334</span></a>
</span><span id="ChartDrawer-335"><a href="#ChartDrawer-335"><span class="linenos">335</span></a>        <span class="c1"># Set up theme</span>
</span><span id="ChartDrawer-336"><a href="#ChartDrawer-336"><span class="linenos">336</span></a>        <span class="k">if</span> <span class="n">theme</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">get_args</span><span class="p">(</span><span class="n">KerykeionChartTheme</span><span class="p">)</span> <span class="ow">and</span> <span class="n">theme</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ChartDrawer-337"><a href="#ChartDrawer-337"><span class="linenos">337</span></a>            <span class="k">raise</span> <span class="n">KerykeionException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Theme </span><span class="si">{</span><span class="n">theme</span><span class="si">}</span><span class="s2"> is not available. Set None for default theme.&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer-338"><a href="#ChartDrawer-338"><span class="linenos">338</span></a>
</span><span id="ChartDrawer-339"><a href="#ChartDrawer-339"><span class="linenos">339</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_up_theme</span><span class="p">(</span><span class="n">theme</span><span class="p">)</span>
</span><span id="ChartDrawer-340"><a href="#ChartDrawer-340"><span class="linenos">340</span></a>
</span><span id="ChartDrawer-341"><a href="#ChartDrawer-341"><span class="linenos">341</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_up_theme</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theme</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">KerykeionChartTheme</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ChartDrawer-342"><a href="#ChartDrawer-342"><span class="linenos">342</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer-343"><a href="#ChartDrawer-343"><span class="linenos">343</span></a><span class="sd">        Load and apply a CSS theme for the chart visualization.</span>
</span><span id="ChartDrawer-344"><a href="#ChartDrawer-344"><span class="linenos">344</span></a>
</span><span id="ChartDrawer-345"><a href="#ChartDrawer-345"><span class="linenos">345</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer-346"><a href="#ChartDrawer-346"><span class="linenos">346</span></a><span class="sd">            theme (KerykeionChartTheme or None): Name of the theme to apply. If None, no CSS is applied.</span>
</span><span id="ChartDrawer-347"><a href="#ChartDrawer-347"><span class="linenos">347</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer-348"><a href="#ChartDrawer-348"><span class="linenos">348</span></a>        <span class="k">if</span> <span class="n">theme</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ChartDrawer-349"><a href="#ChartDrawer-349"><span class="linenos">349</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">color_style_tag</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ChartDrawer-350"><a href="#ChartDrawer-350"><span class="linenos">350</span></a>            <span class="k">return</span>
</span><span id="ChartDrawer-351"><a href="#ChartDrawer-351"><span class="linenos">351</span></a>
</span><span id="ChartDrawer-352"><a href="#ChartDrawer-352"><span class="linenos">352</span></a>        <span class="n">theme_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;themes&quot;</span>
</span><span id="ChartDrawer-353"><a href="#ChartDrawer-353"><span class="linenos">353</span></a>
</span><span id="ChartDrawer-354"><a href="#ChartDrawer-354"><span class="linenos">354</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">theme_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">theme</span><span class="si">}</span><span class="s2">.css&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="ChartDrawer-355"><a href="#ChartDrawer-355"><span class="linenos">355</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">color_style_tag</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="ChartDrawer-356"><a href="#ChartDrawer-356"><span class="linenos">356</span></a>
</span><span id="ChartDrawer-357"><a href="#ChartDrawer-357"><span class="linenos">357</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_output_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dir_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ChartDrawer-358"><a href="#ChartDrawer-358"><span class="linenos">358</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer-359"><a href="#ChartDrawer-359"><span class="linenos">359</span></a><span class="sd">        Set the directory where generated SVG files will be saved.</span>
</span><span id="ChartDrawer-360"><a href="#ChartDrawer-360"><span class="linenos">360</span></a>
</span><span id="ChartDrawer-361"><a href="#ChartDrawer-361"><span class="linenos">361</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer-362"><a href="#ChartDrawer-362"><span class="linenos">362</span></a><span class="sd">            dir_path (Path): Target directory for SVG output.</span>
</span><span id="ChartDrawer-363"><a href="#ChartDrawer-363"><span class="linenos">363</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer-364"><a href="#ChartDrawer-364"><span class="linenos">364</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">=</span> <span class="n">dir_path</span>
</span><span id="ChartDrawer-365"><a href="#ChartDrawer-365"><span class="linenos">365</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Output direcotry set to: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer-366"><a href="#ChartDrawer-366"><span class="linenos">366</span></a>
</span><span id="ChartDrawer-367"><a href="#ChartDrawer-367"><span class="linenos">367</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_json_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings_file_or_dict</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">KerykeionSettingsModel</span><span class="p">,</span> <span class="kc">None</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ChartDrawer-368"><a href="#ChartDrawer-368"><span class="linenos">368</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer-369"><a href="#ChartDrawer-369"><span class="linenos">369</span></a><span class="sd">        Load and parse chart configuration settings.</span>
</span><span id="ChartDrawer-370"><a href="#ChartDrawer-370"><span class="linenos">370</span></a>
</span><span id="ChartDrawer-371"><a href="#ChartDrawer-371"><span class="linenos">371</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer-372"><a href="#ChartDrawer-372"><span class="linenos">372</span></a><span class="sd">            settings_file_or_dict (Path, dict, or KerykeionSettingsModel):</span>
</span><span id="ChartDrawer-373"><a href="#ChartDrawer-373"><span class="linenos">373</span></a><span class="sd">                Source for custom chart settings.</span>
</span><span id="ChartDrawer-374"><a href="#ChartDrawer-374"><span class="linenos">374</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer-375"><a href="#ChartDrawer-375"><span class="linenos">375</span></a>        <span class="n">settings</span> <span class="o">=</span> <span class="n">get_settings</span><span class="p">(</span><span class="n">settings_file_or_dict</span><span class="p">)</span>
</span><span id="ChartDrawer-376"><a href="#ChartDrawer-376"><span class="linenos">376</span></a>
</span><span id="ChartDrawer-377"><a href="#ChartDrawer-377"><span class="linenos">377</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;language_settings&quot;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_language</span><span class="p">]</span>
</span><span id="ChartDrawer-378"><a href="#ChartDrawer-378"><span class="linenos">378</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;chart_colors&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-379"><a href="#ChartDrawer-379"><span class="linenos">379</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;celestial_points&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-380"><a href="#ChartDrawer-380"><span class="linenos">380</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">aspects_settings</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;aspects&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-381"><a href="#ChartDrawer-381"><span class="linenos">381</span></a>
</span><span id="ChartDrawer-382"><a href="#ChartDrawer-382"><span class="linenos">382</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_draw_zodiac_circle_slices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
</span><span id="ChartDrawer-383"><a href="#ChartDrawer-383"><span class="linenos">383</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer-384"><a href="#ChartDrawer-384"><span class="linenos">384</span></a><span class="sd">        Draw zodiac circle slices for each sign.</span>
</span><span id="ChartDrawer-385"><a href="#ChartDrawer-385"><span class="linenos">385</span></a>
</span><span id="ChartDrawer-386"><a href="#ChartDrawer-386"><span class="linenos">386</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer-387"><a href="#ChartDrawer-387"><span class="linenos">387</span></a><span class="sd">            r (float): Outer radius of the zodiac ring.</span>
</span><span id="ChartDrawer-388"><a href="#ChartDrawer-388"><span class="linenos">388</span></a>
</span><span id="ChartDrawer-389"><a href="#ChartDrawer-389"><span class="linenos">389</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer-390"><a href="#ChartDrawer-390"><span class="linenos">390</span></a><span class="sd">            str: Concatenated SVG elements for zodiac slices.</span>
</span><span id="ChartDrawer-391"><a href="#ChartDrawer-391"><span class="linenos">391</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer-392"><a href="#ChartDrawer-392"><span class="linenos">392</span></a>        <span class="n">sings</span> <span class="o">=</span> <span class="n">get_args</span><span class="p">(</span><span class="n">Sign</span><span class="p">)</span>
</span><span id="ChartDrawer-393"><a href="#ChartDrawer-393"><span class="linenos">393</span></a>        <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ChartDrawer-394"><a href="#ChartDrawer-394"><span class="linenos">394</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sing</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sings</span><span class="p">):</span>
</span><span id="ChartDrawer-395"><a href="#ChartDrawer-395"><span class="linenos">395</span></a>            <span class="n">output</span> <span class="o">+=</span> <span class="n">draw_zodiac_slice</span><span class="p">(</span>
</span><span id="ChartDrawer-396"><a href="#ChartDrawer-396"><span class="linenos">396</span></a>                <span class="n">c1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">first_circle_radius</span><span class="p">,</span>
</span><span id="ChartDrawer-397"><a href="#ChartDrawer-397"><span class="linenos">397</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="ChartDrawer-398"><a href="#ChartDrawer-398"><span class="linenos">398</span></a>                <span class="n">seventh_house_degree_ut</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">seventh_house</span><span class="o">.</span><span class="n">abs_pos</span><span class="p">,</span>
</span><span id="ChartDrawer-399"><a href="#ChartDrawer-399"><span class="linenos">399</span></a>                <span class="n">num</span><span class="o">=</span><span class="n">i</span><span class="p">,</span>
</span><span id="ChartDrawer-400"><a href="#ChartDrawer-400"><span class="linenos">400</span></a>                <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">,</span>
</span><span id="ChartDrawer-401"><a href="#ChartDrawer-401"><span class="linenos">401</span></a>                <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;fill:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;zodiac_bg_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">; fill-opacity: 0.5;&#39;</span><span class="p">,</span>
</span><span id="ChartDrawer-402"><a href="#ChartDrawer-402"><span class="linenos">402</span></a>                <span class="nb">type</span><span class="o">=</span><span class="n">sing</span><span class="p">,</span>
</span><span id="ChartDrawer-403"><a href="#ChartDrawer-403"><span class="linenos">403</span></a>            <span class="p">)</span>
</span><span id="ChartDrawer-404"><a href="#ChartDrawer-404"><span class="linenos">404</span></a>
</span><span id="ChartDrawer-405"><a href="#ChartDrawer-405"><span class="linenos">405</span></a>        <span class="k">return</span> <span class="n">output</span>
</span><span id="ChartDrawer-406"><a href="#ChartDrawer-406"><span class="linenos">406</span></a>
</span><span id="ChartDrawer-407"><a href="#ChartDrawer-407"><span class="linenos">407</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_calculate_elements_points_from_planets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ChartDrawer-408"><a href="#ChartDrawer-408"><span class="linenos">408</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer-409"><a href="#ChartDrawer-409"><span class="linenos">409</span></a><span class="sd">        Compute elemental point totals based on active planetary positions.</span>
</span><span id="ChartDrawer-410"><a href="#ChartDrawer-410"><span class="linenos">410</span></a>
</span><span id="ChartDrawer-411"><a href="#ChartDrawer-411"><span class="linenos">411</span></a><span class="sd">        Iterates over each active planet to determine its zodiac element and adds extra points</span>
</span><span id="ChartDrawer-412"><a href="#ChartDrawer-412"><span class="linenos">412</span></a><span class="sd">        if the planet is in a related sign. Updates self.fire, self.earth, self.air, and self.water.</span>
</span><span id="ChartDrawer-413"><a href="#ChartDrawer-413"><span class="linenos">413</span></a>
</span><span id="ChartDrawer-414"><a href="#ChartDrawer-414"><span class="linenos">414</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer-415"><a href="#ChartDrawer-415"><span class="linenos">415</span></a><span class="sd">            None</span>
</span><span id="ChartDrawer-416"><a href="#ChartDrawer-416"><span class="linenos">416</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer-417"><a href="#ChartDrawer-417"><span class="linenos">417</span></a>
</span><span id="ChartDrawer-418"><a href="#ChartDrawer-418"><span class="linenos">418</span></a>        <span class="n">ZODIAC</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="ChartDrawer-419"><a href="#ChartDrawer-419"><span class="linenos">419</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Ari&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;fire&quot;</span><span class="p">},</span>
</span><span id="ChartDrawer-420"><a href="#ChartDrawer-420"><span class="linenos">420</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Tau&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;earth&quot;</span><span class="p">},</span>
</span><span id="ChartDrawer-421"><a href="#ChartDrawer-421"><span class="linenos">421</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Gem&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;air&quot;</span><span class="p">},</span>
</span><span id="ChartDrawer-422"><a href="#ChartDrawer-422"><span class="linenos">422</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Can&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;water&quot;</span><span class="p">},</span>
</span><span id="ChartDrawer-423"><a href="#ChartDrawer-423"><span class="linenos">423</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Leo&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;fire&quot;</span><span class="p">},</span>
</span><span id="ChartDrawer-424"><a href="#ChartDrawer-424"><span class="linenos">424</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Vir&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;earth&quot;</span><span class="p">},</span>
</span><span id="ChartDrawer-425"><a href="#ChartDrawer-425"><span class="linenos">425</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Lib&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;air&quot;</span><span class="p">},</span>
</span><span id="ChartDrawer-426"><a href="#ChartDrawer-426"><span class="linenos">426</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Sco&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;water&quot;</span><span class="p">},</span>
</span><span id="ChartDrawer-427"><a href="#ChartDrawer-427"><span class="linenos">427</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Sag&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;fire&quot;</span><span class="p">},</span>
</span><span id="ChartDrawer-428"><a href="#ChartDrawer-428"><span class="linenos">428</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Cap&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;earth&quot;</span><span class="p">},</span>
</span><span id="ChartDrawer-429"><a href="#ChartDrawer-429"><span class="linenos">429</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Aqu&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;air&quot;</span><span class="p">},</span>
</span><span id="ChartDrawer-430"><a href="#ChartDrawer-430"><span class="linenos">430</span></a>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Pis&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;water&quot;</span><span class="p">},</span>
</span><span id="ChartDrawer-431"><a href="#ChartDrawer-431"><span class="linenos">431</span></a>        <span class="p">)</span>
</span><span id="ChartDrawer-432"><a href="#ChartDrawer-432"><span class="linenos">432</span></a>
</span><span id="ChartDrawer-433"><a href="#ChartDrawer-433"><span class="linenos">433</span></a>        <span class="c1"># Available bodies</span>
</span><span id="ChartDrawer-434"><a href="#ChartDrawer-434"><span class="linenos">434</span></a>        <span class="n">available_celestial_points_names</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ChartDrawer-435"><a href="#ChartDrawer-435"><span class="linenos">435</span></a>        <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">:</span>
</span><span id="ChartDrawer-436"><a href="#ChartDrawer-436"><span class="linenos">436</span></a>            <span class="n">available_celestial_points_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">body</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
</span><span id="ChartDrawer-437"><a href="#ChartDrawer-437"><span class="linenos">437</span></a>
</span><span id="ChartDrawer-438"><a href="#ChartDrawer-438"><span class="linenos">438</span></a>        <span class="c1"># Make list of the points sign</span>
</span><span id="ChartDrawer-439"><a href="#ChartDrawer-439"><span class="linenos">439</span></a>        <span class="n">points_sign</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ChartDrawer-440"><a href="#ChartDrawer-440"><span class="linenos">440</span></a>        <span class="k">for</span> <span class="n">planet</span> <span class="ow">in</span> <span class="n">available_celestial_points_names</span><span class="p">:</span>
</span><span id="ChartDrawer-441"><a href="#ChartDrawer-441"><span class="linenos">441</span></a>            <span class="n">points_sign</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">planet</span><span class="p">)</span><span class="o">.</span><span class="n">sign_num</span><span class="p">)</span>
</span><span id="ChartDrawer-442"><a href="#ChartDrawer-442"><span class="linenos">442</span></a>
</span><span id="ChartDrawer-443"><a href="#ChartDrawer-443"><span class="linenos">443</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">)):</span>
</span><span id="ChartDrawer-444"><a href="#ChartDrawer-444"><span class="linenos">444</span></a>            <span class="c1"># element: get extra points if planet is in own zodiac sign.</span>
</span><span id="ChartDrawer-445"><a href="#ChartDrawer-445"><span class="linenos">445</span></a>            <span class="n">related_zodiac_signs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;related_zodiac_signs&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-446"><a href="#ChartDrawer-446"><span class="linenos">446</span></a>            <span class="n">cz</span> <span class="o">=</span> <span class="n">points_sign</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ChartDrawer-447"><a href="#ChartDrawer-447"><span class="linenos">447</span></a>            <span class="n">extra_points</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ChartDrawer-448"><a href="#ChartDrawer-448"><span class="linenos">448</span></a>            <span class="k">if</span> <span class="n">related_zodiac_signs</span> <span class="o">!=</span> <span class="p">[]:</span>
</span><span id="ChartDrawer-449"><a href="#ChartDrawer-449"><span class="linenos">449</span></a>                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">related_zodiac_signs</span><span class="p">)):</span>
</span><span id="ChartDrawer-450"><a href="#ChartDrawer-450"><span class="linenos">450</span></a>                    <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">related_zodiac_signs</span><span class="p">[</span><span class="n">e</span><span class="p">])</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="n">cz</span><span class="p">):</span>
</span><span id="ChartDrawer-451"><a href="#ChartDrawer-451"><span class="linenos">451</span></a>                        <span class="n">extra_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_PLANET_IN_ZODIAC_EXTRA_POINTS</span>
</span><span id="ChartDrawer-452"><a href="#ChartDrawer-452"><span class="linenos">452</span></a>
</span><span id="ChartDrawer-453"><a href="#ChartDrawer-453"><span class="linenos">453</span></a>            <span class="n">ele</span> <span class="o">=</span> <span class="n">ZODIAC</span><span class="p">[</span><span class="n">points_sign</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s2">&quot;element&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-454"><a href="#ChartDrawer-454"><span class="linenos">454</span></a>            <span class="k">if</span> <span class="n">ele</span> <span class="o">==</span> <span class="s2">&quot;fire&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-455"><a href="#ChartDrawer-455"><span class="linenos">455</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">fire</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fire</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;element_points&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">extra_points</span>
</span><span id="ChartDrawer-456"><a href="#ChartDrawer-456"><span class="linenos">456</span></a>
</span><span id="ChartDrawer-457"><a href="#ChartDrawer-457"><span class="linenos">457</span></a>            <span class="k">elif</span> <span class="n">ele</span> <span class="o">==</span> <span class="s2">&quot;earth&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-458"><a href="#ChartDrawer-458"><span class="linenos">458</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">earth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">earth</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;element_points&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">extra_points</span>
</span><span id="ChartDrawer-459"><a href="#ChartDrawer-459"><span class="linenos">459</span></a>
</span><span id="ChartDrawer-460"><a href="#ChartDrawer-460"><span class="linenos">460</span></a>            <span class="k">elif</span> <span class="n">ele</span> <span class="o">==</span> <span class="s2">&quot;air&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-461"><a href="#ChartDrawer-461"><span class="linenos">461</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">air</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">air</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;element_points&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">extra_points</span>
</span><span id="ChartDrawer-462"><a href="#ChartDrawer-462"><span class="linenos">462</span></a>
</span><span id="ChartDrawer-463"><a href="#ChartDrawer-463"><span class="linenos">463</span></a>            <span class="k">elif</span> <span class="n">ele</span> <span class="o">==</span> <span class="s2">&quot;water&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-464"><a href="#ChartDrawer-464"><span class="linenos">464</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">water</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">water</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;element_points&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">extra_points</span>
</span><span id="ChartDrawer-465"><a href="#ChartDrawer-465"><span class="linenos">465</span></a>
</span><span id="ChartDrawer-466"><a href="#ChartDrawer-466"><span class="linenos">466</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_draw_all_aspects_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">ar</span><span class="p">):</span>
</span><span id="ChartDrawer-467"><a href="#ChartDrawer-467"><span class="linenos">467</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer-468"><a href="#ChartDrawer-468"><span class="linenos">468</span></a><span class="sd">        Render SVG lines for all aspects in the chart.</span>
</span><span id="ChartDrawer-469"><a href="#ChartDrawer-469"><span class="linenos">469</span></a>
</span><span id="ChartDrawer-470"><a href="#ChartDrawer-470"><span class="linenos">470</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer-471"><a href="#ChartDrawer-471"><span class="linenos">471</span></a><span class="sd">            r (float): Radius at which aspect lines originate.</span>
</span><span id="ChartDrawer-472"><a href="#ChartDrawer-472"><span class="linenos">472</span></a><span class="sd">            ar (float): Radius at which aspect lines terminate.</span>
</span><span id="ChartDrawer-473"><a href="#ChartDrawer-473"><span class="linenos">473</span></a>
</span><span id="ChartDrawer-474"><a href="#ChartDrawer-474"><span class="linenos">474</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer-475"><a href="#ChartDrawer-475"><span class="linenos">475</span></a><span class="sd">            str: SVG markup for all aspect lines.</span>
</span><span id="ChartDrawer-476"><a href="#ChartDrawer-476"><span class="linenos">476</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer-477"><a href="#ChartDrawer-477"><span class="linenos">477</span></a>        <span class="n">out</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ChartDrawer-478"><a href="#ChartDrawer-478"><span class="linenos">478</span></a>        <span class="k">for</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span><span class="p">:</span>
</span><span id="ChartDrawer-479"><a href="#ChartDrawer-479"><span class="linenos">479</span></a>            <span class="n">aspect_name</span> <span class="o">=</span> <span class="n">aspect</span><span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-480"><a href="#ChartDrawer-480"><span class="linenos">480</span></a>            <span class="n">aspect_color</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_settings</span> <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">aspect_name</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="ChartDrawer-481"><a href="#ChartDrawer-481"><span class="linenos">481</span></a>            <span class="k">if</span> <span class="n">aspect_color</span><span class="p">:</span>
</span><span id="ChartDrawer-482"><a href="#ChartDrawer-482"><span class="linenos">482</span></a>                <span class="n">out</span> <span class="o">+=</span> <span class="n">draw_aspect_line</span><span class="p">(</span>
</span><span id="ChartDrawer-483"><a href="#ChartDrawer-483"><span class="linenos">483</span></a>                    <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">,</span>
</span><span id="ChartDrawer-484"><a href="#ChartDrawer-484"><span class="linenos">484</span></a>                    <span class="n">ar</span><span class="o">=</span><span class="n">ar</span><span class="p">,</span>
</span><span id="ChartDrawer-485"><a href="#ChartDrawer-485"><span class="linenos">485</span></a>                    <span class="n">aspect</span><span class="o">=</span><span class="n">aspect</span><span class="p">,</span>
</span><span id="ChartDrawer-486"><a href="#ChartDrawer-486"><span class="linenos">486</span></a>                    <span class="n">color</span><span class="o">=</span><span class="n">aspect_color</span><span class="p">,</span>
</span><span id="ChartDrawer-487"><a href="#ChartDrawer-487"><span class="linenos">487</span></a>                    <span class="n">seventh_house_degree_ut</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">seventh_house</span><span class="o">.</span><span class="n">abs_pos</span>
</span><span id="ChartDrawer-488"><a href="#ChartDrawer-488"><span class="linenos">488</span></a>                <span class="p">)</span>
</span><span id="ChartDrawer-489"><a href="#ChartDrawer-489"><span class="linenos">489</span></a>        <span class="k">return</span> <span class="n">out</span>
</span><span id="ChartDrawer-490"><a href="#ChartDrawer-490"><span class="linenos">490</span></a>
</span><span id="ChartDrawer-491"><a href="#ChartDrawer-491"><span class="linenos">491</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_draw_all_transit_aspects_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">ar</span><span class="p">):</span>
</span><span id="ChartDrawer-492"><a href="#ChartDrawer-492"><span class="linenos">492</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer-493"><a href="#ChartDrawer-493"><span class="linenos">493</span></a><span class="sd">        Render SVG lines for all transit aspects in the chart.</span>
</span><span id="ChartDrawer-494"><a href="#ChartDrawer-494"><span class="linenos">494</span></a>
</span><span id="ChartDrawer-495"><a href="#ChartDrawer-495"><span class="linenos">495</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer-496"><a href="#ChartDrawer-496"><span class="linenos">496</span></a><span class="sd">            r (float): Radius at which transit aspect lines originate.</span>
</span><span id="ChartDrawer-497"><a href="#ChartDrawer-497"><span class="linenos">497</span></a><span class="sd">            ar (float): Radius at which transit aspect lines terminate.</span>
</span><span id="ChartDrawer-498"><a href="#ChartDrawer-498"><span class="linenos">498</span></a>
</span><span id="ChartDrawer-499"><a href="#ChartDrawer-499"><span class="linenos">499</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer-500"><a href="#ChartDrawer-500"><span class="linenos">500</span></a><span class="sd">            str: SVG markup for all transit aspect lines.</span>
</span><span id="ChartDrawer-501"><a href="#ChartDrawer-501"><span class="linenos">501</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer-502"><a href="#ChartDrawer-502"><span class="linenos">502</span></a>        <span class="n">out</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ChartDrawer-503"><a href="#ChartDrawer-503"><span class="linenos">503</span></a>        <span class="k">for</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span><span class="p">:</span>
</span><span id="ChartDrawer-504"><a href="#ChartDrawer-504"><span class="linenos">504</span></a>            <span class="n">aspect_name</span> <span class="o">=</span> <span class="n">aspect</span><span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-505"><a href="#ChartDrawer-505"><span class="linenos">505</span></a>            <span class="n">aspect_color</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_settings</span> <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">aspect_name</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="ChartDrawer-506"><a href="#ChartDrawer-506"><span class="linenos">506</span></a>            <span class="k">if</span> <span class="n">aspect_color</span><span class="p">:</span>
</span><span id="ChartDrawer-507"><a href="#ChartDrawer-507"><span class="linenos">507</span></a>                <span class="n">out</span> <span class="o">+=</span> <span class="n">draw_aspect_line</span><span class="p">(</span>
</span><span id="ChartDrawer-508"><a href="#ChartDrawer-508"><span class="linenos">508</span></a>                    <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">,</span>
</span><span id="ChartDrawer-509"><a href="#ChartDrawer-509"><span class="linenos">509</span></a>                    <span class="n">ar</span><span class="o">=</span><span class="n">ar</span><span class="p">,</span>
</span><span id="ChartDrawer-510"><a href="#ChartDrawer-510"><span class="linenos">510</span></a>                    <span class="n">aspect</span><span class="o">=</span><span class="n">aspect</span><span class="p">,</span>
</span><span id="ChartDrawer-511"><a href="#ChartDrawer-511"><span class="linenos">511</span></a>                    <span class="n">color</span><span class="o">=</span><span class="n">aspect_color</span><span class="p">,</span>
</span><span id="ChartDrawer-512"><a href="#ChartDrawer-512"><span class="linenos">512</span></a>                    <span class="n">seventh_house_degree_ut</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">seventh_house</span><span class="o">.</span><span class="n">abs_pos</span>
</span><span id="ChartDrawer-513"><a href="#ChartDrawer-513"><span class="linenos">513</span></a>                <span class="p">)</span>
</span><span id="ChartDrawer-514"><a href="#ChartDrawer-514"><span class="linenos">514</span></a>        <span class="k">return</span> <span class="n">out</span>
</span><span id="ChartDrawer-515"><a href="#ChartDrawer-515"><span class="linenos">515</span></a>
</span><span id="ChartDrawer-516"><a href="#ChartDrawer-516"><span class="linenos">516</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_create_template_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChartTemplateDictionary</span><span class="p">:</span>
</span><span id="ChartDrawer-517"><a href="#ChartDrawer-517"><span class="linenos">517</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer-518"><a href="#ChartDrawer-518"><span class="linenos">518</span></a><span class="sd">        Assemble chart data and rendering instructions into a template dictionary.</span>
</span><span id="ChartDrawer-519"><a href="#ChartDrawer-519"><span class="linenos">519</span></a>
</span><span id="ChartDrawer-520"><a href="#ChartDrawer-520"><span class="linenos">520</span></a><span class="sd">        Gathers styling, dimensions, and SVG fragments for chart components based on</span>
</span><span id="ChartDrawer-521"><a href="#ChartDrawer-521"><span class="linenos">521</span></a><span class="sd">        chart type and subjects.</span>
</span><span id="ChartDrawer-522"><a href="#ChartDrawer-522"><span class="linenos">522</span></a>
</span><span id="ChartDrawer-523"><a href="#ChartDrawer-523"><span class="linenos">523</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer-524"><a href="#ChartDrawer-524"><span class="linenos">524</span></a><span class="sd">            ChartTemplateDictionary: Populated structure of template variables.</span>
</span><span id="ChartDrawer-525"><a href="#ChartDrawer-525"><span class="linenos">525</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer-526"><a href="#ChartDrawer-526"><span class="linenos">526</span></a>        <span class="c1"># Initialize template dictionary</span>
</span><span id="ChartDrawer-527"><a href="#ChartDrawer-527"><span class="linenos">527</span></a>        <span class="n">template_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="ChartDrawer-528"><a href="#ChartDrawer-528"><span class="linenos">528</span></a>
</span><span id="ChartDrawer-529"><a href="#ChartDrawer-529"><span class="linenos">529</span></a>        <span class="c1"># Set the color style tag</span>
</span><span id="ChartDrawer-530"><a href="#ChartDrawer-530"><span class="linenos">530</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;color_style_tag&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_style_tag</span>
</span><span id="ChartDrawer-531"><a href="#ChartDrawer-531"><span class="linenos">531</span></a>
</span><span id="ChartDrawer-532"><a href="#ChartDrawer-532"><span class="linenos">532</span></a>        <span class="c1"># Set chart dimensions</span>
</span><span id="ChartDrawer-533"><a href="#ChartDrawer-533"><span class="linenos">533</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;chart_height&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="ChartDrawer-534"><a href="#ChartDrawer-534"><span class="linenos">534</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;chart_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>
</span><span id="ChartDrawer-535"><a href="#ChartDrawer-535"><span class="linenos">535</span></a>
</span><span id="ChartDrawer-536"><a href="#ChartDrawer-536"><span class="linenos">536</span></a>        <span class="c1"># Set viewbox based on chart type</span>
</span><span id="ChartDrawer-537"><a href="#ChartDrawer-537"><span class="linenos">537</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Natal&quot;</span><span class="p">,</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">,</span> <span class="s2">&quot;Composite&quot;</span><span class="p">]:</span>
</span><span id="ChartDrawer-538"><a href="#ChartDrawer-538"><span class="linenos">538</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s1">&#39;viewbox&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_BASIC_CHART_VIEWBOX</span>
</span><span id="ChartDrawer-539"><a href="#ChartDrawer-539"><span class="linenos">539</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">double_chart_aspect_grid_type</span> <span class="o">==</span> <span class="s2">&quot;table&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-540"><a href="#ChartDrawer-540"><span class="linenos">540</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s1">&#39;viewbox&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_TRANSIT_CHART_WITH_TABLE_VIWBOX</span>
</span><span id="ChartDrawer-541"><a href="#ChartDrawer-541"><span class="linenos">541</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-542"><a href="#ChartDrawer-542"><span class="linenos">542</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s1">&#39;viewbox&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_WIDE_CHART_VIEWBOX</span>
</span><span id="ChartDrawer-543"><a href="#ChartDrawer-543"><span class="linenos">543</span></a>
</span><span id="ChartDrawer-544"><a href="#ChartDrawer-544"><span class="linenos">544</span></a>        <span class="c1"># Generate rings and circles based on chart type</span>
</span><span id="ChartDrawer-545"><a href="#ChartDrawer-545"><span class="linenos">545</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Transit&quot;</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">]:</span>
</span><span id="ChartDrawer-546"><a href="#ChartDrawer-546"><span class="linenos">546</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;transitRing&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_transit_ring</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_1&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;zodiac_transit_ring_3&quot;</span><span class="p">])</span>
</span><span id="ChartDrawer-547"><a href="#ChartDrawer-547"><span class="linenos">547</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;degreeRing&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_transit_ring_degree_steps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">seventh_house</span><span class="o">.</span><span class="n">abs_pos</span><span class="p">)</span>
</span><span id="ChartDrawer-548"><a href="#ChartDrawer-548"><span class="linenos">548</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;first_circle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_first_circle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;zodiac_transit_ring_2&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">)</span>
</span><span id="ChartDrawer-549"><a href="#ChartDrawer-549"><span class="linenos">549</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;second_circle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_second_circle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;zodiac_transit_ring_1&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;paper_1&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">)</span>
</span><span id="ChartDrawer-550"><a href="#ChartDrawer-550"><span class="linenos">550</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s1">&#39;third_circle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_third_circle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;zodiac_transit_ring_0&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;paper_1&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span><span class="p">)</span>
</span><span id="ChartDrawer-551"><a href="#ChartDrawer-551"><span class="linenos">551</span></a>
</span><span id="ChartDrawer-552"><a href="#ChartDrawer-552"><span class="linenos">552</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">double_chart_aspect_grid_type</span> <span class="o">==</span> <span class="s2">&quot;list&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-553"><a href="#ChartDrawer-553"><span class="linenos">553</span></a>                <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ChartDrawer-554"><a href="#ChartDrawer-554"><span class="linenos">554</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-555"><a href="#ChartDrawer-555"><span class="linenos">555</span></a>                    <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;couple_aspects&quot;</span><span class="p">,</span> <span class="s2">&quot;Couple Aspects&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer-556"><a href="#ChartDrawer-556"><span class="linenos">556</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-557"><a href="#ChartDrawer-557"><span class="linenos">557</span></a>                    <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;transit_aspects&quot;</span><span class="p">,</span> <span class="s2">&quot;Transit Aspects&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer-558"><a href="#ChartDrawer-558"><span class="linenos">558</span></a>
</span><span id="ChartDrawer-559"><a href="#ChartDrawer-559"><span class="linenos">559</span></a>                <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeAspectGrid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_transit_aspect_list</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_settings</span><span class="p">)</span>
</span><span id="ChartDrawer-560"><a href="#ChartDrawer-560"><span class="linenos">560</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-561"><a href="#ChartDrawer-561"><span class="linenos">561</span></a>                <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeAspectGrid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_transit_aspect_grid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;paper_0&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span><span class="p">,</span> <span class="mi">550</span><span class="p">,</span> <span class="mi">450</span><span class="p">)</span>
</span><span id="ChartDrawer-562"><a href="#ChartDrawer-562"><span class="linenos">562</span></a>
</span><span id="ChartDrawer-563"><a href="#ChartDrawer-563"><span class="linenos">563</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeAspects&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_all_transit_aspects_lines</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span> <span class="o">-</span> <span class="mi">160</span><span class="p">)</span>
</span><span id="ChartDrawer-564"><a href="#ChartDrawer-564"><span class="linenos">564</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-565"><a href="#ChartDrawer-565"><span class="linenos">565</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;transitRing&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ChartDrawer-566"><a href="#ChartDrawer-566"><span class="linenos">566</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;degreeRing&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_degree_ring</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">first_circle_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">seventh_house</span><span class="o">.</span><span class="n">abs_pos</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_0&quot;</span><span class="p">])</span>
</span><span id="ChartDrawer-567"><a href="#ChartDrawer-567"><span class="linenos">567</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s1">&#39;first_circle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_first_circle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;zodiac_radix_ring_2&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">first_circle_radius</span><span class="p">)</span>
</span><span id="ChartDrawer-568"><a href="#ChartDrawer-568"><span class="linenos">568</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;second_circle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_second_circle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;zodiac_radix_ring_1&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_1&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">second_circle_radius</span><span class="p">)</span>
</span><span id="ChartDrawer-569"><a href="#ChartDrawer-569"><span class="linenos">569</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s1">&#39;third_circle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_third_circle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;zodiac_radix_ring_0&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_1&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span><span class="p">)</span>
</span><span id="ChartDrawer-570"><a href="#ChartDrawer-570"><span class="linenos">570</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeAspectGrid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_aspect_grid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;paper_0&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span><span class="p">)</span>
</span><span id="ChartDrawer-571"><a href="#ChartDrawer-571"><span class="linenos">571</span></a>
</span><span id="ChartDrawer-572"><a href="#ChartDrawer-572"><span class="linenos">572</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeAspects&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_all_aspects_lines</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span><span class="p">)</span>
</span><span id="ChartDrawer-573"><a href="#ChartDrawer-573"><span class="linenos">573</span></a>
</span><span id="ChartDrawer-574"><a href="#ChartDrawer-574"><span class="linenos">574</span></a>        <span class="c1"># Set chart title</span>
</span><span id="ChartDrawer-575"><a href="#ChartDrawer-575"><span class="linenos">575</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-576"><a href="#ChartDrawer-576"><span class="linenos">576</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;stringTitle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;and_word&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ChartDrawer-577"><a href="#ChartDrawer-577"><span class="linenos">577</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-578"><a href="#ChartDrawer-578"><span class="linenos">578</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;stringTitle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;transits&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">day</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">month</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">year</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ChartDrawer-579"><a href="#ChartDrawer-579"><span class="linenos">579</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Natal&quot;</span><span class="p">,</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">]:</span>
</span><span id="ChartDrawer-580"><a href="#ChartDrawer-580"><span class="linenos">580</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;stringTitle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span>
</span><span id="ChartDrawer-581"><a href="#ChartDrawer-581"><span class="linenos">581</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-582"><a href="#ChartDrawer-582"><span class="linenos">582</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;stringTitle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;and_word&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ChartDrawer-583"><a href="#ChartDrawer-583"><span class="linenos">583</span></a>
</span><span id="ChartDrawer-584"><a href="#ChartDrawer-584"><span class="linenos">584</span></a>        <span class="c1"># Zodiac Type Info</span>
</span><span id="ChartDrawer-585"><a href="#ChartDrawer-585"><span class="linenos">585</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">zodiac_type</span> <span class="o">==</span> <span class="s1">&#39;Tropic&#39;</span><span class="p">:</span>
</span><span id="ChartDrawer-586"><a href="#ChartDrawer-586"><span class="linenos">586</span></a>            <span class="n">zodiac_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;zodiac&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Zodiac&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tropical&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Tropical&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ChartDrawer-587"><a href="#ChartDrawer-587"><span class="linenos">587</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-588"><a href="#ChartDrawer-588"><span class="linenos">588</span></a>            <span class="n">mode_const</span> <span class="o">=</span> <span class="s2">&quot;SIDM_&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">sidereal_mode</span> <span class="c1"># type: ignore</span>
</span><span id="ChartDrawer-589"><a href="#ChartDrawer-589"><span class="linenos">589</span></a>            <span class="n">mode_name</span> <span class="o">=</span> <span class="n">swe</span><span class="o">.</span><span class="n">get_ayanamsa_name</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">swe</span><span class="p">,</span> <span class="n">mode_const</span><span class="p">))</span>
</span><span id="ChartDrawer-590"><a href="#ChartDrawer-590"><span class="linenos">590</span></a>            <span class="n">zodiac_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ayanamsa&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Ayanamsa&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">mode_name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ChartDrawer-591"><a href="#ChartDrawer-591"><span class="linenos">591</span></a>
</span><span id="ChartDrawer-592"><a href="#ChartDrawer-592"><span class="linenos">592</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;houses_system_&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">houses_system_identifier</span><span class="p">,</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">houses_system_name</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;houses&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Houses&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ChartDrawer-593"><a href="#ChartDrawer-593"><span class="linenos">593</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">zodiac_info</span>
</span><span id="ChartDrawer-594"><a href="#ChartDrawer-594"><span class="linenos">594</span></a>
</span><span id="ChartDrawer-595"><a href="#ChartDrawer-595"><span class="linenos">595</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Natal&quot;</span><span class="p">,</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">]:</span>
</span><span id="ChartDrawer-596"><a href="#ChartDrawer-596"><span class="linenos">596</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;lunar_phase&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Lunar Phase&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;day&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Day&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">lunar_phase</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;moon_phase&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="ChartDrawer-597"><a href="#ChartDrawer-597"><span class="linenos">597</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;lunar_phase&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Lunar Phase&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">lunar_phase</span><span class="o">.</span><span class="n">moon_phase_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;_&quot;</span><span class="p">),</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">lunar_phase</span><span class="o">.</span><span class="n">moon_phase_name</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="ChartDrawer-598"><a href="#ChartDrawer-598"><span class="linenos">598</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_4&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">perspective_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;_&quot;</span><span class="p">),</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">perspective_type</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="ChartDrawer-599"><a href="#ChartDrawer-599"><span class="linenos">599</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-600"><a href="#ChartDrawer-600"><span class="linenos">600</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;lunar_phase&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Lunar Phase&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;day&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Day&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">lunar_phase</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;moon_phase&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="ChartDrawer-601"><a href="#ChartDrawer-601"><span class="linenos">601</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;lunar_phase&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Lunar Phase&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">lunar_phase</span><span class="o">.</span><span class="n">moon_phase_name</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="ChartDrawer-602"><a href="#ChartDrawer-602"><span class="linenos">602</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_4&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">perspective_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;_&quot;</span><span class="p">),</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">perspective_type</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="ChartDrawer-603"><a href="#ChartDrawer-603"><span class="linenos">603</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-604"><a href="#ChartDrawer-604"><span class="linenos">604</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">perspective_type</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="ChartDrawer-605"><a href="#ChartDrawer-605"><span class="linenos">605</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;composite_chart&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Composite Chart&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;midpoints&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Midpoints&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="ChartDrawer-606"><a href="#ChartDrawer-606"><span class="linenos">606</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;bottom_left_4&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ChartDrawer-607"><a href="#ChartDrawer-607"><span class="linenos">607</span></a>
</span><span id="ChartDrawer-608"><a href="#ChartDrawer-608"><span class="linenos">608</span></a>        <span class="c1"># Draw moon phase</span>
</span><span id="ChartDrawer-609"><a href="#ChartDrawer-609"><span class="linenos">609</span></a>        <span class="n">moon_phase_dict</span> <span class="o">=</span> <span class="n">calculate_moon_phase_chart_params</span><span class="p">(</span>
</span><span id="ChartDrawer-610"><a href="#ChartDrawer-610"><span class="linenos">610</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">lunar_phase</span><span class="p">[</span><span class="s2">&quot;degrees_between_s_m&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-611"><a href="#ChartDrawer-611"><span class="linenos">611</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolat</span>
</span><span id="ChartDrawer-612"><a href="#ChartDrawer-612"><span class="linenos">612</span></a>        <span class="p">)</span>
</span><span id="ChartDrawer-613"><a href="#ChartDrawer-613"><span class="linenos">613</span></a>
</span><span id="ChartDrawer-614"><a href="#ChartDrawer-614"><span class="linenos">614</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;lunar_phase_rotate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">moon_phase_dict</span><span class="p">[</span><span class="s2">&quot;lunar_phase_rotate&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-615"><a href="#ChartDrawer-615"><span class="linenos">615</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;lunar_phase_circle_center_x&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">moon_phase_dict</span><span class="p">[</span><span class="s2">&quot;circle_center_x&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-616"><a href="#ChartDrawer-616"><span class="linenos">616</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;lunar_phase_circle_radius&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">moon_phase_dict</span><span class="p">[</span><span class="s2">&quot;circle_radius&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-617"><a href="#ChartDrawer-617"><span class="linenos">617</span></a>
</span><span id="ChartDrawer-618"><a href="#ChartDrawer-618"><span class="linenos">618</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-619"><a href="#ChartDrawer-619"><span class="linenos">619</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">iso_formatted_local_datetime</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ChartDrawer-620"><a href="#ChartDrawer-620"><span class="linenos">620</span></a>        <span class="c1"># Set location string</span>
</span><span id="ChartDrawer-621"><a href="#ChartDrawer-621"><span class="linenos">621</span></a>        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">35</span><span class="p">:</span>
</span><span id="ChartDrawer-622"><a href="#ChartDrawer-622"><span class="linenos">622</span></a>            <span class="n">split_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer-623"><a href="#ChartDrawer-623"><span class="linenos">623</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">split_location</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="ChartDrawer-624"><a href="#ChartDrawer-624"><span class="linenos">624</span></a>                <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">split_location</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="n">split_location</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ChartDrawer-625"><a href="#ChartDrawer-625"><span class="linenos">625</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_1&quot;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">35</span><span class="p">:</span>
</span><span id="ChartDrawer-626"><a href="#ChartDrawer-626"><span class="linenos">626</span></a>                    <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_1&quot;</span><span class="p">][:</span><span class="mi">35</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span>
</span><span id="ChartDrawer-627"><a href="#ChartDrawer-627"><span class="linenos">627</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-628"><a href="#ChartDrawer-628"><span class="linenos">628</span></a>                <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">[:</span><span class="mi">35</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span>
</span><span id="ChartDrawer-629"><a href="#ChartDrawer-629"><span class="linenos">629</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-630"><a href="#ChartDrawer-630"><span class="linenos">630</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">location</span>
</span><span id="ChartDrawer-631"><a href="#ChartDrawer-631"><span class="linenos">631</span></a>
</span><span id="ChartDrawer-632"><a href="#ChartDrawer-632"><span class="linenos">632</span></a>        <span class="c1"># Set chart name</span>
</span><span id="ChartDrawer-633"><a href="#ChartDrawer-633"><span class="linenos">633</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Synastry&quot;</span><span class="p">,</span> <span class="s2">&quot;Transit&quot;</span><span class="p">]:</span>
</span><span id="ChartDrawer-634"><a href="#ChartDrawer-634"><span class="linenos">634</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:&quot;</span>
</span><span id="ChartDrawer-635"><a href="#ChartDrawer-635"><span class="linenos">635</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Natal&quot;</span><span class="p">,</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">]:</span>
</span><span id="ChartDrawer-636"><a href="#ChartDrawer-636"><span class="linenos">636</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;info&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">:&#39;</span>
</span><span id="ChartDrawer-637"><a href="#ChartDrawer-637"><span class="linenos">637</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-638"><a href="#ChartDrawer-638"><span class="linenos">638</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="ChartDrawer-639"><a href="#ChartDrawer-639"><span class="linenos">639</span></a>
</span><span id="ChartDrawer-640"><a href="#ChartDrawer-640"><span class="linenos">640</span></a>        <span class="c1"># Set additional information for Synastry chart type</span>
</span><span id="ChartDrawer-641"><a href="#ChartDrawer-641"><span class="linenos">641</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-642"><a href="#ChartDrawer-642"><span class="linenos">642</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: &quot;</span>
</span><span id="ChartDrawer-643"><a href="#ChartDrawer-643"><span class="linenos">643</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_4&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">city</span>
</span><span id="ChartDrawer-644"><a href="#ChartDrawer-644"><span class="linenos">644</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_5&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">year</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">month</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">day</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">hour</span><span class="si">:</span><span class="s2">02d</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">minute</span><span class="si">:</span><span class="s2">02d</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ChartDrawer-645"><a href="#ChartDrawer-645"><span class="linenos">645</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-646"><a href="#ChartDrawer-646"><span class="linenos">646</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">name</span>
</span><span id="ChartDrawer-647"><a href="#ChartDrawer-647"><span class="linenos">647</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_4&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">iso_formatted_local_datetime</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ChartDrawer-648"><a href="#ChartDrawer-648"><span class="linenos">648</span></a>            <span class="n">latitude_string</span> <span class="o">=</span> <span class="n">convert_latitude_coordinate_to_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;north_letter&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;south_letter&#39;</span><span class="p">])</span>
</span><span id="ChartDrawer-649"><a href="#ChartDrawer-649"><span class="linenos">649</span></a>            <span class="n">longitude_string</span> <span class="o">=</span> <span class="n">convert_longitude_coordinate_to_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">lng</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;east_letter&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;west_letter&#39;</span><span class="p">])</span>
</span><span id="ChartDrawer-650"><a href="#ChartDrawer-650"><span class="linenos">650</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_5&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">latitude_string</span><span class="si">}</span><span class="s2"> / </span><span class="si">{</span><span class="n">longitude_string</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ChartDrawer-651"><a href="#ChartDrawer-651"><span class="linenos">651</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-652"><a href="#ChartDrawer-652"><span class="linenos">652</span></a>            <span class="n">latitude_string</span> <span class="o">=</span> <span class="n">convert_latitude_coordinate_to_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geolat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;north&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;south&#39;</span><span class="p">])</span>
</span><span id="ChartDrawer-653"><a href="#ChartDrawer-653"><span class="linenos">653</span></a>            <span class="n">longitude_string</span> <span class="o">=</span> <span class="n">convert_longitude_coordinate_to_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geolon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;east&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;west&#39;</span><span class="p">])</span>
</span><span id="ChartDrawer-654"><a href="#ChartDrawer-654"><span class="linenos">654</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;latitude&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">latitude_string</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ChartDrawer-655"><a href="#ChartDrawer-655"><span class="linenos">655</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_4&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;longitude&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">longitude_string</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ChartDrawer-656"><a href="#ChartDrawer-656"><span class="linenos">656</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_5&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ChartDrawer-657"><a href="#ChartDrawer-657"><span class="linenos">657</span></a>
</span><span id="ChartDrawer-658"><a href="#ChartDrawer-658"><span class="linenos">658</span></a>
</span><span id="ChartDrawer-659"><a href="#ChartDrawer-659"><span class="linenos">659</span></a>        <span class="c1"># Set paper colors</span>
</span><span id="ChartDrawer-660"><a href="#ChartDrawer-660"><span class="linenos">660</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;paper_color_0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_0&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-661"><a href="#ChartDrawer-661"><span class="linenos">661</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;paper_color_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_1&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-662"><a href="#ChartDrawer-662"><span class="linenos">662</span></a>
</span><span id="ChartDrawer-663"><a href="#ChartDrawer-663"><span class="linenos">663</span></a>        <span class="c1"># Set planet colors</span>
</span><span id="ChartDrawer-664"><a href="#ChartDrawer-664"><span class="linenos">664</span></a>        <span class="k">for</span> <span class="n">planet</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">:</span>
</span><span id="ChartDrawer-665"><a href="#ChartDrawer-665"><span class="linenos">665</span></a>            <span class="n">planet_id</span> <span class="o">=</span> <span class="n">planet</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-666"><a href="#ChartDrawer-666"><span class="linenos">666</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;planets_color_</span><span class="si">{</span><span class="n">planet_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">planet</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="c1"># type: ignore</span>
</span><span id="ChartDrawer-667"><a href="#ChartDrawer-667"><span class="linenos">667</span></a>
</span><span id="ChartDrawer-668"><a href="#ChartDrawer-668"><span class="linenos">668</span></a>        <span class="c1"># Set zodiac colors</span>
</span><span id="ChartDrawer-669"><a href="#ChartDrawer-669"><span class="linenos">669</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">):</span>
</span><span id="ChartDrawer-670"><a href="#ChartDrawer-670"><span class="linenos">670</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;zodiac_color_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;zodiac_icon_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="c1"># type: ignore</span>
</span><span id="ChartDrawer-671"><a href="#ChartDrawer-671"><span class="linenos">671</span></a>
</span><span id="ChartDrawer-672"><a href="#ChartDrawer-672"><span class="linenos">672</span></a>        <span class="c1"># Set orb colors</span>
</span><span id="ChartDrawer-673"><a href="#ChartDrawer-673"><span class="linenos">673</span></a>        <span class="k">for</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_settings</span><span class="p">:</span>
</span><span id="ChartDrawer-674"><a href="#ChartDrawer-674"><span class="linenos">674</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;orb_color_</span><span class="si">{</span><span class="n">aspect</span><span class="p">[</span><span class="s1">&#39;degree&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">aspect</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="c1"># type: ignore</span>
</span><span id="ChartDrawer-675"><a href="#ChartDrawer-675"><span class="linenos">675</span></a>
</span><span id="ChartDrawer-676"><a href="#ChartDrawer-676"><span class="linenos">676</span></a>        <span class="c1"># Drawing functions</span>
</span><span id="ChartDrawer-677"><a href="#ChartDrawer-677"><span class="linenos">677</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeZodiac&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_zodiac_circle_slices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">)</span>
</span><span id="ChartDrawer-678"><a href="#ChartDrawer-678"><span class="linenos">678</span></a>
</span><span id="ChartDrawer-679"><a href="#ChartDrawer-679"><span class="linenos">679</span></a>        <span class="n">first_subject_houses_list</span> <span class="o">=</span> <span class="n">get_houses_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
</span><span id="ChartDrawer-680"><a href="#ChartDrawer-680"><span class="linenos">680</span></a>
</span><span id="ChartDrawer-681"><a href="#ChartDrawer-681"><span class="linenos">681</span></a>        <span class="c1"># Draw houses grid and cusps</span>
</span><span id="ChartDrawer-682"><a href="#ChartDrawer-682"><span class="linenos">682</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Transit&quot;</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">]:</span>
</span><span id="ChartDrawer-683"><a href="#ChartDrawer-683"><span class="linenos">683</span></a>            <span class="n">second_subject_houses_list</span> <span class="o">=</span> <span class="n">get_houses_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="p">)</span>
</span><span id="ChartDrawer-684"><a href="#ChartDrawer-684"><span class="linenos">684</span></a>
</span><span id="ChartDrawer-685"><a href="#ChartDrawer-685"><span class="linenos">685</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeHousesGrid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_house_grid</span><span class="p">(</span>
</span><span id="ChartDrawer-686"><a href="#ChartDrawer-686"><span class="linenos">686</span></a>                <span class="n">main_subject_houses_list</span><span class="o">=</span><span class="n">first_subject_houses_list</span><span class="p">,</span>
</span><span id="ChartDrawer-687"><a href="#ChartDrawer-687"><span class="linenos">687</span></a>                <span class="n">secondary_subject_houses_list</span><span class="o">=</span><span class="n">second_subject_houses_list</span><span class="p">,</span>
</span><span id="ChartDrawer-688"><a href="#ChartDrawer-688"><span class="linenos">688</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="ChartDrawer-689"><a href="#ChartDrawer-689"><span class="linenos">689</span></a>                <span class="n">text_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_0&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-690"><a href="#ChartDrawer-690"><span class="linenos">690</span></a>                <span class="n">house_cusp_generale_name_label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;cusp&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-691"><a href="#ChartDrawer-691"><span class="linenos">691</span></a>            <span class="p">)</span>
</span><span id="ChartDrawer-692"><a href="#ChartDrawer-692"><span class="linenos">692</span></a>
</span><span id="ChartDrawer-693"><a href="#ChartDrawer-693"><span class="linenos">693</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeHouses&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_houses_cusps_and_text_number</span><span class="p">(</span>
</span><span id="ChartDrawer-694"><a href="#ChartDrawer-694"><span class="linenos">694</span></a>                <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span>
</span><span id="ChartDrawer-695"><a href="#ChartDrawer-695"><span class="linenos">695</span></a>                <span class="n">first_subject_houses_list</span><span class="o">=</span><span class="n">first_subject_houses_list</span><span class="p">,</span>
</span><span id="ChartDrawer-696"><a href="#ChartDrawer-696"><span class="linenos">696</span></a>                <span class="n">standard_house_cusp_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;houses_radix_line&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-697"><a href="#ChartDrawer-697"><span class="linenos">697</span></a>                <span class="n">first_house_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">[</span><span class="mi">12</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-698"><a href="#ChartDrawer-698"><span class="linenos">698</span></a>                <span class="n">tenth_house_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">[</span><span class="mi">13</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-699"><a href="#ChartDrawer-699"><span class="linenos">699</span></a>                <span class="n">seventh_house_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">[</span><span class="mi">14</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-700"><a href="#ChartDrawer-700"><span class="linenos">700</span></a>                <span class="n">fourth_house_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">[</span><span class="mi">15</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-701"><a href="#ChartDrawer-701"><span class="linenos">701</span></a>                <span class="n">c1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">first_circle_radius</span><span class="p">,</span>
</span><span id="ChartDrawer-702"><a href="#ChartDrawer-702"><span class="linenos">702</span></a>                <span class="n">c3</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span><span class="p">,</span>
</span><span id="ChartDrawer-703"><a href="#ChartDrawer-703"><span class="linenos">703</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="ChartDrawer-704"><a href="#ChartDrawer-704"><span class="linenos">704</span></a>                <span class="n">second_subject_houses_list</span><span class="o">=</span><span class="n">second_subject_houses_list</span><span class="p">,</span>
</span><span id="ChartDrawer-705"><a href="#ChartDrawer-705"><span class="linenos">705</span></a>                <span class="n">transit_house_cusp_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;houses_transit_line&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-706"><a href="#ChartDrawer-706"><span class="linenos">706</span></a>            <span class="p">)</span>
</span><span id="ChartDrawer-707"><a href="#ChartDrawer-707"><span class="linenos">707</span></a>
</span><span id="ChartDrawer-708"><a href="#ChartDrawer-708"><span class="linenos">708</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-709"><a href="#ChartDrawer-709"><span class="linenos">709</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeHousesGrid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_house_grid</span><span class="p">(</span>
</span><span id="ChartDrawer-710"><a href="#ChartDrawer-710"><span class="linenos">710</span></a>                <span class="n">main_subject_houses_list</span><span class="o">=</span><span class="n">first_subject_houses_list</span><span class="p">,</span>
</span><span id="ChartDrawer-711"><a href="#ChartDrawer-711"><span class="linenos">711</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="ChartDrawer-712"><a href="#ChartDrawer-712"><span class="linenos">712</span></a>                <span class="n">text_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_0&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-713"><a href="#ChartDrawer-713"><span class="linenos">713</span></a>                <span class="n">house_cusp_generale_name_label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;cusp&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-714"><a href="#ChartDrawer-714"><span class="linenos">714</span></a>            <span class="p">)</span>
</span><span id="ChartDrawer-715"><a href="#ChartDrawer-715"><span class="linenos">715</span></a>
</span><span id="ChartDrawer-716"><a href="#ChartDrawer-716"><span class="linenos">716</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makeHouses&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_houses_cusps_and_text_number</span><span class="p">(</span>
</span><span id="ChartDrawer-717"><a href="#ChartDrawer-717"><span class="linenos">717</span></a>                <span class="n">r</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span>
</span><span id="ChartDrawer-718"><a href="#ChartDrawer-718"><span class="linenos">718</span></a>                <span class="n">first_subject_houses_list</span><span class="o">=</span><span class="n">first_subject_houses_list</span><span class="p">,</span>
</span><span id="ChartDrawer-719"><a href="#ChartDrawer-719"><span class="linenos">719</span></a>                <span class="n">standard_house_cusp_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;houses_radix_line&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-720"><a href="#ChartDrawer-720"><span class="linenos">720</span></a>                <span class="n">first_house_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">[</span><span class="mi">12</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-721"><a href="#ChartDrawer-721"><span class="linenos">721</span></a>                <span class="n">tenth_house_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">[</span><span class="mi">13</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-722"><a href="#ChartDrawer-722"><span class="linenos">722</span></a>                <span class="n">seventh_house_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">[</span><span class="mi">14</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-723"><a href="#ChartDrawer-723"><span class="linenos">723</span></a>                <span class="n">fourth_house_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">[</span><span class="mi">15</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-724"><a href="#ChartDrawer-724"><span class="linenos">724</span></a>                <span class="n">c1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">first_circle_radius</span><span class="p">,</span>
</span><span id="ChartDrawer-725"><a href="#ChartDrawer-725"><span class="linenos">725</span></a>                <span class="n">c3</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span><span class="p">,</span>
</span><span id="ChartDrawer-726"><a href="#ChartDrawer-726"><span class="linenos">726</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="ChartDrawer-727"><a href="#ChartDrawer-727"><span class="linenos">727</span></a>            <span class="p">)</span>
</span><span id="ChartDrawer-728"><a href="#ChartDrawer-728"><span class="linenos">728</span></a>
</span><span id="ChartDrawer-729"><a href="#ChartDrawer-729"><span class="linenos">729</span></a>        <span class="c1"># Draw planets</span>
</span><span id="ChartDrawer-730"><a href="#ChartDrawer-730"><span class="linenos">730</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Transit&quot;</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">]:</span>
</span><span id="ChartDrawer-731"><a href="#ChartDrawer-731"><span class="linenos">731</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makePlanets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_planets</span><span class="p">(</span>
</span><span id="ChartDrawer-732"><a href="#ChartDrawer-732"><span class="linenos">732</span></a>                <span class="n">available_kerykeion_celestial_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">available_kerykeion_celestial_points</span><span class="p">,</span>
</span><span id="ChartDrawer-733"><a href="#ChartDrawer-733"><span class="linenos">733</span></a>                <span class="n">available_planets_setting</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">,</span>
</span><span id="ChartDrawer-734"><a href="#ChartDrawer-734"><span class="linenos">734</span></a>                <span class="n">second_subject_available_kerykeion_celestial_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">t_available_kerykeion_celestial_points</span><span class="p">,</span>
</span><span id="ChartDrawer-735"><a href="#ChartDrawer-735"><span class="linenos">735</span></a>                <span class="n">radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span>
</span><span id="ChartDrawer-736"><a href="#ChartDrawer-736"><span class="linenos">736</span></a>                <span class="n">main_subject_first_house_degree_ut</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_house</span><span class="o">.</span><span class="n">abs_pos</span><span class="p">,</span>
</span><span id="ChartDrawer-737"><a href="#ChartDrawer-737"><span class="linenos">737</span></a>                <span class="n">main_subject_seventh_house_degree_ut</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">seventh_house</span><span class="o">.</span><span class="n">abs_pos</span><span class="p">,</span>
</span><span id="ChartDrawer-738"><a href="#ChartDrawer-738"><span class="linenos">738</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="ChartDrawer-739"><a href="#ChartDrawer-739"><span class="linenos">739</span></a>                <span class="n">third_circle_radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span><span class="p">,</span>
</span><span id="ChartDrawer-740"><a href="#ChartDrawer-740"><span class="linenos">740</span></a>            <span class="p">)</span>
</span><span id="ChartDrawer-741"><a href="#ChartDrawer-741"><span class="linenos">741</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-742"><a href="#ChartDrawer-742"><span class="linenos">742</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makePlanets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_planets</span><span class="p">(</span>
</span><span id="ChartDrawer-743"><a href="#ChartDrawer-743"><span class="linenos">743</span></a>                <span class="n">available_planets_setting</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">,</span>
</span><span id="ChartDrawer-744"><a href="#ChartDrawer-744"><span class="linenos">744</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="ChartDrawer-745"><a href="#ChartDrawer-745"><span class="linenos">745</span></a>                <span class="n">radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span><span class="p">,</span>
</span><span id="ChartDrawer-746"><a href="#ChartDrawer-746"><span class="linenos">746</span></a>                <span class="n">available_kerykeion_celestial_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">available_kerykeion_celestial_points</span><span class="p">,</span>
</span><span id="ChartDrawer-747"><a href="#ChartDrawer-747"><span class="linenos">747</span></a>                <span class="n">third_circle_radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span><span class="p">,</span>
</span><span id="ChartDrawer-748"><a href="#ChartDrawer-748"><span class="linenos">748</span></a>                <span class="n">main_subject_first_house_degree_ut</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_house</span><span class="o">.</span><span class="n">abs_pos</span><span class="p">,</span>
</span><span id="ChartDrawer-749"><a href="#ChartDrawer-749"><span class="linenos">749</span></a>                <span class="n">main_subject_seventh_house_degree_ut</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">seventh_house</span><span class="o">.</span><span class="n">abs_pos</span>
</span><span id="ChartDrawer-750"><a href="#ChartDrawer-750"><span class="linenos">750</span></a>            <span class="p">)</span>
</span><span id="ChartDrawer-751"><a href="#ChartDrawer-751"><span class="linenos">751</span></a>
</span><span id="ChartDrawer-752"><a href="#ChartDrawer-752"><span class="linenos">752</span></a>        <span class="c1"># Draw elements percentages</span>
</span><span id="ChartDrawer-753"><a href="#ChartDrawer-753"><span class="linenos">753</span></a>        <span class="n">total</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fire</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">water</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">earth</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">air</span>
</span><span id="ChartDrawer-754"><a href="#ChartDrawer-754"><span class="linenos">754</span></a>
</span><span id="ChartDrawer-755"><a href="#ChartDrawer-755"><span class="linenos">755</span></a>        <span class="n">fire_percentage</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">fire</span> <span class="o">/</span> <span class="n">total</span><span class="p">))</span>
</span><span id="ChartDrawer-756"><a href="#ChartDrawer-756"><span class="linenos">756</span></a>        <span class="n">earth_percentage</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">earth</span> <span class="o">/</span> <span class="n">total</span><span class="p">))</span>
</span><span id="ChartDrawer-757"><a href="#ChartDrawer-757"><span class="linenos">757</span></a>        <span class="n">air_percentage</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">air</span> <span class="o">/</span> <span class="n">total</span><span class="p">))</span>
</span><span id="ChartDrawer-758"><a href="#ChartDrawer-758"><span class="linenos">758</span></a>        <span class="n">water_percentage</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">water</span> <span class="o">/</span> <span class="n">total</span><span class="p">))</span>
</span><span id="ChartDrawer-759"><a href="#ChartDrawer-759"><span class="linenos">759</span></a>
</span><span id="ChartDrawer-760"><a href="#ChartDrawer-760"><span class="linenos">760</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;fire_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;fire&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">fire_percentage</span><span class="si">}</span><span class="s2">%&quot;</span>
</span><span id="ChartDrawer-761"><a href="#ChartDrawer-761"><span class="linenos">761</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;earth_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;earth&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">earth_percentage</span><span class="si">}</span><span class="s2">%&quot;</span>
</span><span id="ChartDrawer-762"><a href="#ChartDrawer-762"><span class="linenos">762</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;air_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;air&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">air_percentage</span><span class="si">}</span><span class="s2">%&quot;</span>
</span><span id="ChartDrawer-763"><a href="#ChartDrawer-763"><span class="linenos">763</span></a>        <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;water_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;water&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">water_percentage</span><span class="si">}</span><span class="s2">%&quot;</span>
</span><span id="ChartDrawer-764"><a href="#ChartDrawer-764"><span class="linenos">764</span></a>
</span><span id="ChartDrawer-765"><a href="#ChartDrawer-765"><span class="linenos">765</span></a>        <span class="c1"># Draw planet grid</span>
</span><span id="ChartDrawer-766"><a href="#ChartDrawer-766"><span class="linenos">766</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Transit&quot;</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">]:</span>
</span><span id="ChartDrawer-767"><a href="#ChartDrawer-767"><span class="linenos">767</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-768"><a href="#ChartDrawer-768"><span class="linenos">768</span></a>                <span class="n">second_subject_table_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;transit_name&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer-769"><a href="#ChartDrawer-769"><span class="linenos">769</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-770"><a href="#ChartDrawer-770"><span class="linenos">770</span></a>                <span class="n">second_subject_table_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">name</span>
</span><span id="ChartDrawer-771"><a href="#ChartDrawer-771"><span class="linenos">771</span></a>
</span><span id="ChartDrawer-772"><a href="#ChartDrawer-772"><span class="linenos">772</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makePlanetGrid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_planet_grid</span><span class="p">(</span>
</span><span id="ChartDrawer-773"><a href="#ChartDrawer-773"><span class="linenos">773</span></a>                <span class="n">planets_and_houses_grid_title</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;planets_and_house&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-774"><a href="#ChartDrawer-774"><span class="linenos">774</span></a>                <span class="n">subject_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="ChartDrawer-775"><a href="#ChartDrawer-775"><span class="linenos">775</span></a>                <span class="n">available_kerykeion_celestial_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">available_kerykeion_celestial_points</span><span class="p">,</span>
</span><span id="ChartDrawer-776"><a href="#ChartDrawer-776"><span class="linenos">776</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="ChartDrawer-777"><a href="#ChartDrawer-777"><span class="linenos">777</span></a>                <span class="n">text_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_0&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-778"><a href="#ChartDrawer-778"><span class="linenos">778</span></a>                <span class="n">celestial_point_language</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;celestial_points&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-779"><a href="#ChartDrawer-779"><span class="linenos">779</span></a>                <span class="n">second_subject_name</span><span class="o">=</span><span class="n">second_subject_table_name</span><span class="p">,</span>
</span><span id="ChartDrawer-780"><a href="#ChartDrawer-780"><span class="linenos">780</span></a>                <span class="n">second_subject_available_kerykeion_celestial_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">t_available_kerykeion_celestial_points</span><span class="p">,</span>
</span><span id="ChartDrawer-781"><a href="#ChartDrawer-781"><span class="linenos">781</span></a>            <span class="p">)</span>
</span><span id="ChartDrawer-782"><a href="#ChartDrawer-782"><span class="linenos">782</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-783"><a href="#ChartDrawer-783"><span class="linenos">783</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer-784"><a href="#ChartDrawer-784"><span class="linenos">784</span></a>                <span class="n">subject_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s1">&#39;and_word&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ChartDrawer-785"><a href="#ChartDrawer-785"><span class="linenos">785</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-786"><a href="#ChartDrawer-786"><span class="linenos">786</span></a>                <span class="n">subject_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span>
</span><span id="ChartDrawer-787"><a href="#ChartDrawer-787"><span class="linenos">787</span></a>
</span><span id="ChartDrawer-788"><a href="#ChartDrawer-788"><span class="linenos">788</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;makePlanetGrid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">draw_planet_grid</span><span class="p">(</span>
</span><span id="ChartDrawer-789"><a href="#ChartDrawer-789"><span class="linenos">789</span></a>                <span class="n">planets_and_houses_grid_title</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;planets_and_house&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-790"><a href="#ChartDrawer-790"><span class="linenos">790</span></a>                <span class="n">subject_name</span><span class="o">=</span><span class="n">subject_name</span><span class="p">,</span>
</span><span id="ChartDrawer-791"><a href="#ChartDrawer-791"><span class="linenos">791</span></a>                <span class="n">available_kerykeion_celestial_points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">available_kerykeion_celestial_points</span><span class="p">,</span>
</span><span id="ChartDrawer-792"><a href="#ChartDrawer-792"><span class="linenos">792</span></a>                <span class="n">chart_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="p">,</span>
</span><span id="ChartDrawer-793"><a href="#ChartDrawer-793"><span class="linenos">793</span></a>                <span class="n">text_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s2">&quot;paper_0&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-794"><a href="#ChartDrawer-794"><span class="linenos">794</span></a>                <span class="n">celestial_point_language</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;celestial_points&quot;</span><span class="p">],</span>
</span><span id="ChartDrawer-795"><a href="#ChartDrawer-795"><span class="linenos">795</span></a>            <span class="p">)</span>
</span><span id="ChartDrawer-796"><a href="#ChartDrawer-796"><span class="linenos">796</span></a>
</span><span id="ChartDrawer-797"><a href="#ChartDrawer-797"><span class="linenos">797</span></a>        <span class="c1"># Set date time string</span>
</span><span id="ChartDrawer-798"><a href="#ChartDrawer-798"><span class="linenos">798</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Composite&quot;</span><span class="p">]:</span>
</span><span id="ChartDrawer-799"><a href="#ChartDrawer-799"><span class="linenos">799</span></a>            <span class="c1"># First Subject Latitude and Longitude</span>
</span><span id="ChartDrawer-800"><a href="#ChartDrawer-800"><span class="linenos">800</span></a>            <span class="n">latitude</span> <span class="o">=</span> <span class="n">convert_latitude_coordinate_to_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;north_letter&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;south_letter&quot;</span><span class="p">])</span>
</span><span id="ChartDrawer-801"><a href="#ChartDrawer-801"><span class="linenos">801</span></a>            <span class="n">longitude</span> <span class="o">=</span> <span class="n">convert_longitude_coordinate_to_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">lng</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;east_letter&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;west_letter&quot;</span><span class="p">])</span>
</span><span id="ChartDrawer-802"><a href="#ChartDrawer-802"><span class="linenos">802</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">latitude</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">longitude</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ChartDrawer-803"><a href="#ChartDrawer-803"><span class="linenos">803</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-804"><a href="#ChartDrawer-804"><span class="linenos">804</span></a>            <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">iso_formatted_local_datetime</span><span class="p">)</span>
</span><span id="ChartDrawer-805"><a href="#ChartDrawer-805"><span class="linenos">805</span></a>            <span class="n">custom_format</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M [%z]&#39;</span><span class="p">)</span>
</span><span id="ChartDrawer-806"><a href="#ChartDrawer-806"><span class="linenos">806</span></a>            <span class="n">custom_format</span> <span class="o">=</span> <span class="n">custom_format</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="n">custom_format</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span>
</span><span id="ChartDrawer-807"><a href="#ChartDrawer-807"><span class="linenos">807</span></a>            <span class="n">template_dict</span><span class="p">[</span><span class="s2">&quot;top_left_2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">custom_format</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ChartDrawer-808"><a href="#ChartDrawer-808"><span class="linenos">808</span></a>
</span><span id="ChartDrawer-809"><a href="#ChartDrawer-809"><span class="linenos">809</span></a>        <span class="k">return</span> <span class="n">ChartTemplateDictionary</span><span class="p">(</span><span class="o">**</span><span class="n">template_dict</span><span class="p">)</span>
</span><span id="ChartDrawer-810"><a href="#ChartDrawer-810"><span class="linenos">810</span></a>
</span><span id="ChartDrawer-811"><a href="#ChartDrawer-811"><span class="linenos">811</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeTemplate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="ChartDrawer-812"><a href="#ChartDrawer-812"><span class="linenos">812</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer-813"><a href="#ChartDrawer-813"><span class="linenos">813</span></a><span class="sd">        Render the full chart SVG as a string.</span>
</span><span id="ChartDrawer-814"><a href="#ChartDrawer-814"><span class="linenos">814</span></a>
</span><span id="ChartDrawer-815"><a href="#ChartDrawer-815"><span class="linenos">815</span></a><span class="sd">        Reads the XML template, substitutes variables, and optionally inlines CSS</span>
</span><span id="ChartDrawer-816"><a href="#ChartDrawer-816"><span class="linenos">816</span></a><span class="sd">        variables and minifies the output.</span>
</span><span id="ChartDrawer-817"><a href="#ChartDrawer-817"><span class="linenos">817</span></a>
</span><span id="ChartDrawer-818"><a href="#ChartDrawer-818"><span class="linenos">818</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer-819"><a href="#ChartDrawer-819"><span class="linenos">819</span></a><span class="sd">            minify (bool): Remove whitespace and quotes for compactness.</span>
</span><span id="ChartDrawer-820"><a href="#ChartDrawer-820"><span class="linenos">820</span></a><span class="sd">            remove_css_variables (bool): Embed CSS variable definitions.</span>
</span><span id="ChartDrawer-821"><a href="#ChartDrawer-821"><span class="linenos">821</span></a>
</span><span id="ChartDrawer-822"><a href="#ChartDrawer-822"><span class="linenos">822</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer-823"><a href="#ChartDrawer-823"><span class="linenos">823</span></a><span class="sd">            str: SVG markup as a string.</span>
</span><span id="ChartDrawer-824"><a href="#ChartDrawer-824"><span class="linenos">824</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer-825"><a href="#ChartDrawer-825"><span class="linenos">825</span></a>        <span class="n">td</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_template_dictionary</span><span class="p">()</span>
</span><span id="ChartDrawer-826"><a href="#ChartDrawer-826"><span class="linenos">826</span></a>
</span><span id="ChartDrawer-827"><a href="#ChartDrawer-827"><span class="linenos">827</span></a>        <span class="n">DATA_DIR</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span>
</span><span id="ChartDrawer-828"><a href="#ChartDrawer-828"><span class="linenos">828</span></a>        <span class="n">xml_svg</span> <span class="o">=</span> <span class="n">DATA_DIR</span> <span class="o">/</span> <span class="s2">&quot;templates&quot;</span> <span class="o">/</span> <span class="s2">&quot;chart.xml&quot;</span>
</span><span id="ChartDrawer-829"><a href="#ChartDrawer-829"><span class="linenos">829</span></a>
</span><span id="ChartDrawer-830"><a href="#ChartDrawer-830"><span class="linenos">830</span></a>        <span class="c1"># read template</span>
</span><span id="ChartDrawer-831"><a href="#ChartDrawer-831"><span class="linenos">831</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">xml_svg</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="ChartDrawer-832"><a href="#ChartDrawer-832"><span class="linenos">832</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">td</span><span class="p">)</span>
</span><span id="ChartDrawer-833"><a href="#ChartDrawer-833"><span class="linenos">833</span></a>
</span><span id="ChartDrawer-834"><a href="#ChartDrawer-834"><span class="linenos">834</span></a>        <span class="c1"># return filename</span>
</span><span id="ChartDrawer-835"><a href="#ChartDrawer-835"><span class="linenos">835</span></a>
</span><span id="ChartDrawer-836"><a href="#ChartDrawer-836"><span class="linenos">836</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Template dictionary keys: </span><span class="si">{</span><span class="n">td</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer-837"><a href="#ChartDrawer-837"><span class="linenos">837</span></a>
</span><span id="ChartDrawer-838"><a href="#ChartDrawer-838"><span class="linenos">838</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_create_template_dictionary</span><span class="p">()</span>
</span><span id="ChartDrawer-839"><a href="#ChartDrawer-839"><span class="linenos">839</span></a>
</span><span id="ChartDrawer-840"><a href="#ChartDrawer-840"><span class="linenos">840</span></a>        <span class="k">if</span> <span class="n">remove_css_variables</span><span class="p">:</span>
</span><span id="ChartDrawer-841"><a href="#ChartDrawer-841"><span class="linenos">841</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">inline_css_variables_in_svg</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span id="ChartDrawer-842"><a href="#ChartDrawer-842"><span class="linenos">842</span></a>
</span><span id="ChartDrawer-843"><a href="#ChartDrawer-843"><span class="linenos">843</span></a>        <span class="k">if</span> <span class="n">minify</span><span class="p">:</span>
</span><span id="ChartDrawer-844"><a href="#ChartDrawer-844"><span class="linenos">844</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">scourString</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;    &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer-845"><a href="#ChartDrawer-845"><span class="linenos">845</span></a>
</span><span id="ChartDrawer-846"><a href="#ChartDrawer-846"><span class="linenos">846</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-847"><a href="#ChartDrawer-847"><span class="linenos">847</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer-848"><a href="#ChartDrawer-848"><span class="linenos">848</span></a>
</span><span id="ChartDrawer-849"><a href="#ChartDrawer-849"><span class="linenos">849</span></a>        <span class="k">return</span> <span class="n">template</span>
</span><span id="ChartDrawer-850"><a href="#ChartDrawer-850"><span class="linenos">850</span></a>
</span><span id="ChartDrawer-851"><a href="#ChartDrawer-851"><span class="linenos">851</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeSVG</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="ChartDrawer-852"><a href="#ChartDrawer-852"><span class="linenos">852</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer-853"><a href="#ChartDrawer-853"><span class="linenos">853</span></a><span class="sd">        Generate and save the full chart SVG to disk.</span>
</span><span id="ChartDrawer-854"><a href="#ChartDrawer-854"><span class="linenos">854</span></a>
</span><span id="ChartDrawer-855"><a href="#ChartDrawer-855"><span class="linenos">855</span></a><span class="sd">        Calls makeTemplate to render the SVG, then writes a file named</span>
</span><span id="ChartDrawer-856"><a href="#ChartDrawer-856"><span class="linenos">856</span></a><span class="sd">        &quot;{subject.name} - {chart_type} Chart.svg&quot; in the output directory.</span>
</span><span id="ChartDrawer-857"><a href="#ChartDrawer-857"><span class="linenos">857</span></a>
</span><span id="ChartDrawer-858"><a href="#ChartDrawer-858"><span class="linenos">858</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer-859"><a href="#ChartDrawer-859"><span class="linenos">859</span></a><span class="sd">            minify (bool): Pass-through to makeTemplate for compact output.</span>
</span><span id="ChartDrawer-860"><a href="#ChartDrawer-860"><span class="linenos">860</span></a><span class="sd">            remove_css_variables (bool): Pass-through to makeTemplate to embed CSS variables.</span>
</span><span id="ChartDrawer-861"><a href="#ChartDrawer-861"><span class="linenos">861</span></a>
</span><span id="ChartDrawer-862"><a href="#ChartDrawer-862"><span class="linenos">862</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer-863"><a href="#ChartDrawer-863"><span class="linenos">863</span></a><span class="sd">            None</span>
</span><span id="ChartDrawer-864"><a href="#ChartDrawer-864"><span class="linenos">864</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer-865"><a href="#ChartDrawer-865"><span class="linenos">865</span></a>
</span><span id="ChartDrawer-866"><a href="#ChartDrawer-866"><span class="linenos">866</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeTemplate</span><span class="p">(</span><span class="n">minify</span><span class="p">,</span> <span class="n">remove_css_variables</span><span class="p">)</span>
</span><span id="ChartDrawer-867"><a href="#ChartDrawer-867"><span class="linenos">867</span></a>
</span><span id="ChartDrawer-868"><a href="#ChartDrawer-868"><span class="linenos">868</span></a>        <span class="n">chartname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="si">}</span><span class="s2"> Chart.svg&quot;</span>
</span><span id="ChartDrawer-869"><a href="#ChartDrawer-869"><span class="linenos">869</span></a>
</span><span id="ChartDrawer-870"><a href="#ChartDrawer-870"><span class="linenos">870</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">chartname</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
</span><span id="ChartDrawer-871"><a href="#ChartDrawer-871"><span class="linenos">871</span></a>            <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">)</span>
</span><span id="ChartDrawer-872"><a href="#ChartDrawer-872"><span class="linenos">872</span></a>
</span><span id="ChartDrawer-873"><a href="#ChartDrawer-873"><span class="linenos">873</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SVG Generated Correctly in: </span><span class="si">{</span><span class="n">chartname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer-874"><a href="#ChartDrawer-874"><span class="linenos">874</span></a>
</span><span id="ChartDrawer-875"><a href="#ChartDrawer-875"><span class="linenos">875</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeWheelOnlyTemplate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="ChartDrawer-876"><a href="#ChartDrawer-876"><span class="linenos">876</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer-877"><a href="#ChartDrawer-877"><span class="linenos">877</span></a><span class="sd">        Render the wheel-only chart SVG as a string.</span>
</span><span id="ChartDrawer-878"><a href="#ChartDrawer-878"><span class="linenos">878</span></a>
</span><span id="ChartDrawer-879"><a href="#ChartDrawer-879"><span class="linenos">879</span></a><span class="sd">        Reads the wheel-only XML template, substitutes chart data, and applies optional</span>
</span><span id="ChartDrawer-880"><a href="#ChartDrawer-880"><span class="linenos">880</span></a><span class="sd">        CSS inlining and minification.</span>
</span><span id="ChartDrawer-881"><a href="#ChartDrawer-881"><span class="linenos">881</span></a>
</span><span id="ChartDrawer-882"><a href="#ChartDrawer-882"><span class="linenos">882</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer-883"><a href="#ChartDrawer-883"><span class="linenos">883</span></a><span class="sd">            minify (bool): Remove whitespace and quotes for compactness.</span>
</span><span id="ChartDrawer-884"><a href="#ChartDrawer-884"><span class="linenos">884</span></a><span class="sd">            remove_css_variables (bool): Embed CSS variable definitions.</span>
</span><span id="ChartDrawer-885"><a href="#ChartDrawer-885"><span class="linenos">885</span></a>
</span><span id="ChartDrawer-886"><a href="#ChartDrawer-886"><span class="linenos">886</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer-887"><a href="#ChartDrawer-887"><span class="linenos">887</span></a><span class="sd">            str: SVG markup for the chart wheel only.</span>
</span><span id="ChartDrawer-888"><a href="#ChartDrawer-888"><span class="linenos">888</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer-889"><a href="#ChartDrawer-889"><span class="linenos">889</span></a>
</span><span id="ChartDrawer-890"><a href="#ChartDrawer-890"><span class="linenos">890</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;templates&quot;</span> <span class="o">/</span> <span class="s2">&quot;wheel_only.xml&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="ChartDrawer-891"><a href="#ChartDrawer-891"><span class="linenos">891</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="ChartDrawer-892"><a href="#ChartDrawer-892"><span class="linenos">892</span></a>
</span><span id="ChartDrawer-893"><a href="#ChartDrawer-893"><span class="linenos">893</span></a>        <span class="n">template_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_template_dictionary</span><span class="p">()</span>
</span><span id="ChartDrawer-894"><a href="#ChartDrawer-894"><span class="linenos">894</span></a>        <span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">template_dict</span><span class="p">)</span>
</span><span id="ChartDrawer-895"><a href="#ChartDrawer-895"><span class="linenos">895</span></a>
</span><span id="ChartDrawer-896"><a href="#ChartDrawer-896"><span class="linenos">896</span></a>        <span class="k">if</span> <span class="n">remove_css_variables</span><span class="p">:</span>
</span><span id="ChartDrawer-897"><a href="#ChartDrawer-897"><span class="linenos">897</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">inline_css_variables_in_svg</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span id="ChartDrawer-898"><a href="#ChartDrawer-898"><span class="linenos">898</span></a>
</span><span id="ChartDrawer-899"><a href="#ChartDrawer-899"><span class="linenos">899</span></a>        <span class="k">if</span> <span class="n">minify</span><span class="p">:</span>
</span><span id="ChartDrawer-900"><a href="#ChartDrawer-900"><span class="linenos">900</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">scourString</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;    &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer-901"><a href="#ChartDrawer-901"><span class="linenos">901</span></a>
</span><span id="ChartDrawer-902"><a href="#ChartDrawer-902"><span class="linenos">902</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-903"><a href="#ChartDrawer-903"><span class="linenos">903</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer-904"><a href="#ChartDrawer-904"><span class="linenos">904</span></a>
</span><span id="ChartDrawer-905"><a href="#ChartDrawer-905"><span class="linenos">905</span></a>        <span class="k">return</span> <span class="n">template</span>
</span><span id="ChartDrawer-906"><a href="#ChartDrawer-906"><span class="linenos">906</span></a>
</span><span id="ChartDrawer-907"><a href="#ChartDrawer-907"><span class="linenos">907</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeWheelOnlySVG</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="ChartDrawer-908"><a href="#ChartDrawer-908"><span class="linenos">908</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer-909"><a href="#ChartDrawer-909"><span class="linenos">909</span></a><span class="sd">        Generate and save wheel-only chart SVG to disk.</span>
</span><span id="ChartDrawer-910"><a href="#ChartDrawer-910"><span class="linenos">910</span></a>
</span><span id="ChartDrawer-911"><a href="#ChartDrawer-911"><span class="linenos">911</span></a><span class="sd">        Calls makeWheelOnlyTemplate and writes a file named</span>
</span><span id="ChartDrawer-912"><a href="#ChartDrawer-912"><span class="linenos">912</span></a><span class="sd">        &quot;{subject.name} - {chart_type} Chart - Wheel Only.svg&quot; in the output directory.</span>
</span><span id="ChartDrawer-913"><a href="#ChartDrawer-913"><span class="linenos">913</span></a>
</span><span id="ChartDrawer-914"><a href="#ChartDrawer-914"><span class="linenos">914</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer-915"><a href="#ChartDrawer-915"><span class="linenos">915</span></a><span class="sd">            minify (bool): Pass-through to makeWheelOnlyTemplate for compact output.</span>
</span><span id="ChartDrawer-916"><a href="#ChartDrawer-916"><span class="linenos">916</span></a><span class="sd">            remove_css_variables (bool): Pass-through to makeWheelOnlyTemplate to embed CSS variables.</span>
</span><span id="ChartDrawer-917"><a href="#ChartDrawer-917"><span class="linenos">917</span></a>
</span><span id="ChartDrawer-918"><a href="#ChartDrawer-918"><span class="linenos">918</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer-919"><a href="#ChartDrawer-919"><span class="linenos">919</span></a><span class="sd">            None</span>
</span><span id="ChartDrawer-920"><a href="#ChartDrawer-920"><span class="linenos">920</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer-921"><a href="#ChartDrawer-921"><span class="linenos">921</span></a>
</span><span id="ChartDrawer-922"><a href="#ChartDrawer-922"><span class="linenos">922</span></a>        <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeWheelOnlyTemplate</span><span class="p">(</span><span class="n">minify</span><span class="p">,</span> <span class="n">remove_css_variables</span><span class="p">)</span>
</span><span id="ChartDrawer-923"><a href="#ChartDrawer-923"><span class="linenos">923</span></a>        <span class="n">chartname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="si">}</span><span class="s2"> Chart - Wheel Only.svg&quot;</span>
</span><span id="ChartDrawer-924"><a href="#ChartDrawer-924"><span class="linenos">924</span></a>
</span><span id="ChartDrawer-925"><a href="#ChartDrawer-925"><span class="linenos">925</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">chartname</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
</span><span id="ChartDrawer-926"><a href="#ChartDrawer-926"><span class="linenos">926</span></a>            <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span id="ChartDrawer-927"><a href="#ChartDrawer-927"><span class="linenos">927</span></a>
</span><span id="ChartDrawer-928"><a href="#ChartDrawer-928"><span class="linenos">928</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SVG Generated Correctly in: </span><span class="si">{</span><span class="n">chartname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer-929"><a href="#ChartDrawer-929"><span class="linenos">929</span></a>
</span><span id="ChartDrawer-930"><a href="#ChartDrawer-930"><span class="linenos">930</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeAspectGridOnlyTemplate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="ChartDrawer-931"><a href="#ChartDrawer-931"><span class="linenos">931</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer-932"><a href="#ChartDrawer-932"><span class="linenos">932</span></a><span class="sd">        Render the aspect-grid-only chart SVG as a string.</span>
</span><span id="ChartDrawer-933"><a href="#ChartDrawer-933"><span class="linenos">933</span></a>
</span><span id="ChartDrawer-934"><a href="#ChartDrawer-934"><span class="linenos">934</span></a><span class="sd">        Reads the aspect-grid XML template, generates the aspect grid based on chart type,</span>
</span><span id="ChartDrawer-935"><a href="#ChartDrawer-935"><span class="linenos">935</span></a><span class="sd">        and applies optional CSS inlining and minification.</span>
</span><span id="ChartDrawer-936"><a href="#ChartDrawer-936"><span class="linenos">936</span></a>
</span><span id="ChartDrawer-937"><a href="#ChartDrawer-937"><span class="linenos">937</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer-938"><a href="#ChartDrawer-938"><span class="linenos">938</span></a><span class="sd">            minify (bool): Remove whitespace and quotes for compactness.</span>
</span><span id="ChartDrawer-939"><a href="#ChartDrawer-939"><span class="linenos">939</span></a><span class="sd">            remove_css_variables (bool): Embed CSS variable definitions.</span>
</span><span id="ChartDrawer-940"><a href="#ChartDrawer-940"><span class="linenos">940</span></a>
</span><span id="ChartDrawer-941"><a href="#ChartDrawer-941"><span class="linenos">941</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer-942"><a href="#ChartDrawer-942"><span class="linenos">942</span></a><span class="sd">            str: SVG markup for the aspect grid only.</span>
</span><span id="ChartDrawer-943"><a href="#ChartDrawer-943"><span class="linenos">943</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer-944"><a href="#ChartDrawer-944"><span class="linenos">944</span></a>
</span><span id="ChartDrawer-945"><a href="#ChartDrawer-945"><span class="linenos">945</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;templates&quot;</span> <span class="o">/</span> <span class="s2">&quot;aspect_grid_only.xml&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="ChartDrawer-946"><a href="#ChartDrawer-946"><span class="linenos">946</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="ChartDrawer-947"><a href="#ChartDrawer-947"><span class="linenos">947</span></a>
</span><span id="ChartDrawer-948"><a href="#ChartDrawer-948"><span class="linenos">948</span></a>        <span class="n">template_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_template_dictionary</span><span class="p">()</span>
</span><span id="ChartDrawer-949"><a href="#ChartDrawer-949"><span class="linenos">949</span></a>
</span><span id="ChartDrawer-950"><a href="#ChartDrawer-950"><span class="linenos">950</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Transit&quot;</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">]:</span>
</span><span id="ChartDrawer-951"><a href="#ChartDrawer-951"><span class="linenos">951</span></a>            <span class="n">aspects_grid</span> <span class="o">=</span> <span class="n">draw_transit_aspect_grid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;paper_0&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span><span class="p">)</span>
</span><span id="ChartDrawer-952"><a href="#ChartDrawer-952"><span class="linenos">952</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-953"><a href="#ChartDrawer-953"><span class="linenos">953</span></a>            <span class="n">aspects_grid</span> <span class="o">=</span> <span class="n">draw_aspect_grid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;paper_0&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span><span class="p">,</span> <span class="n">x_start</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">y_start</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>
</span><span id="ChartDrawer-954"><a href="#ChartDrawer-954"><span class="linenos">954</span></a>
</span><span id="ChartDrawer-955"><a href="#ChartDrawer-955"><span class="linenos">955</span></a>        <span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">substitute</span><span class="p">({</span><span class="o">**</span><span class="n">template_dict</span><span class="p">,</span> <span class="s2">&quot;makeAspectGrid&quot;</span><span class="p">:</span> <span class="n">aspects_grid</span><span class="p">})</span>
</span><span id="ChartDrawer-956"><a href="#ChartDrawer-956"><span class="linenos">956</span></a>
</span><span id="ChartDrawer-957"><a href="#ChartDrawer-957"><span class="linenos">957</span></a>        <span class="k">if</span> <span class="n">remove_css_variables</span><span class="p">:</span>
</span><span id="ChartDrawer-958"><a href="#ChartDrawer-958"><span class="linenos">958</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">inline_css_variables_in_svg</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span id="ChartDrawer-959"><a href="#ChartDrawer-959"><span class="linenos">959</span></a>
</span><span id="ChartDrawer-960"><a href="#ChartDrawer-960"><span class="linenos">960</span></a>        <span class="k">if</span> <span class="n">minify</span><span class="p">:</span>
</span><span id="ChartDrawer-961"><a href="#ChartDrawer-961"><span class="linenos">961</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">scourString</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;    &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer-962"><a href="#ChartDrawer-962"><span class="linenos">962</span></a>
</span><span id="ChartDrawer-963"><a href="#ChartDrawer-963"><span class="linenos">963</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer-964"><a href="#ChartDrawer-964"><span class="linenos">964</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer-965"><a href="#ChartDrawer-965"><span class="linenos">965</span></a>
</span><span id="ChartDrawer-966"><a href="#ChartDrawer-966"><span class="linenos">966</span></a>        <span class="k">return</span> <span class="n">template</span>
</span><span id="ChartDrawer-967"><a href="#ChartDrawer-967"><span class="linenos">967</span></a>
</span><span id="ChartDrawer-968"><a href="#ChartDrawer-968"><span class="linenos">968</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeAspectGridOnlySVG</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="ChartDrawer-969"><a href="#ChartDrawer-969"><span class="linenos">969</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer-970"><a href="#ChartDrawer-970"><span class="linenos">970</span></a><span class="sd">        Generate and save aspect-grid-only chart SVG to disk.</span>
</span><span id="ChartDrawer-971"><a href="#ChartDrawer-971"><span class="linenos">971</span></a>
</span><span id="ChartDrawer-972"><a href="#ChartDrawer-972"><span class="linenos">972</span></a><span class="sd">        Calls makeAspectGridOnlyTemplate and writes a file named</span>
</span><span id="ChartDrawer-973"><a href="#ChartDrawer-973"><span class="linenos">973</span></a><span class="sd">        &quot;{subject.name} - {chart_type} Chart - Aspect Grid Only.svg&quot; in the output directory.</span>
</span><span id="ChartDrawer-974"><a href="#ChartDrawer-974"><span class="linenos">974</span></a>
</span><span id="ChartDrawer-975"><a href="#ChartDrawer-975"><span class="linenos">975</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer-976"><a href="#ChartDrawer-976"><span class="linenos">976</span></a><span class="sd">            minify (bool): Pass-through to makeAspectGridOnlyTemplate for compact output.</span>
</span><span id="ChartDrawer-977"><a href="#ChartDrawer-977"><span class="linenos">977</span></a><span class="sd">            remove_css_variables (bool): Pass-through to makeAspectGridOnlyTemplate to embed CSS variables.</span>
</span><span id="ChartDrawer-978"><a href="#ChartDrawer-978"><span class="linenos">978</span></a>
</span><span id="ChartDrawer-979"><a href="#ChartDrawer-979"><span class="linenos">979</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer-980"><a href="#ChartDrawer-980"><span class="linenos">980</span></a><span class="sd">            None</span>
</span><span id="ChartDrawer-981"><a href="#ChartDrawer-981"><span class="linenos">981</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer-982"><a href="#ChartDrawer-982"><span class="linenos">982</span></a>
</span><span id="ChartDrawer-983"><a href="#ChartDrawer-983"><span class="linenos">983</span></a>        <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeAspectGridOnlyTemplate</span><span class="p">(</span><span class="n">minify</span><span class="p">,</span> <span class="n">remove_css_variables</span><span class="p">)</span>
</span><span id="ChartDrawer-984"><a href="#ChartDrawer-984"><span class="linenos">984</span></a>        <span class="n">chartname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="si">}</span><span class="s2"> Chart - Aspect Grid Only.svg&quot;</span>
</span><span id="ChartDrawer-985"><a href="#ChartDrawer-985"><span class="linenos">985</span></a>
</span><span id="ChartDrawer-986"><a href="#ChartDrawer-986"><span class="linenos">986</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">chartname</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
</span><span id="ChartDrawer-987"><a href="#ChartDrawer-987"><span class="linenos">987</span></a>            <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span id="ChartDrawer-988"><a href="#ChartDrawer-988"><span class="linenos">988</span></a>
</span><span id="ChartDrawer-989"><a href="#ChartDrawer-989"><span class="linenos">989</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SVG Generated Correctly in: </span><span class="si">{</span><span class="n">chartname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>ChartDrawer generates astrological chart visualizations as SVG files.</p>

<p>This class supports creating full chart SVGs, wheel-only SVGs, and aspect-grid-only SVGs
for various chart types including Natal, ExternalNatal, Transit, Synastry, and Composite.
Charts are rendered using XML templates and drawing utilities, with customizable themes,
language, active points, and aspects.
The rendered SVGs can be saved to a specified output directory or, by default, to the user's home directory.</p>

<p>NOTE:
    The generated SVG files are optimized for web use, opening in browsers. If you want to
    use them in other applications, you might need to adjust the SVG settings or styles.</p>

<p>Args:
    first_obj (AstrologicalSubject | AstrologicalSubjectModel | CompositeSubjectModel):
        The primary astrological subject for the chart.
    chart_type (ChartType, optional):
        The type of chart to generate ('Natal', 'ExternalNatal', 'Transit', 'Synastry', 'Composite').
        Defaults to 'Natal'.
    second_obj (AstrologicalSubject | AstrologicalSubjectModel, optional):
        The secondary subject for Transit or Synastry charts. Not required for Natal or Composite.
    new_output_directory (str | Path, optional):
        Directory to write generated SVG files. Defaults to the user's home directory.
    new_settings_file (Path | dict | KerykeionSettingsModel, optional):
        Path or settings object to override default chart configuration (colors, fonts, aspects).
    theme (KerykeionChartTheme, optional):
        CSS theme for the chart. If None, no default styles are applied. Defaults to 'classic'.
    double_chart_aspect_grid_type (Literal['list', 'table'], optional):
        Specifies rendering style for double-chart aspect grids. Defaults to 'list'.
    chart_language (KerykeionChartLanguage, optional):
        Language code for chart labels. Defaults to 'EN'.
    active_points (list[Planet | AxialCusps], optional):
        List of celestial points and angles to include. Defaults to DEFAULT_ACTIVE_POINTS.
        Example:
        ["Sun", "Moon", "Mercury", "Venus"]</p>

<pre><code>active_aspects (list[ActiveAspect], optional):
    List of aspects (name and orb) to calculate. Defaults to DEFAULT_ACTIVE_ASPECTS.
    Example:
    [
        {"name": "conjunction", "orb": 10},
        {"name": "opposition", "orb": 10},
        {"name": "trine", "orb": 8},
        {"name": "sextile", "orb": 6},
        {"name": "square", "orb": 5},
        {"name": "quintile", "orb": 1},
    ]
</code></pre>

<p>Public Methods:
    makeTemplate(minify=False, remove_css_variables=False) -> str:
        Render the full chart SVG as a string without writing to disk. Use <code>minify=True</code>
        to remove whitespace and quotes, and <code>remove_css_variables=True</code> to embed CSS vars.</p>

<pre><code>makeSVG(minify=False, remove_css_variables=False) -&gt; None:
    Generate and write the full chart SVG file to the output directory.
    Filenames follow the pattern:
    '{subject.name} - {chart_type} Chart.svg'.

makeWheelOnlyTemplate(minify=False, remove_css_variables=False) -&gt; str:
    Render only the chart wheel (no aspect grid) as an SVG string.

makeWheelOnlySVG(minify=False, remove_css_variables=False) -&gt; None:
    Generate and write the wheel-only SVG file:
    '{subject.name} - {chart_type} Chart - Wheel Only.svg'.

makeAspectGridOnlyTemplate(minify=False, remove_css_variables=False) -&gt; str:
    Render only the aspect grid as an SVG string.

makeAspectGridOnlySVG(minify=False, remove_css_variables=False) -&gt; None:
    Generate and write the aspect-grid-only SVG file:
    '{subject.name} - {chart_type} Chart - Aspect Grid Only.svg'.
</code></pre>
</div>


                            <div id="ChartDrawer.__init__" class="classattr">
                                        <input id="ChartDrawer.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">

        <span class="name">ChartDrawer</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">first_obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n"><a href="../astrological_subject.html#AstrologicalSubject">kerykeion.astrological_subject.AstrologicalSubject</a></span><span class="p">,</span> <span class="n"><a href="../kr_types/kr_models.html#AstrologicalSubjectModel">kerykeion.kr_types.kr_models.AstrologicalSubjectModel</a></span><span class="p">,</span> <span class="n"><a href="../kr_types/kr_models.html#CompositeSubjectModel">kerykeion.kr_types.kr_models.CompositeSubjectModel</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">chart_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;Natal&#39;</span><span class="p">,</span> <span class="s1">&#39;ExternalNatal&#39;</span><span class="p">,</span> <span class="s1">&#39;Synastry&#39;</span><span class="p">,</span> <span class="s1">&#39;Transit&#39;</span><span class="p">,</span> <span class="s1">&#39;Composite&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Natal&#39;</span>,</span><span class="param">	<span class="n">second_obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n"><a href="../astrological_subject.html#AstrologicalSubject">kerykeion.astrological_subject.AstrologicalSubject</a></span><span class="p">,</span> <span class="n"><a href="../kr_types/kr_models.html#AstrologicalSubjectModel">kerykeion.kr_types.kr_models.AstrologicalSubjectModel</a></span><span class="p">,</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">new_output_directory</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">new_settings_file</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">NoneType</span><span class="p">,</span> <span class="n"><a href="../kr_types/settings_models.html#KerykeionSettingsModel">kerykeion.kr_types.settings_models.KerykeionSettingsModel</a></span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">theme</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;light&#39;</span><span class="p">,</span> <span class="s1">&#39;dark&#39;</span><span class="p">,</span> <span class="s1">&#39;dark-high-contrast&#39;</span><span class="p">,</span> <span class="s1">&#39;classic&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="s1">&#39;classic&#39;</span>,</span><span class="param">	<span class="n">double_chart_aspect_grid_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="s1">&#39;table&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;list&#39;</span>,</span><span class="param">	<span class="n">chart_language</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;EN&#39;</span><span class="p">,</span> <span class="s1">&#39;FR&#39;</span><span class="p">,</span> <span class="s1">&#39;PT&#39;</span><span class="p">,</span> <span class="s1">&#39;IT&#39;</span><span class="p">,</span> <span class="s1">&#39;CN&#39;</span><span class="p">,</span> <span class="s1">&#39;ES&#39;</span><span class="p">,</span> <span class="s1">&#39;RU&#39;</span><span class="p">,</span> <span class="s1">&#39;TR&#39;</span><span class="p">,</span> <span class="s1">&#39;DE&#39;</span><span class="p">,</span> <span class="s1">&#39;HI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;EN&#39;</span>,</span><span class="param">	<span class="n">active_points</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;Sun&#39;</span><span class="p">,</span> <span class="s1">&#39;Moon&#39;</span><span class="p">,</span> <span class="s1">&#39;Mercury&#39;</span><span class="p">,</span> <span class="s1">&#39;Venus&#39;</span><span class="p">,</span> <span class="s1">&#39;Mars&#39;</span><span class="p">,</span> <span class="s1">&#39;Jupiter&#39;</span><span class="p">,</span> <span class="s1">&#39;Saturn&#39;</span><span class="p">,</span> <span class="s1">&#39;Uranus&#39;</span><span class="p">,</span> <span class="s1">&#39;Neptune&#39;</span><span class="p">,</span> <span class="s1">&#39;Pluto&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean_Node&#39;</span><span class="p">,</span> <span class="s1">&#39;True_Node&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean_South_Node&#39;</span><span class="p">,</span> <span class="s1">&#39;True_South_Node&#39;</span><span class="p">,</span> <span class="s1">&#39;Chiron&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean_Lilith&#39;</span><span class="p">],</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;Ascendant&#39;</span><span class="p">,</span> <span class="s1">&#39;Medium_Coeli&#39;</span><span class="p">,</span> <span class="s1">&#39;Descendant&#39;</span><span class="p">,</span> <span class="s1">&#39;Imum_Coeli&#39;</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Sun&#39;</span><span class="p">,</span> <span class="s1">&#39;Moon&#39;</span><span class="p">,</span> <span class="s1">&#39;Mercury&#39;</span><span class="p">,</span> <span class="s1">&#39;Venus&#39;</span><span class="p">,</span> <span class="s1">&#39;Mars&#39;</span><span class="p">,</span> <span class="s1">&#39;Jupiter&#39;</span><span class="p">,</span> <span class="s1">&#39;Saturn&#39;</span><span class="p">,</span> <span class="s1">&#39;Uranus&#39;</span><span class="p">,</span> <span class="s1">&#39;Neptune&#39;</span><span class="p">,</span> <span class="s1">&#39;Pluto&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean_Node&#39;</span><span class="p">,</span> <span class="s1">&#39;Chiron&#39;</span><span class="p">,</span> <span class="s1">&#39;Ascendant&#39;</span><span class="p">,</span> <span class="s1">&#39;Medium_Coeli&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean_Lilith&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean_South_Node&#39;</span><span class="p">]</span>,</span><span class="param">	<span class="n">active_aspects</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n"><a href="../kr_types/kr_models.html#ActiveAspect">kerykeion.kr_types.kr_models.ActiveAspect</a></span><span class="p">]</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;conjunction&#39;</span><span class="p">,</span> <span class="s1">&#39;orb&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;opposition&#39;</span><span class="p">,</span> <span class="s1">&#39;orb&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;trine&#39;</span><span class="p">,</span> <span class="s1">&#39;orb&#39;</span><span class="p">:</span> <span class="mi">8</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;sextile&#39;</span><span class="p">,</span> <span class="s1">&#39;orb&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;square&#39;</span><span class="p">,</span> <span class="s1">&#39;orb&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;quintile&#39;</span><span class="p">,</span> <span class="s1">&#39;orb&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}]</span></span>)</span>

                <label class="view-source-button" for="ChartDrawer.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ChartDrawer.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ChartDrawer.__init__-169"><a href="#ChartDrawer.__init__-169"><span class="linenos">169</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="ChartDrawer.__init__-170"><a href="#ChartDrawer.__init__-170"><span class="linenos">170</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-171"><a href="#ChartDrawer.__init__-171"><span class="linenos">171</span></a>        <span class="n">first_obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AstrologicalSubject</span><span class="p">,</span> <span class="n">AstrologicalSubjectModel</span><span class="p">,</span> <span class="n">CompositeSubjectModel</span><span class="p">],</span>
</span><span id="ChartDrawer.__init__-172"><a href="#ChartDrawer.__init__-172"><span class="linenos">172</span></a>        <span class="n">chart_type</span><span class="p">:</span> <span class="n">ChartType</span> <span class="o">=</span> <span class="s2">&quot;Natal&quot;</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-173"><a href="#ChartDrawer.__init__-173"><span class="linenos">173</span></a>        <span class="n">second_obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AstrologicalSubject</span><span class="p">,</span> <span class="n">AstrologicalSubjectModel</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-174"><a href="#ChartDrawer.__init__-174"><span class="linenos">174</span></a>        <span class="n">new_output_directory</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-175"><a href="#ChartDrawer.__init__-175"><span class="linenos">175</span></a>        <span class="n">new_settings_file</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">KerykeionSettingsModel</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-176"><a href="#ChartDrawer.__init__-176"><span class="linenos">176</span></a>        <span class="n">theme</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">KerykeionChartTheme</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;classic&quot;</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-177"><a href="#ChartDrawer.__init__-177"><span class="linenos">177</span></a>        <span class="n">double_chart_aspect_grid_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="s2">&quot;table&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-178"><a href="#ChartDrawer.__init__-178"><span class="linenos">178</span></a>        <span class="n">chart_language</span><span class="p">:</span> <span class="n">KerykeionChartLanguage</span> <span class="o">=</span> <span class="s2">&quot;EN&quot;</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-179"><a href="#ChartDrawer.__init__-179"><span class="linenos">179</span></a>        <span class="n">active_points</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Planet</span><span class="p">,</span> <span class="n">AxialCusps</span><span class="p">]]</span> <span class="o">=</span> <span class="n">DEFAULT_ACTIVE_POINTS</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-180"><a href="#ChartDrawer.__init__-180"><span class="linenos">180</span></a>    <span class="n">active_aspects</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ActiveAspect</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_ACTIVE_ASPECTS</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-181"><a href="#ChartDrawer.__init__-181"><span class="linenos">181</span></a>    <span class="p">):</span>
</span><span id="ChartDrawer.__init__-182"><a href="#ChartDrawer.__init__-182"><span class="linenos">182</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer.__init__-183"><a href="#ChartDrawer.__init__-183"><span class="linenos">183</span></a><span class="sd">        Initialize the chart generator with subject data and configuration options.</span>
</span><span id="ChartDrawer.__init__-184"><a href="#ChartDrawer.__init__-184"><span class="linenos">184</span></a>
</span><span id="ChartDrawer.__init__-185"><a href="#ChartDrawer.__init__-185"><span class="linenos">185</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer.__init__-186"><a href="#ChartDrawer.__init__-186"><span class="linenos">186</span></a><span class="sd">            first_obj (AstrologicalSubject, AstrologicalSubjectModel, or CompositeSubjectModel):</span>
</span><span id="ChartDrawer.__init__-187"><a href="#ChartDrawer.__init__-187"><span class="linenos">187</span></a><span class="sd">                Primary astrological subject instance.</span>
</span><span id="ChartDrawer.__init__-188"><a href="#ChartDrawer.__init__-188"><span class="linenos">188</span></a><span class="sd">            chart_type (ChartType, optional):</span>
</span><span id="ChartDrawer.__init__-189"><a href="#ChartDrawer.__init__-189"><span class="linenos">189</span></a><span class="sd">                Type of chart to generate (e.g., &#39;Natal&#39;, &#39;Transit&#39;).</span>
</span><span id="ChartDrawer.__init__-190"><a href="#ChartDrawer.__init__-190"><span class="linenos">190</span></a><span class="sd">            second_obj (AstrologicalSubject or AstrologicalSubjectModel, optional):</span>
</span><span id="ChartDrawer.__init__-191"><a href="#ChartDrawer.__init__-191"><span class="linenos">191</span></a><span class="sd">                Secondary subject for Transit or Synastry charts.</span>
</span><span id="ChartDrawer.__init__-192"><a href="#ChartDrawer.__init__-192"><span class="linenos">192</span></a><span class="sd">            new_output_directory (str or Path, optional):</span>
</span><span id="ChartDrawer.__init__-193"><a href="#ChartDrawer.__init__-193"><span class="linenos">193</span></a><span class="sd">                Base directory to save generated SVG files.</span>
</span><span id="ChartDrawer.__init__-194"><a href="#ChartDrawer.__init__-194"><span class="linenos">194</span></a><span class="sd">            new_settings_file (Path, dict, or KerykeionSettingsModel, optional):</span>
</span><span id="ChartDrawer.__init__-195"><a href="#ChartDrawer.__init__-195"><span class="linenos">195</span></a><span class="sd">                Custom settings source for chart colors, fonts, and aspects.</span>
</span><span id="ChartDrawer.__init__-196"><a href="#ChartDrawer.__init__-196"><span class="linenos">196</span></a><span class="sd">            theme (KerykeionChartTheme or None, optional):</span>
</span><span id="ChartDrawer.__init__-197"><a href="#ChartDrawer.__init__-197"><span class="linenos">197</span></a><span class="sd">                CSS theme to apply; None for default styling.</span>
</span><span id="ChartDrawer.__init__-198"><a href="#ChartDrawer.__init__-198"><span class="linenos">198</span></a><span class="sd">            double_chart_aspect_grid_type (Literal[&#39;list&#39;,&#39;table&#39;], optional):</span>
</span><span id="ChartDrawer.__init__-199"><a href="#ChartDrawer.__init__-199"><span class="linenos">199</span></a><span class="sd">                Layout style for double-chart aspect grids (&#39;list&#39; or &#39;table&#39;).</span>
</span><span id="ChartDrawer.__init__-200"><a href="#ChartDrawer.__init__-200"><span class="linenos">200</span></a><span class="sd">            chart_language (KerykeionChartLanguage, optional):</span>
</span><span id="ChartDrawer.__init__-201"><a href="#ChartDrawer.__init__-201"><span class="linenos">201</span></a><span class="sd">                Language code for chart labels (e.g., &#39;EN&#39;, &#39;IT&#39;).</span>
</span><span id="ChartDrawer.__init__-202"><a href="#ChartDrawer.__init__-202"><span class="linenos">202</span></a><span class="sd">            active_points (List[Planet or AxialCusps], optional):</span>
</span><span id="ChartDrawer.__init__-203"><a href="#ChartDrawer.__init__-203"><span class="linenos">203</span></a><span class="sd">                Celestial points to include in the chart visualization.</span>
</span><span id="ChartDrawer.__init__-204"><a href="#ChartDrawer.__init__-204"><span class="linenos">204</span></a><span class="sd">            active_aspects (List[ActiveAspect], optional):</span>
</span><span id="ChartDrawer.__init__-205"><a href="#ChartDrawer.__init__-205"><span class="linenos">205</span></a><span class="sd">                Aspects to calculate, each defined by name and orb.</span>
</span><span id="ChartDrawer.__init__-206"><a href="#ChartDrawer.__init__-206"><span class="linenos">206</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer.__init__-207"><a href="#ChartDrawer.__init__-207"><span class="linenos">207</span></a>        <span class="n">home_directory</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span>
</span><span id="ChartDrawer.__init__-208"><a href="#ChartDrawer.__init__-208"><span class="linenos">208</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">new_settings_file</span> <span class="o">=</span> <span class="n">new_settings_file</span>
</span><span id="ChartDrawer.__init__-209"><a href="#ChartDrawer.__init__-209"><span class="linenos">209</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">chart_language</span> <span class="o">=</span> <span class="n">chart_language</span>
</span><span id="ChartDrawer.__init__-210"><a href="#ChartDrawer.__init__-210"><span class="linenos">210</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_points</span> <span class="o">=</span> <span class="n">active_points</span>
</span><span id="ChartDrawer.__init__-211"><a href="#ChartDrawer.__init__-211"><span class="linenos">211</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_aspects</span> <span class="o">=</span> <span class="n">active_aspects</span>
</span><span id="ChartDrawer.__init__-212"><a href="#ChartDrawer.__init__-212"><span class="linenos">212</span></a>
</span><span id="ChartDrawer.__init__-213"><a href="#ChartDrawer.__init__-213"><span class="linenos">213</span></a>        <span class="k">if</span> <span class="n">new_output_directory</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-214"><a href="#ChartDrawer.__init__-214"><span class="linenos">214</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">new_output_directory</span><span class="p">)</span>
</span><span id="ChartDrawer.__init__-215"><a href="#ChartDrawer.__init__-215"><span class="linenos">215</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-216"><a href="#ChartDrawer.__init__-216"><span class="linenos">216</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">=</span> <span class="n">home_directory</span>
</span><span id="ChartDrawer.__init__-217"><a href="#ChartDrawer.__init__-217"><span class="linenos">217</span></a>
</span><span id="ChartDrawer.__init__-218"><a href="#ChartDrawer.__init__-218"><span class="linenos">218</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parse_json_settings</span><span class="p">(</span><span class="n">new_settings_file</span><span class="p">)</span>
</span><span id="ChartDrawer.__init__-219"><a href="#ChartDrawer.__init__-219"><span class="linenos">219</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">=</span> <span class="n">chart_type</span>
</span><span id="ChartDrawer.__init__-220"><a href="#ChartDrawer.__init__-220"><span class="linenos">220</span></a>
</span><span id="ChartDrawer.__init__-221"><a href="#ChartDrawer.__init__-221"><span class="linenos">221</span></a>        <span class="c1"># Kerykeion instance</span>
</span><span id="ChartDrawer.__init__-222"><a href="#ChartDrawer.__init__-222"><span class="linenos">222</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">first_obj</span>
</span><span id="ChartDrawer.__init__-223"><a href="#ChartDrawer.__init__-223"><span class="linenos">223</span></a>
</span><span id="ChartDrawer.__init__-224"><a href="#ChartDrawer.__init__-224"><span class="linenos">224</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ChartDrawer.__init__-225"><a href="#ChartDrawer.__init__-225"><span class="linenos">225</span></a>        <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-226"><a href="#ChartDrawer.__init__-226"><span class="linenos">226</span></a>            <span class="k">if</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">active_points</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-227"><a href="#ChartDrawer.__init__-227"><span class="linenos">227</span></a>                <span class="k">continue</span>
</span><span id="ChartDrawer.__init__-228"><a href="#ChartDrawer.__init__-228"><span class="linenos">228</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-229"><a href="#ChartDrawer.__init__-229"><span class="linenos">229</span></a>                <span class="n">body</span><span class="p">[</span><span class="s2">&quot;is_active&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ChartDrawer.__init__-230"><a href="#ChartDrawer.__init__-230"><span class="linenos">230</span></a>
</span><span id="ChartDrawer.__init__-231"><a href="#ChartDrawer.__init__-231"><span class="linenos">231</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
</span><span id="ChartDrawer.__init__-232"><a href="#ChartDrawer.__init__-232"><span class="linenos">232</span></a>
</span><span id="ChartDrawer.__init__-233"><a href="#ChartDrawer.__init__-233"><span class="linenos">233</span></a>        <span class="c1"># Available bodies</span>
</span><span id="ChartDrawer.__init__-234"><a href="#ChartDrawer.__init__-234"><span class="linenos">234</span></a>        <span class="n">available_celestial_points_names</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ChartDrawer.__init__-235"><a href="#ChartDrawer.__init__-235"><span class="linenos">235</span></a>        <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-236"><a href="#ChartDrawer.__init__-236"><span class="linenos">236</span></a>            <span class="n">available_celestial_points_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">body</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
</span><span id="ChartDrawer.__init__-237"><a href="#ChartDrawer.__init__-237"><span class="linenos">237</span></a>
</span><span id="ChartDrawer.__init__-238"><a href="#ChartDrawer.__init__-238"><span class="linenos">238</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">available_kerykeion_celestial_points</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">KerykeionPointModel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ChartDrawer.__init__-239"><a href="#ChartDrawer.__init__-239"><span class="linenos">239</span></a>        <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="n">available_celestial_points_names</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-240"><a href="#ChartDrawer.__init__-240"><span class="linenos">240</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">available_kerykeion_celestial_points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
</span><span id="ChartDrawer.__init__-241"><a href="#ChartDrawer.__init__-241"><span class="linenos">241</span></a>
</span><span id="ChartDrawer.__init__-242"><a href="#ChartDrawer.__init__-242"><span class="linenos">242</span></a>        <span class="c1"># Makes the sign number list.</span>
</span><span id="ChartDrawer.__init__-243"><a href="#ChartDrawer.__init__-243"><span class="linenos">243</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Natal&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-244"><a href="#ChartDrawer.__init__-244"><span class="linenos">244</span></a>            <span class="n">natal_aspects_instance</span> <span class="o">=</span> <span class="n">NatalAspects</span><span class="p">(</span>
</span><span id="ChartDrawer.__init__-245"><a href="#ChartDrawer.__init__-245"><span class="linenos">245</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">new_settings_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_settings_file</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-246"><a href="#ChartDrawer.__init__-246"><span class="linenos">246</span></a>                <span class="n">active_points</span><span class="o">=</span><span class="n">active_points</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-247"><a href="#ChartDrawer.__init__-247"><span class="linenos">247</span></a>                <span class="n">active_aspects</span><span class="o">=</span><span class="n">active_aspects</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-248"><a href="#ChartDrawer.__init__-248"><span class="linenos">248</span></a>            <span class="p">)</span>
</span><span id="ChartDrawer.__init__-249"><a href="#ChartDrawer.__init__-249"><span class="linenos">249</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span> <span class="o">=</span> <span class="n">natal_aspects_instance</span><span class="o">.</span><span class="n">relevant_aspects</span>
</span><span id="ChartDrawer.__init__-250"><a href="#ChartDrawer.__init__-250"><span class="linenos">250</span></a>
</span><span id="ChartDrawer.__init__-251"><a href="#ChartDrawer.__init__-251"><span class="linenos">251</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-252"><a href="#ChartDrawer.__init__-252"><span class="linenos">252</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">second_obj</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-253"><a href="#ChartDrawer.__init__-253"><span class="linenos">253</span></a>                <span class="k">raise</span> <span class="n">KerykeionException</span><span class="p">(</span><span class="s2">&quot;Second object is required for Transit or Synastry charts.&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer.__init__-254"><a href="#ChartDrawer.__init__-254"><span class="linenos">254</span></a>
</span><span id="ChartDrawer.__init__-255"><a href="#ChartDrawer.__init__-255"><span class="linenos">255</span></a>            <span class="c1"># Kerykeion instance</span>
</span><span id="ChartDrawer.__init__-256"><a href="#ChartDrawer.__init__-256"><span class="linenos">256</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span> <span class="o">=</span> <span class="n">second_obj</span>
</span><span id="ChartDrawer.__init__-257"><a href="#ChartDrawer.__init__-257"><span class="linenos">257</span></a>
</span><span id="ChartDrawer.__init__-258"><a href="#ChartDrawer.__init__-258"><span class="linenos">258</span></a>            <span class="c1"># Aspects</span>
</span><span id="ChartDrawer.__init__-259"><a href="#ChartDrawer.__init__-259"><span class="linenos">259</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-260"><a href="#ChartDrawer.__init__-260"><span class="linenos">260</span></a>                <span class="n">synastry_aspects_instance</span> <span class="o">=</span> <span class="n">SynastryAspects</span><span class="p">(</span>
</span><span id="ChartDrawer.__init__-261"><a href="#ChartDrawer.__init__-261"><span class="linenos">261</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-262"><a href="#ChartDrawer.__init__-262"><span class="linenos">262</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-263"><a href="#ChartDrawer.__init__-263"><span class="linenos">263</span></a>                    <span class="n">new_settings_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_settings_file</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-264"><a href="#ChartDrawer.__init__-264"><span class="linenos">264</span></a>                    <span class="n">active_points</span><span class="o">=</span><span class="n">active_points</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-265"><a href="#ChartDrawer.__init__-265"><span class="linenos">265</span></a>                    <span class="n">active_aspects</span><span class="o">=</span><span class="n">active_aspects</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-266"><a href="#ChartDrawer.__init__-266"><span class="linenos">266</span></a>                <span class="p">)</span>
</span><span id="ChartDrawer.__init__-267"><a href="#ChartDrawer.__init__-267"><span class="linenos">267</span></a>
</span><span id="ChartDrawer.__init__-268"><a href="#ChartDrawer.__init__-268"><span class="linenos">268</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-269"><a href="#ChartDrawer.__init__-269"><span class="linenos">269</span></a>                <span class="n">synastry_aspects_instance</span> <span class="o">=</span> <span class="n">SynastryAspects</span><span class="p">(</span>
</span><span id="ChartDrawer.__init__-270"><a href="#ChartDrawer.__init__-270"><span class="linenos">270</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-271"><a href="#ChartDrawer.__init__-271"><span class="linenos">271</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-272"><a href="#ChartDrawer.__init__-272"><span class="linenos">272</span></a>                    <span class="n">new_settings_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_settings_file</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-273"><a href="#ChartDrawer.__init__-273"><span class="linenos">273</span></a>                    <span class="n">active_points</span><span class="o">=</span><span class="n">active_points</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-274"><a href="#ChartDrawer.__init__-274"><span class="linenos">274</span></a>                    <span class="n">active_aspects</span><span class="o">=</span><span class="n">active_aspects</span><span class="p">,</span>
</span><span id="ChartDrawer.__init__-275"><a href="#ChartDrawer.__init__-275"><span class="linenos">275</span></a>                <span class="p">)</span>
</span><span id="ChartDrawer.__init__-276"><a href="#ChartDrawer.__init__-276"><span class="linenos">276</span></a>
</span><span id="ChartDrawer.__init__-277"><a href="#ChartDrawer.__init__-277"><span class="linenos">277</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span> <span class="o">=</span> <span class="n">synastry_aspects_instance</span><span class="o">.</span><span class="n">relevant_aspects</span>
</span><span id="ChartDrawer.__init__-278"><a href="#ChartDrawer.__init__-278"><span class="linenos">278</span></a>
</span><span id="ChartDrawer.__init__-279"><a href="#ChartDrawer.__init__-279"><span class="linenos">279</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">t_available_kerykeion_celestial_points</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ChartDrawer.__init__-280"><a href="#ChartDrawer.__init__-280"><span class="linenos">280</span></a>            <span class="k">for</span> <span class="n">body</span> <span class="ow">in</span> <span class="n">available_celestial_points_names</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-281"><a href="#ChartDrawer.__init__-281"><span class="linenos">281</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">t_available_kerykeion_celestial_points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
</span><span id="ChartDrawer.__init__-282"><a href="#ChartDrawer.__init__-282"><span class="linenos">282</span></a>
</span><span id="ChartDrawer.__init__-283"><a href="#ChartDrawer.__init__-283"><span class="linenos">283</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-284"><a href="#ChartDrawer.__init__-284"><span class="linenos">284</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">first_obj</span><span class="p">,</span> <span class="n">CompositeSubjectModel</span><span class="p">):</span>
</span><span id="ChartDrawer.__init__-285"><a href="#ChartDrawer.__init__-285"><span class="linenos">285</span></a>                <span class="k">raise</span> <span class="n">KerykeionException</span><span class="p">(</span><span class="s2">&quot;First object must be a CompositeSubjectModel instance.&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer.__init__-286"><a href="#ChartDrawer.__init__-286"><span class="linenos">286</span></a>
</span><span id="ChartDrawer.__init__-287"><a href="#ChartDrawer.__init__-287"><span class="linenos">287</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span> <span class="o">=</span> <span class="n">NatalAspects</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">new_settings_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_settings_file</span><span class="p">,</span> <span class="n">active_points</span><span class="o">=</span><span class="n">active_points</span><span class="p">)</span><span class="o">.</span><span class="n">relevant_aspects</span>
</span><span id="ChartDrawer.__init__-288"><a href="#ChartDrawer.__init__-288"><span class="linenos">288</span></a>
</span><span id="ChartDrawer.__init__-289"><a href="#ChartDrawer.__init__-289"><span class="linenos">289</span></a>        <span class="c1"># Double chart aspect grid type</span>
</span><span id="ChartDrawer.__init__-290"><a href="#ChartDrawer.__init__-290"><span class="linenos">290</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">double_chart_aspect_grid_type</span> <span class="o">=</span> <span class="n">double_chart_aspect_grid_type</span>
</span><span id="ChartDrawer.__init__-291"><a href="#ChartDrawer.__init__-291"><span class="linenos">291</span></a>
</span><span id="ChartDrawer.__init__-292"><a href="#ChartDrawer.__init__-292"><span class="linenos">292</span></a>        <span class="c1"># screen size</span>
</span><span id="ChartDrawer.__init__-293"><a href="#ChartDrawer.__init__-293"><span class="linenos">293</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_HEIGHT</span>
</span><span id="ChartDrawer.__init__-294"><a href="#ChartDrawer.__init__-294"><span class="linenos">294</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Synastry&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-295"><a href="#ChartDrawer.__init__-295"><span class="linenos">295</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_FULL_WIDTH</span>
</span><span id="ChartDrawer.__init__-296"><a href="#ChartDrawer.__init__-296"><span class="linenos">296</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">double_chart_aspect_grid_type</span> <span class="o">==</span> <span class="s2">&quot;table&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Transit&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-297"><a href="#ChartDrawer.__init__-297"><span class="linenos">297</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_FULL_WIDTH_WITH_TABLE</span>
</span><span id="ChartDrawer.__init__-298"><a href="#ChartDrawer.__init__-298"><span class="linenos">298</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-299"><a href="#ChartDrawer.__init__-299"><span class="linenos">299</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_DEFAULT_NATAL_WIDTH</span>
</span><span id="ChartDrawer.__init__-300"><a href="#ChartDrawer.__init__-300"><span class="linenos">300</span></a>
</span><span id="ChartDrawer.__init__-301"><a href="#ChartDrawer.__init__-301"><span class="linenos">301</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Natal&quot;</span><span class="p">,</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">]:</span>
</span><span id="ChartDrawer.__init__-302"><a href="#ChartDrawer.__init__-302"><span class="linenos">302</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">city</span>
</span><span id="ChartDrawer.__init__-303"><a href="#ChartDrawer.__init__-303"><span class="linenos">303</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">lat</span>
</span><span id="ChartDrawer.__init__-304"><a href="#ChartDrawer.__init__-304"><span class="linenos">304</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolon</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">lng</span>
</span><span id="ChartDrawer.__init__-305"><a href="#ChartDrawer.__init__-305"><span class="linenos">305</span></a>
</span><span id="ChartDrawer.__init__-306"><a href="#ChartDrawer.__init__-306"><span class="linenos">306</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;Composite&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-307"><a href="#ChartDrawer.__init__-307"><span class="linenos">307</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ChartDrawer.__init__-308"><a href="#ChartDrawer.__init__-308"><span class="linenos">308</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolat</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">lat</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="ChartDrawer.__init__-309"><a href="#ChartDrawer.__init__-309"><span class="linenos">309</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolon</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">first_subject</span><span class="o">.</span><span class="n">lng</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">second_subject</span><span class="o">.</span><span class="n">lng</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="ChartDrawer.__init__-310"><a href="#ChartDrawer.__init__-310"><span class="linenos">310</span></a>
</span><span id="ChartDrawer.__init__-311"><a href="#ChartDrawer.__init__-311"><span class="linenos">311</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Transit&quot;</span><span class="p">]:</span>
</span><span id="ChartDrawer.__init__-312"><a href="#ChartDrawer.__init__-312"><span class="linenos">312</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">city</span>
</span><span id="ChartDrawer.__init__-313"><a href="#ChartDrawer.__init__-313"><span class="linenos">313</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">lat</span>
</span><span id="ChartDrawer.__init__-314"><a href="#ChartDrawer.__init__-314"><span class="linenos">314</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geolon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">t_user</span><span class="o">.</span><span class="n">lng</span>
</span><span id="ChartDrawer.__init__-315"><a href="#ChartDrawer.__init__-315"><span class="linenos">315</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">t_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span><span class="p">[</span><span class="s2">&quot;transit_name&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer.__init__-316"><a href="#ChartDrawer.__init__-316"><span class="linenos">316</span></a>
</span><span id="ChartDrawer.__init__-317"><a href="#ChartDrawer.__init__-317"><span class="linenos">317</span></a>        <span class="c1"># Default radius for the chart</span>
</span><span id="ChartDrawer.__init__-318"><a href="#ChartDrawer.__init__-318"><span class="linenos">318</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">main_radius</span> <span class="o">=</span> <span class="mi">240</span>
</span><span id="ChartDrawer.__init__-319"><a href="#ChartDrawer.__init__-319"><span class="linenos">319</span></a>
</span><span id="ChartDrawer.__init__-320"><a href="#ChartDrawer.__init__-320"><span class="linenos">320</span></a>        <span class="c1"># Set circle radii based on chart type</span>
</span><span id="ChartDrawer.__init__-321"><a href="#ChartDrawer.__init__-321"><span class="linenos">321</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="o">==</span> <span class="s2">&quot;ExternalNatal&quot;</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-322"><a href="#ChartDrawer.__init__-322"><span class="linenos">322</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">first_circle_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">second_circle_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span> <span class="o">=</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">92</span><span class="p">,</span> <span class="mi">112</span>
</span><span id="ChartDrawer.__init__-323"><a href="#ChartDrawer.__init__-323"><span class="linenos">323</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-324"><a href="#ChartDrawer.__init__-324"><span class="linenos">324</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">first_circle_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">second_circle_radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">third_circle_radius</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">120</span>
</span><span id="ChartDrawer.__init__-325"><a href="#ChartDrawer.__init__-325"><span class="linenos">325</span></a>
</span><span id="ChartDrawer.__init__-326"><a href="#ChartDrawer.__init__-326"><span class="linenos">326</span></a>        <span class="c1"># Initialize element points</span>
</span><span id="ChartDrawer.__init__-327"><a href="#ChartDrawer.__init__-327"><span class="linenos">327</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fire</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="ChartDrawer.__init__-328"><a href="#ChartDrawer.__init__-328"><span class="linenos">328</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">earth</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="ChartDrawer.__init__-329"><a href="#ChartDrawer.__init__-329"><span class="linenos">329</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">air</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="ChartDrawer.__init__-330"><a href="#ChartDrawer.__init__-330"><span class="linenos">330</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">water</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="ChartDrawer.__init__-331"><a href="#ChartDrawer.__init__-331"><span class="linenos">331</span></a>
</span><span id="ChartDrawer.__init__-332"><a href="#ChartDrawer.__init__-332"><span class="linenos">332</span></a>        <span class="c1"># Calculate element points from planets</span>
</span><span id="ChartDrawer.__init__-333"><a href="#ChartDrawer.__init__-333"><span class="linenos">333</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_elements_points_from_planets</span><span class="p">()</span>
</span><span id="ChartDrawer.__init__-334"><a href="#ChartDrawer.__init__-334"><span class="linenos">334</span></a>
</span><span id="ChartDrawer.__init__-335"><a href="#ChartDrawer.__init__-335"><span class="linenos">335</span></a>        <span class="c1"># Set up theme</span>
</span><span id="ChartDrawer.__init__-336"><a href="#ChartDrawer.__init__-336"><span class="linenos">336</span></a>        <span class="k">if</span> <span class="n">theme</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">get_args</span><span class="p">(</span><span class="n">KerykeionChartTheme</span><span class="p">)</span> <span class="ow">and</span> <span class="n">theme</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ChartDrawer.__init__-337"><a href="#ChartDrawer.__init__-337"><span class="linenos">337</span></a>            <span class="k">raise</span> <span class="n">KerykeionException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Theme </span><span class="si">{</span><span class="n">theme</span><span class="si">}</span><span class="s2"> is not available. Set None for default theme.&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer.__init__-338"><a href="#ChartDrawer.__init__-338"><span class="linenos">338</span></a>
</span><span id="ChartDrawer.__init__-339"><a href="#ChartDrawer.__init__-339"><span class="linenos">339</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_up_theme</span><span class="p">(</span><span class="n">theme</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the chart generator with subject data and configuration options.</p>

<p>Args:
    first_obj (AstrologicalSubject, AstrologicalSubjectModel, or CompositeSubjectModel):
        Primary astrological subject instance.
    chart_type (ChartType, optional):
        Type of chart to generate (e.g., 'Natal', 'Transit').
    second_obj (AstrologicalSubject or AstrologicalSubjectModel, optional):
        Secondary subject for Transit or Synastry charts.
    new_output_directory (str or Path, optional):
        Base directory to save generated SVG files.
    new_settings_file (Path, dict, or KerykeionSettingsModel, optional):
        Custom settings source for chart colors, fonts, and aspects.
    theme (KerykeionChartTheme or None, optional):
        CSS theme to apply; None for default styling.
    double_chart_aspect_grid_type (Literal['list','table'], optional):
        Layout style for double-chart aspect grids ('list' or 'table').
    chart_language (KerykeionChartLanguage, optional):
        Language code for chart labels (e.g., 'EN', 'IT').
    active_points (List[Planet or AxialCusps], optional):
        Celestial points to include in the chart visualization.
    active_aspects (List[ActiveAspect], optional):
        Aspects to calculate, each defined by name and orb.</p>
</div>


                            </div>
                            <div id="ChartDrawer.first_obj" class="classattr">
                                <div class="attr variable">
            <span class="name">first_obj</span><span class="annotation">: Union[<a href="../astrological_subject.html#AstrologicalSubject">kerykeion.astrological_subject.AstrologicalSubject</a>, <a href="../kr_types/kr_models.html#AstrologicalSubjectModel">kerykeion.kr_types.kr_models.AstrologicalSubjectModel</a>]</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.first_obj"></a>



                            </div>
                            <div id="ChartDrawer.second_obj" class="classattr">
                                <div class="attr variable">
            <span class="name">second_obj</span><span class="annotation">: Union[<a href="../astrological_subject.html#AstrologicalSubject">kerykeion.astrological_subject.AstrologicalSubject</a>, <a href="../kr_types/kr_models.html#AstrologicalSubjectModel">kerykeion.kr_types.kr_models.AstrologicalSubjectModel</a>, NoneType]</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.second_obj"></a>



                            </div>
                            <div id="ChartDrawer.chart_type" class="classattr">
                                <div class="attr variable">
            <span class="name">chart_type</span><span class="annotation">: Literal[&#39;Natal&#39;, &#39;ExternalNatal&#39;, &#39;Synastry&#39;, &#39;Transit&#39;, &#39;Composite&#39;]</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.chart_type"></a>



                            </div>
                            <div id="ChartDrawer.new_output_directory" class="classattr">
                                <div class="attr variable">
            <span class="name">new_output_directory</span><span class="annotation">: Optional[pathlib._local.Path]</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.new_output_directory"></a>



                            </div>
                            <div id="ChartDrawer.new_settings_file" class="classattr">
                                <div class="attr variable">
            <span class="name">new_settings_file</span><span class="annotation">: Union[pathlib._local.Path, NoneType, <a href="../kr_types/settings_models.html#KerykeionSettingsModel">kerykeion.kr_types.settings_models.KerykeionSettingsModel</a>, dict]</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.new_settings_file"></a>



                            </div>
                            <div id="ChartDrawer.output_directory" class="classattr">
                                <div class="attr variable">
            <span class="name">output_directory</span><span class="annotation">: pathlib._local.Path</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.output_directory"></a>



                            </div>
                            <div id="ChartDrawer.theme" class="classattr">
                                <div class="attr variable">
            <span class="name">theme</span><span class="annotation">: Optional[Literal[&#39;light&#39;, &#39;dark&#39;, &#39;dark-high-contrast&#39;, &#39;classic&#39;]]</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.theme"></a>



                            </div>
                            <div id="ChartDrawer.double_chart_aspect_grid_type" class="classattr">
                                <div class="attr variable">
            <span class="name">double_chart_aspect_grid_type</span><span class="annotation">: Literal[&#39;list&#39;, &#39;table&#39;]</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.double_chart_aspect_grid_type"></a>



                            </div>
                            <div id="ChartDrawer.chart_language" class="classattr">
                                <div class="attr variable">
            <span class="name">chart_language</span><span class="annotation">: Literal[&#39;EN&#39;, &#39;FR&#39;, &#39;PT&#39;, &#39;IT&#39;, &#39;CN&#39;, &#39;ES&#39;, &#39;RU&#39;, &#39;TR&#39;, &#39;DE&#39;, &#39;HI&#39;]</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.chart_language"></a>



                            </div>
                            <div id="ChartDrawer.active_points" class="classattr">
                                <div class="attr variable">
            <span class="name">active_points</span><span class="annotation">: List[Union[Literal[&#39;Sun&#39;, &#39;Moon&#39;, &#39;Mercury&#39;, &#39;Venus&#39;, &#39;Mars&#39;, &#39;Jupiter&#39;, &#39;Saturn&#39;, &#39;Uranus&#39;, &#39;Neptune&#39;, &#39;Pluto&#39;, &#39;Mean_Node&#39;, &#39;True_Node&#39;, &#39;Mean_South_Node&#39;, &#39;True_South_Node&#39;, &#39;Chiron&#39;, &#39;Mean_Lilith&#39;], Literal[&#39;Ascendant&#39;, &#39;Medium_Coeli&#39;, &#39;Descendant&#39;, &#39;Imum_Coeli&#39;]]]</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.active_points"></a>



                            </div>
                            <div id="ChartDrawer.active_aspects" class="classattr">
                                <div class="attr variable">
            <span class="name">active_aspects</span><span class="annotation">: List[<a href="../kr_types/kr_models.html#ActiveAspect">kerykeion.kr_types.kr_models.ActiveAspect</a>]</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.active_aspects"></a>



                            </div>
                            <div id="ChartDrawer.fire" class="classattr">
                                <div class="attr variable">
            <span class="name">fire</span><span class="annotation">: float</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.fire"></a>



                            </div>
                            <div id="ChartDrawer.earth" class="classattr">
                                <div class="attr variable">
            <span class="name">earth</span><span class="annotation">: float</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.earth"></a>



                            </div>
                            <div id="ChartDrawer.air" class="classattr">
                                <div class="attr variable">
            <span class="name">air</span><span class="annotation">: float</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.air"></a>



                            </div>
                            <div id="ChartDrawer.water" class="classattr">
                                <div class="attr variable">
            <span class="name">water</span><span class="annotation">: float</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.water"></a>



                            </div>
                            <div id="ChartDrawer.first_circle_radius" class="classattr">
                                <div class="attr variable">
            <span class="name">first_circle_radius</span><span class="annotation">: float</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.first_circle_radius"></a>



                            </div>
                            <div id="ChartDrawer.second_circle_radius" class="classattr">
                                <div class="attr variable">
            <span class="name">second_circle_radius</span><span class="annotation">: float</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.second_circle_radius"></a>



                            </div>
                            <div id="ChartDrawer.third_circle_radius" class="classattr">
                                <div class="attr variable">
            <span class="name">third_circle_radius</span><span class="annotation">: float</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.third_circle_radius"></a>



                            </div>
                            <div id="ChartDrawer.width" class="classattr">
                                <div class="attr variable">
            <span class="name">width</span><span class="annotation">: Union[float, int]</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.width"></a>



                            </div>
                            <div id="ChartDrawer.language_settings" class="classattr">
                                <div class="attr variable">
            <span class="name">language_settings</span><span class="annotation">: dict</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.language_settings"></a>



                            </div>
                            <div id="ChartDrawer.chart_colors_settings" class="classattr">
                                <div class="attr variable">
            <span class="name">chart_colors_settings</span><span class="annotation">: dict</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.chart_colors_settings"></a>



                            </div>
                            <div id="ChartDrawer.planets_settings" class="classattr">
                                <div class="attr variable">
            <span class="name">planets_settings</span><span class="annotation">: dict</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.planets_settings"></a>



                            </div>
                            <div id="ChartDrawer.aspects_settings" class="classattr">
                                <div class="attr variable">
            <span class="name">aspects_settings</span><span class="annotation">: dict</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.aspects_settings"></a>



                            </div>
                            <div id="ChartDrawer.user" class="classattr">
                                <div class="attr variable">
            <span class="name">user</span><span class="annotation">: Union[<a href="../astrological_subject.html#AstrologicalSubject">kerykeion.astrological_subject.AstrologicalSubject</a>, <a href="../kr_types/kr_models.html#AstrologicalSubjectModel">kerykeion.kr_types.kr_models.AstrologicalSubjectModel</a>, <a href="../kr_types/kr_models.html#CompositeSubjectModel">kerykeion.kr_types.kr_models.CompositeSubjectModel</a>]</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.user"></a>



                            </div>
                            <div id="ChartDrawer.available_planets_setting" class="classattr">
                                <div class="attr variable">
            <span class="name">available_planets_setting</span><span class="annotation">: List[<a href="../kr_types/settings_models.html#KerykeionSettingsCelestialPointModel">kerykeion.kr_types.settings_models.KerykeionSettingsCelestialPointModel</a>]</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.available_planets_setting"></a>



                            </div>
                            <div id="ChartDrawer.height" class="classattr">
                                <div class="attr variable">
            <span class="name">height</span><span class="annotation">: float</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.height"></a>



                            </div>
                            <div id="ChartDrawer.location" class="classattr">
                                <div class="attr variable">
            <span class="name">location</span><span class="annotation">: str</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.location"></a>



                            </div>
                            <div id="ChartDrawer.geolat" class="classattr">
                                <div class="attr variable">
            <span class="name">geolat</span><span class="annotation">: float</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.geolat"></a>



                            </div>
                            <div id="ChartDrawer.geolon" class="classattr">
                                <div class="attr variable">
            <span class="name">geolon</span><span class="annotation">: float</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.geolon"></a>



                            </div>
                            <div id="ChartDrawer.template" class="classattr">
                                <div class="attr variable">
            <span class="name">template</span><span class="annotation">: str</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.template"></a>



                            </div>
                            <div id="ChartDrawer.available_kerykeion_celestial_points" class="classattr">
                                <div class="attr variable">
            <span class="name">available_kerykeion_celestial_points</span><span class="annotation">: list[<a href="../kr_types/kr_models.html#KerykeionPointModel">kerykeion.kr_types.kr_models.KerykeionPointModel</a>]</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.available_kerykeion_celestial_points"></a>



                            </div>
                            <div id="ChartDrawer.main_radius" class="classattr">
                                <div class="attr variable">
            <span class="name">main_radius</span>


    </div>
    <a class="headerlink" href="#ChartDrawer.main_radius"></a>



                            </div>
                            <div id="ChartDrawer.set_up_theme" class="classattr">
                                        <input id="ChartDrawer.set_up_theme-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">

        <span class="def">def</span>
        <span class="name">set_up_theme</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">theme</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;light&#39;</span><span class="p">,</span> <span class="s1">&#39;dark&#39;</span><span class="p">,</span> <span class="s1">&#39;dark-high-contrast&#39;</span><span class="p">,</span> <span class="s1">&#39;classic&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ChartDrawer.set_up_theme-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ChartDrawer.set_up_theme"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ChartDrawer.set_up_theme-341"><a href="#ChartDrawer.set_up_theme-341"><span class="linenos">341</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_up_theme</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theme</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">KerykeionChartTheme</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ChartDrawer.set_up_theme-342"><a href="#ChartDrawer.set_up_theme-342"><span class="linenos">342</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer.set_up_theme-343"><a href="#ChartDrawer.set_up_theme-343"><span class="linenos">343</span></a><span class="sd">        Load and apply a CSS theme for the chart visualization.</span>
</span><span id="ChartDrawer.set_up_theme-344"><a href="#ChartDrawer.set_up_theme-344"><span class="linenos">344</span></a>
</span><span id="ChartDrawer.set_up_theme-345"><a href="#ChartDrawer.set_up_theme-345"><span class="linenos">345</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer.set_up_theme-346"><a href="#ChartDrawer.set_up_theme-346"><span class="linenos">346</span></a><span class="sd">            theme (KerykeionChartTheme or None): Name of the theme to apply. If None, no CSS is applied.</span>
</span><span id="ChartDrawer.set_up_theme-347"><a href="#ChartDrawer.set_up_theme-347"><span class="linenos">347</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer.set_up_theme-348"><a href="#ChartDrawer.set_up_theme-348"><span class="linenos">348</span></a>        <span class="k">if</span> <span class="n">theme</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ChartDrawer.set_up_theme-349"><a href="#ChartDrawer.set_up_theme-349"><span class="linenos">349</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">color_style_tag</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ChartDrawer.set_up_theme-350"><a href="#ChartDrawer.set_up_theme-350"><span class="linenos">350</span></a>            <span class="k">return</span>
</span><span id="ChartDrawer.set_up_theme-351"><a href="#ChartDrawer.set_up_theme-351"><span class="linenos">351</span></a>
</span><span id="ChartDrawer.set_up_theme-352"><a href="#ChartDrawer.set_up_theme-352"><span class="linenos">352</span></a>        <span class="n">theme_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;themes&quot;</span>
</span><span id="ChartDrawer.set_up_theme-353"><a href="#ChartDrawer.set_up_theme-353"><span class="linenos">353</span></a>
</span><span id="ChartDrawer.set_up_theme-354"><a href="#ChartDrawer.set_up_theme-354"><span class="linenos">354</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">theme_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">theme</span><span class="si">}</span><span class="s2">.css&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="ChartDrawer.set_up_theme-355"><a href="#ChartDrawer.set_up_theme-355"><span class="linenos">355</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">color_style_tag</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Load and apply a CSS theme for the chart visualization.</p>

<p>Args:
    theme (KerykeionChartTheme or None): Name of the theme to apply. If None, no CSS is applied.</p>
</div>


                            </div>
                            <div id="ChartDrawer.set_output_directory" class="classattr">
                                        <input id="ChartDrawer.set_output_directory-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">

        <span class="def">def</span>
        <span class="name">set_output_directory</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">dir_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ChartDrawer.set_output_directory-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ChartDrawer.set_output_directory"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ChartDrawer.set_output_directory-357"><a href="#ChartDrawer.set_output_directory-357"><span class="linenos">357</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_output_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dir_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ChartDrawer.set_output_directory-358"><a href="#ChartDrawer.set_output_directory-358"><span class="linenos">358</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer.set_output_directory-359"><a href="#ChartDrawer.set_output_directory-359"><span class="linenos">359</span></a><span class="sd">        Set the directory where generated SVG files will be saved.</span>
</span><span id="ChartDrawer.set_output_directory-360"><a href="#ChartDrawer.set_output_directory-360"><span class="linenos">360</span></a>
</span><span id="ChartDrawer.set_output_directory-361"><a href="#ChartDrawer.set_output_directory-361"><span class="linenos">361</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer.set_output_directory-362"><a href="#ChartDrawer.set_output_directory-362"><span class="linenos">362</span></a><span class="sd">            dir_path (Path): Target directory for SVG output.</span>
</span><span id="ChartDrawer.set_output_directory-363"><a href="#ChartDrawer.set_output_directory-363"><span class="linenos">363</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer.set_output_directory-364"><a href="#ChartDrawer.set_output_directory-364"><span class="linenos">364</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">=</span> <span class="n">dir_path</span>
</span><span id="ChartDrawer.set_output_directory-365"><a href="#ChartDrawer.set_output_directory-365"><span class="linenos">365</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Output direcotry set to: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Set the directory where generated SVG files will be saved.</p>

<p>Args:
    dir_path (Path): Target directory for SVG output.</p>
</div>


                            </div>
                            <div id="ChartDrawer.parse_json_settings" class="classattr">
                                        <input id="ChartDrawer.parse_json_settings-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">

        <span class="def">def</span>
        <span class="name">parse_json_settings</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">settings_file_or_dict</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="n"><a href="../kr_types/settings_models.html#KerykeionSettingsModel">kerykeion.kr_types.settings_models.KerykeionSettingsModel</a></span><span class="p">,</span> <span class="n">NoneType</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ChartDrawer.parse_json_settings-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ChartDrawer.parse_json_settings"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ChartDrawer.parse_json_settings-367"><a href="#ChartDrawer.parse_json_settings-367"><span class="linenos">367</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parse_json_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings_file_or_dict</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">KerykeionSettingsModel</span><span class="p">,</span> <span class="kc">None</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ChartDrawer.parse_json_settings-368"><a href="#ChartDrawer.parse_json_settings-368"><span class="linenos">368</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer.parse_json_settings-369"><a href="#ChartDrawer.parse_json_settings-369"><span class="linenos">369</span></a><span class="sd">        Load and parse chart configuration settings.</span>
</span><span id="ChartDrawer.parse_json_settings-370"><a href="#ChartDrawer.parse_json_settings-370"><span class="linenos">370</span></a>
</span><span id="ChartDrawer.parse_json_settings-371"><a href="#ChartDrawer.parse_json_settings-371"><span class="linenos">371</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer.parse_json_settings-372"><a href="#ChartDrawer.parse_json_settings-372"><span class="linenos">372</span></a><span class="sd">            settings_file_or_dict (Path, dict, or KerykeionSettingsModel):</span>
</span><span id="ChartDrawer.parse_json_settings-373"><a href="#ChartDrawer.parse_json_settings-373"><span class="linenos">373</span></a><span class="sd">                Source for custom chart settings.</span>
</span><span id="ChartDrawer.parse_json_settings-374"><a href="#ChartDrawer.parse_json_settings-374"><span class="linenos">374</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer.parse_json_settings-375"><a href="#ChartDrawer.parse_json_settings-375"><span class="linenos">375</span></a>        <span class="n">settings</span> <span class="o">=</span> <span class="n">get_settings</span><span class="p">(</span><span class="n">settings_file_or_dict</span><span class="p">)</span>
</span><span id="ChartDrawer.parse_json_settings-376"><a href="#ChartDrawer.parse_json_settings-376"><span class="linenos">376</span></a>
</span><span id="ChartDrawer.parse_json_settings-377"><a href="#ChartDrawer.parse_json_settings-377"><span class="linenos">377</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">language_settings</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;language_settings&quot;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_language</span><span class="p">]</span>
</span><span id="ChartDrawer.parse_json_settings-378"><a href="#ChartDrawer.parse_json_settings-378"><span class="linenos">378</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;chart_colors&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer.parse_json_settings-379"><a href="#ChartDrawer.parse_json_settings-379"><span class="linenos">379</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">planets_settings</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;celestial_points&quot;</span><span class="p">]</span>
</span><span id="ChartDrawer.parse_json_settings-380"><a href="#ChartDrawer.parse_json_settings-380"><span class="linenos">380</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">aspects_settings</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;aspects&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Load and parse chart configuration settings.</p>

<p>Args:
    settings_file_or_dict (Path, dict, or KerykeionSettingsModel):
        Source for custom chart settings.</p>
</div>


                            </div>
                            <div id="ChartDrawer.makeTemplate" class="classattr">
                                        <input id="ChartDrawer.makeTemplate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">

        <span class="def">def</span>
        <span class="name">makeTemplate</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>, </span><span class="param"><span class="n">remove_css_variables</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="ChartDrawer.makeTemplate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ChartDrawer.makeTemplate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ChartDrawer.makeTemplate-811"><a href="#ChartDrawer.makeTemplate-811"><span class="linenos">811</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeTemplate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="ChartDrawer.makeTemplate-812"><a href="#ChartDrawer.makeTemplate-812"><span class="linenos">812</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer.makeTemplate-813"><a href="#ChartDrawer.makeTemplate-813"><span class="linenos">813</span></a><span class="sd">        Render the full chart SVG as a string.</span>
</span><span id="ChartDrawer.makeTemplate-814"><a href="#ChartDrawer.makeTemplate-814"><span class="linenos">814</span></a>
</span><span id="ChartDrawer.makeTemplate-815"><a href="#ChartDrawer.makeTemplate-815"><span class="linenos">815</span></a><span class="sd">        Reads the XML template, substitutes variables, and optionally inlines CSS</span>
</span><span id="ChartDrawer.makeTemplate-816"><a href="#ChartDrawer.makeTemplate-816"><span class="linenos">816</span></a><span class="sd">        variables and minifies the output.</span>
</span><span id="ChartDrawer.makeTemplate-817"><a href="#ChartDrawer.makeTemplate-817"><span class="linenos">817</span></a>
</span><span id="ChartDrawer.makeTemplate-818"><a href="#ChartDrawer.makeTemplate-818"><span class="linenos">818</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer.makeTemplate-819"><a href="#ChartDrawer.makeTemplate-819"><span class="linenos">819</span></a><span class="sd">            minify (bool): Remove whitespace and quotes for compactness.</span>
</span><span id="ChartDrawer.makeTemplate-820"><a href="#ChartDrawer.makeTemplate-820"><span class="linenos">820</span></a><span class="sd">            remove_css_variables (bool): Embed CSS variable definitions.</span>
</span><span id="ChartDrawer.makeTemplate-821"><a href="#ChartDrawer.makeTemplate-821"><span class="linenos">821</span></a>
</span><span id="ChartDrawer.makeTemplate-822"><a href="#ChartDrawer.makeTemplate-822"><span class="linenos">822</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer.makeTemplate-823"><a href="#ChartDrawer.makeTemplate-823"><span class="linenos">823</span></a><span class="sd">            str: SVG markup as a string.</span>
</span><span id="ChartDrawer.makeTemplate-824"><a href="#ChartDrawer.makeTemplate-824"><span class="linenos">824</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer.makeTemplate-825"><a href="#ChartDrawer.makeTemplate-825"><span class="linenos">825</span></a>        <span class="n">td</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_template_dictionary</span><span class="p">()</span>
</span><span id="ChartDrawer.makeTemplate-826"><a href="#ChartDrawer.makeTemplate-826"><span class="linenos">826</span></a>
</span><span id="ChartDrawer.makeTemplate-827"><a href="#ChartDrawer.makeTemplate-827"><span class="linenos">827</span></a>        <span class="n">DATA_DIR</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span>
</span><span id="ChartDrawer.makeTemplate-828"><a href="#ChartDrawer.makeTemplate-828"><span class="linenos">828</span></a>        <span class="n">xml_svg</span> <span class="o">=</span> <span class="n">DATA_DIR</span> <span class="o">/</span> <span class="s2">&quot;templates&quot;</span> <span class="o">/</span> <span class="s2">&quot;chart.xml&quot;</span>
</span><span id="ChartDrawer.makeTemplate-829"><a href="#ChartDrawer.makeTemplate-829"><span class="linenos">829</span></a>
</span><span id="ChartDrawer.makeTemplate-830"><a href="#ChartDrawer.makeTemplate-830"><span class="linenos">830</span></a>        <span class="c1"># read template</span>
</span><span id="ChartDrawer.makeTemplate-831"><a href="#ChartDrawer.makeTemplate-831"><span class="linenos">831</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">xml_svg</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="ChartDrawer.makeTemplate-832"><a href="#ChartDrawer.makeTemplate-832"><span class="linenos">832</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">td</span><span class="p">)</span>
</span><span id="ChartDrawer.makeTemplate-833"><a href="#ChartDrawer.makeTemplate-833"><span class="linenos">833</span></a>
</span><span id="ChartDrawer.makeTemplate-834"><a href="#ChartDrawer.makeTemplate-834"><span class="linenos">834</span></a>        <span class="c1"># return filename</span>
</span><span id="ChartDrawer.makeTemplate-835"><a href="#ChartDrawer.makeTemplate-835"><span class="linenos">835</span></a>
</span><span id="ChartDrawer.makeTemplate-836"><a href="#ChartDrawer.makeTemplate-836"><span class="linenos">836</span></a>        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Template dictionary keys: </span><span class="si">{</span><span class="n">td</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer.makeTemplate-837"><a href="#ChartDrawer.makeTemplate-837"><span class="linenos">837</span></a>
</span><span id="ChartDrawer.makeTemplate-838"><a href="#ChartDrawer.makeTemplate-838"><span class="linenos">838</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_create_template_dictionary</span><span class="p">()</span>
</span><span id="ChartDrawer.makeTemplate-839"><a href="#ChartDrawer.makeTemplate-839"><span class="linenos">839</span></a>
</span><span id="ChartDrawer.makeTemplate-840"><a href="#ChartDrawer.makeTemplate-840"><span class="linenos">840</span></a>        <span class="k">if</span> <span class="n">remove_css_variables</span><span class="p">:</span>
</span><span id="ChartDrawer.makeTemplate-841"><a href="#ChartDrawer.makeTemplate-841"><span class="linenos">841</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">inline_css_variables_in_svg</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span id="ChartDrawer.makeTemplate-842"><a href="#ChartDrawer.makeTemplate-842"><span class="linenos">842</span></a>
</span><span id="ChartDrawer.makeTemplate-843"><a href="#ChartDrawer.makeTemplate-843"><span class="linenos">843</span></a>        <span class="k">if</span> <span class="n">minify</span><span class="p">:</span>
</span><span id="ChartDrawer.makeTemplate-844"><a href="#ChartDrawer.makeTemplate-844"><span class="linenos">844</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">scourString</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;    &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer.makeTemplate-845"><a href="#ChartDrawer.makeTemplate-845"><span class="linenos">845</span></a>
</span><span id="ChartDrawer.makeTemplate-846"><a href="#ChartDrawer.makeTemplate-846"><span class="linenos">846</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer.makeTemplate-847"><a href="#ChartDrawer.makeTemplate-847"><span class="linenos">847</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer.makeTemplate-848"><a href="#ChartDrawer.makeTemplate-848"><span class="linenos">848</span></a>
</span><span id="ChartDrawer.makeTemplate-849"><a href="#ChartDrawer.makeTemplate-849"><span class="linenos">849</span></a>        <span class="k">return</span> <span class="n">template</span>
</span></pre></div>


            <div class="docstring"><p>Render the full chart SVG as a string.</p>

<p>Reads the XML template, substitutes variables, and optionally inlines CSS
variables and minifies the output.</p>

<p>Args:
    minify (bool): Remove whitespace and quotes for compactness.
    remove_css_variables (bool): Embed CSS variable definitions.</p>

<p>Returns:
    str: SVG markup as a string.</p>
</div>


                            </div>
                            <div id="ChartDrawer.makeSVG" class="classattr">
                                        <input id="ChartDrawer.makeSVG-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">

        <span class="def">def</span>
        <span class="name">makeSVG</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>, </span><span class="param"><span class="n">remove_css_variables</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ChartDrawer.makeSVG-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ChartDrawer.makeSVG"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ChartDrawer.makeSVG-851"><a href="#ChartDrawer.makeSVG-851"><span class="linenos">851</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeSVG</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="ChartDrawer.makeSVG-852"><a href="#ChartDrawer.makeSVG-852"><span class="linenos">852</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer.makeSVG-853"><a href="#ChartDrawer.makeSVG-853"><span class="linenos">853</span></a><span class="sd">        Generate and save the full chart SVG to disk.</span>
</span><span id="ChartDrawer.makeSVG-854"><a href="#ChartDrawer.makeSVG-854"><span class="linenos">854</span></a>
</span><span id="ChartDrawer.makeSVG-855"><a href="#ChartDrawer.makeSVG-855"><span class="linenos">855</span></a><span class="sd">        Calls makeTemplate to render the SVG, then writes a file named</span>
</span><span id="ChartDrawer.makeSVG-856"><a href="#ChartDrawer.makeSVG-856"><span class="linenos">856</span></a><span class="sd">        &quot;{subject.name} - {chart_type} Chart.svg&quot; in the output directory.</span>
</span><span id="ChartDrawer.makeSVG-857"><a href="#ChartDrawer.makeSVG-857"><span class="linenos">857</span></a>
</span><span id="ChartDrawer.makeSVG-858"><a href="#ChartDrawer.makeSVG-858"><span class="linenos">858</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer.makeSVG-859"><a href="#ChartDrawer.makeSVG-859"><span class="linenos">859</span></a><span class="sd">            minify (bool): Pass-through to makeTemplate for compact output.</span>
</span><span id="ChartDrawer.makeSVG-860"><a href="#ChartDrawer.makeSVG-860"><span class="linenos">860</span></a><span class="sd">            remove_css_variables (bool): Pass-through to makeTemplate to embed CSS variables.</span>
</span><span id="ChartDrawer.makeSVG-861"><a href="#ChartDrawer.makeSVG-861"><span class="linenos">861</span></a>
</span><span id="ChartDrawer.makeSVG-862"><a href="#ChartDrawer.makeSVG-862"><span class="linenos">862</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer.makeSVG-863"><a href="#ChartDrawer.makeSVG-863"><span class="linenos">863</span></a><span class="sd">            None</span>
</span><span id="ChartDrawer.makeSVG-864"><a href="#ChartDrawer.makeSVG-864"><span class="linenos">864</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer.makeSVG-865"><a href="#ChartDrawer.makeSVG-865"><span class="linenos">865</span></a>
</span><span id="ChartDrawer.makeSVG-866"><a href="#ChartDrawer.makeSVG-866"><span class="linenos">866</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeTemplate</span><span class="p">(</span><span class="n">minify</span><span class="p">,</span> <span class="n">remove_css_variables</span><span class="p">)</span>
</span><span id="ChartDrawer.makeSVG-867"><a href="#ChartDrawer.makeSVG-867"><span class="linenos">867</span></a>
</span><span id="ChartDrawer.makeSVG-868"><a href="#ChartDrawer.makeSVG-868"><span class="linenos">868</span></a>        <span class="n">chartname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="si">}</span><span class="s2"> Chart.svg&quot;</span>
</span><span id="ChartDrawer.makeSVG-869"><a href="#ChartDrawer.makeSVG-869"><span class="linenos">869</span></a>
</span><span id="ChartDrawer.makeSVG-870"><a href="#ChartDrawer.makeSVG-870"><span class="linenos">870</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">chartname</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
</span><span id="ChartDrawer.makeSVG-871"><a href="#ChartDrawer.makeSVG-871"><span class="linenos">871</span></a>            <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">)</span>
</span><span id="ChartDrawer.makeSVG-872"><a href="#ChartDrawer.makeSVG-872"><span class="linenos">872</span></a>
</span><span id="ChartDrawer.makeSVG-873"><a href="#ChartDrawer.makeSVG-873"><span class="linenos">873</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SVG Generated Correctly in: </span><span class="si">{</span><span class="n">chartname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Generate and save the full chart SVG to disk.</p>

<p>Calls makeTemplate to render the SVG, then writes a file named
"{subject.name} - {chart_type} Chart.svg" in the output directory.</p>

<p>Args:
    minify (bool): Pass-through to makeTemplate for compact output.
    remove_css_variables (bool): Pass-through to makeTemplate to embed CSS variables.</p>

<p>Returns:
    None</p>
</div>


                            </div>
                            <div id="ChartDrawer.makeWheelOnlyTemplate" class="classattr">
                                        <input id="ChartDrawer.makeWheelOnlyTemplate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">

        <span class="def">def</span>
        <span class="name">makeWheelOnlyTemplate</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>, </span><span class="param"><span class="n">remove_css_variables</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ChartDrawer.makeWheelOnlyTemplate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ChartDrawer.makeWheelOnlyTemplate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ChartDrawer.makeWheelOnlyTemplate-875"><a href="#ChartDrawer.makeWheelOnlyTemplate-875"><span class="linenos">875</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeWheelOnlyTemplate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-876"><a href="#ChartDrawer.makeWheelOnlyTemplate-876"><span class="linenos">876</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-877"><a href="#ChartDrawer.makeWheelOnlyTemplate-877"><span class="linenos">877</span></a><span class="sd">        Render the wheel-only chart SVG as a string.</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-878"><a href="#ChartDrawer.makeWheelOnlyTemplate-878"><span class="linenos">878</span></a>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-879"><a href="#ChartDrawer.makeWheelOnlyTemplate-879"><span class="linenos">879</span></a><span class="sd">        Reads the wheel-only XML template, substitutes chart data, and applies optional</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-880"><a href="#ChartDrawer.makeWheelOnlyTemplate-880"><span class="linenos">880</span></a><span class="sd">        CSS inlining and minification.</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-881"><a href="#ChartDrawer.makeWheelOnlyTemplate-881"><span class="linenos">881</span></a>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-882"><a href="#ChartDrawer.makeWheelOnlyTemplate-882"><span class="linenos">882</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-883"><a href="#ChartDrawer.makeWheelOnlyTemplate-883"><span class="linenos">883</span></a><span class="sd">            minify (bool): Remove whitespace and quotes for compactness.</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-884"><a href="#ChartDrawer.makeWheelOnlyTemplate-884"><span class="linenos">884</span></a><span class="sd">            remove_css_variables (bool): Embed CSS variable definitions.</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-885"><a href="#ChartDrawer.makeWheelOnlyTemplate-885"><span class="linenos">885</span></a>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-886"><a href="#ChartDrawer.makeWheelOnlyTemplate-886"><span class="linenos">886</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-887"><a href="#ChartDrawer.makeWheelOnlyTemplate-887"><span class="linenos">887</span></a><span class="sd">            str: SVG markup for the chart wheel only.</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-888"><a href="#ChartDrawer.makeWheelOnlyTemplate-888"><span class="linenos">888</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-889"><a href="#ChartDrawer.makeWheelOnlyTemplate-889"><span class="linenos">889</span></a>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-890"><a href="#ChartDrawer.makeWheelOnlyTemplate-890"><span class="linenos">890</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;templates&quot;</span> <span class="o">/</span> <span class="s2">&quot;wheel_only.xml&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-891"><a href="#ChartDrawer.makeWheelOnlyTemplate-891"><span class="linenos">891</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-892"><a href="#ChartDrawer.makeWheelOnlyTemplate-892"><span class="linenos">892</span></a>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-893"><a href="#ChartDrawer.makeWheelOnlyTemplate-893"><span class="linenos">893</span></a>        <span class="n">template_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_template_dictionary</span><span class="p">()</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-894"><a href="#ChartDrawer.makeWheelOnlyTemplate-894"><span class="linenos">894</span></a>        <span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">template_dict</span><span class="p">)</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-895"><a href="#ChartDrawer.makeWheelOnlyTemplate-895"><span class="linenos">895</span></a>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-896"><a href="#ChartDrawer.makeWheelOnlyTemplate-896"><span class="linenos">896</span></a>        <span class="k">if</span> <span class="n">remove_css_variables</span><span class="p">:</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-897"><a href="#ChartDrawer.makeWheelOnlyTemplate-897"><span class="linenos">897</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">inline_css_variables_in_svg</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-898"><a href="#ChartDrawer.makeWheelOnlyTemplate-898"><span class="linenos">898</span></a>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-899"><a href="#ChartDrawer.makeWheelOnlyTemplate-899"><span class="linenos">899</span></a>        <span class="k">if</span> <span class="n">minify</span><span class="p">:</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-900"><a href="#ChartDrawer.makeWheelOnlyTemplate-900"><span class="linenos">900</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">scourString</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;    &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-901"><a href="#ChartDrawer.makeWheelOnlyTemplate-901"><span class="linenos">901</span></a>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-902"><a href="#ChartDrawer.makeWheelOnlyTemplate-902"><span class="linenos">902</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-903"><a href="#ChartDrawer.makeWheelOnlyTemplate-903"><span class="linenos">903</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-904"><a href="#ChartDrawer.makeWheelOnlyTemplate-904"><span class="linenos">904</span></a>
</span><span id="ChartDrawer.makeWheelOnlyTemplate-905"><a href="#ChartDrawer.makeWheelOnlyTemplate-905"><span class="linenos">905</span></a>        <span class="k">return</span> <span class="n">template</span>
</span></pre></div>


            <div class="docstring"><p>Render the wheel-only chart SVG as a string.</p>

<p>Reads the wheel-only XML template, substitutes chart data, and applies optional
CSS inlining and minification.</p>

<p>Args:
    minify (bool): Remove whitespace and quotes for compactness.
    remove_css_variables (bool): Embed CSS variable definitions.</p>

<p>Returns:
    str: SVG markup for the chart wheel only.</p>
</div>


                            </div>
                            <div id="ChartDrawer.makeWheelOnlySVG" class="classattr">
                                        <input id="ChartDrawer.makeWheelOnlySVG-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">

        <span class="def">def</span>
        <span class="name">makeWheelOnlySVG</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>, </span><span class="param"><span class="n">remove_css_variables</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ChartDrawer.makeWheelOnlySVG-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ChartDrawer.makeWheelOnlySVG"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ChartDrawer.makeWheelOnlySVG-907"><a href="#ChartDrawer.makeWheelOnlySVG-907"><span class="linenos">907</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeWheelOnlySVG</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="ChartDrawer.makeWheelOnlySVG-908"><a href="#ChartDrawer.makeWheelOnlySVG-908"><span class="linenos">908</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer.makeWheelOnlySVG-909"><a href="#ChartDrawer.makeWheelOnlySVG-909"><span class="linenos">909</span></a><span class="sd">        Generate and save wheel-only chart SVG to disk.</span>
</span><span id="ChartDrawer.makeWheelOnlySVG-910"><a href="#ChartDrawer.makeWheelOnlySVG-910"><span class="linenos">910</span></a>
</span><span id="ChartDrawer.makeWheelOnlySVG-911"><a href="#ChartDrawer.makeWheelOnlySVG-911"><span class="linenos">911</span></a><span class="sd">        Calls makeWheelOnlyTemplate and writes a file named</span>
</span><span id="ChartDrawer.makeWheelOnlySVG-912"><a href="#ChartDrawer.makeWheelOnlySVG-912"><span class="linenos">912</span></a><span class="sd">        &quot;{subject.name} - {chart_type} Chart - Wheel Only.svg&quot; in the output directory.</span>
</span><span id="ChartDrawer.makeWheelOnlySVG-913"><a href="#ChartDrawer.makeWheelOnlySVG-913"><span class="linenos">913</span></a>
</span><span id="ChartDrawer.makeWheelOnlySVG-914"><a href="#ChartDrawer.makeWheelOnlySVG-914"><span class="linenos">914</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer.makeWheelOnlySVG-915"><a href="#ChartDrawer.makeWheelOnlySVG-915"><span class="linenos">915</span></a><span class="sd">            minify (bool): Pass-through to makeWheelOnlyTemplate for compact output.</span>
</span><span id="ChartDrawer.makeWheelOnlySVG-916"><a href="#ChartDrawer.makeWheelOnlySVG-916"><span class="linenos">916</span></a><span class="sd">            remove_css_variables (bool): Pass-through to makeWheelOnlyTemplate to embed CSS variables.</span>
</span><span id="ChartDrawer.makeWheelOnlySVG-917"><a href="#ChartDrawer.makeWheelOnlySVG-917"><span class="linenos">917</span></a>
</span><span id="ChartDrawer.makeWheelOnlySVG-918"><a href="#ChartDrawer.makeWheelOnlySVG-918"><span class="linenos">918</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer.makeWheelOnlySVG-919"><a href="#ChartDrawer.makeWheelOnlySVG-919"><span class="linenos">919</span></a><span class="sd">            None</span>
</span><span id="ChartDrawer.makeWheelOnlySVG-920"><a href="#ChartDrawer.makeWheelOnlySVG-920"><span class="linenos">920</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer.makeWheelOnlySVG-921"><a href="#ChartDrawer.makeWheelOnlySVG-921"><span class="linenos">921</span></a>
</span><span id="ChartDrawer.makeWheelOnlySVG-922"><a href="#ChartDrawer.makeWheelOnlySVG-922"><span class="linenos">922</span></a>        <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeWheelOnlyTemplate</span><span class="p">(</span><span class="n">minify</span><span class="p">,</span> <span class="n">remove_css_variables</span><span class="p">)</span>
</span><span id="ChartDrawer.makeWheelOnlySVG-923"><a href="#ChartDrawer.makeWheelOnlySVG-923"><span class="linenos">923</span></a>        <span class="n">chartname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="si">}</span><span class="s2"> Chart - Wheel Only.svg&quot;</span>
</span><span id="ChartDrawer.makeWheelOnlySVG-924"><a href="#ChartDrawer.makeWheelOnlySVG-924"><span class="linenos">924</span></a>
</span><span id="ChartDrawer.makeWheelOnlySVG-925"><a href="#ChartDrawer.makeWheelOnlySVG-925"><span class="linenos">925</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">chartname</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
</span><span id="ChartDrawer.makeWheelOnlySVG-926"><a href="#ChartDrawer.makeWheelOnlySVG-926"><span class="linenos">926</span></a>            <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span id="ChartDrawer.makeWheelOnlySVG-927"><a href="#ChartDrawer.makeWheelOnlySVG-927"><span class="linenos">927</span></a>
</span><span id="ChartDrawer.makeWheelOnlySVG-928"><a href="#ChartDrawer.makeWheelOnlySVG-928"><span class="linenos">928</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SVG Generated Correctly in: </span><span class="si">{</span><span class="n">chartname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Generate and save wheel-only chart SVG to disk.</p>

<p>Calls makeWheelOnlyTemplate and writes a file named
"{subject.name} - {chart_type} Chart - Wheel Only.svg" in the output directory.</p>

<p>Args:
    minify (bool): Pass-through to makeWheelOnlyTemplate for compact output.
    remove_css_variables (bool): Pass-through to makeWheelOnlyTemplate to embed CSS variables.</p>

<p>Returns:
    None</p>
</div>


                            </div>
                            <div id="ChartDrawer.makeAspectGridOnlyTemplate" class="classattr">
                                        <input id="ChartDrawer.makeAspectGridOnlyTemplate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">

        <span class="def">def</span>
        <span class="name">makeAspectGridOnlyTemplate</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>, </span><span class="param"><span class="n">remove_css_variables</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ChartDrawer.makeAspectGridOnlyTemplate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ChartDrawer.makeAspectGridOnlyTemplate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ChartDrawer.makeAspectGridOnlyTemplate-930"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-930"><span class="linenos">930</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeAspectGridOnlyTemplate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-931"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-931"><span class="linenos">931</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-932"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-932"><span class="linenos">932</span></a><span class="sd">        Render the aspect-grid-only chart SVG as a string.</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-933"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-933"><span class="linenos">933</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-934"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-934"><span class="linenos">934</span></a><span class="sd">        Reads the aspect-grid XML template, generates the aspect grid based on chart type,</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-935"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-935"><span class="linenos">935</span></a><span class="sd">        and applies optional CSS inlining and minification.</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-936"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-936"><span class="linenos">936</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-937"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-937"><span class="linenos">937</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-938"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-938"><span class="linenos">938</span></a><span class="sd">            minify (bool): Remove whitespace and quotes for compactness.</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-939"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-939"><span class="linenos">939</span></a><span class="sd">            remove_css_variables (bool): Embed CSS variable definitions.</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-940"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-940"><span class="linenos">940</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-941"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-941"><span class="linenos">941</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-942"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-942"><span class="linenos">942</span></a><span class="sd">            str: SVG markup for the aspect grid only.</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-943"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-943"><span class="linenos">943</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-944"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-944"><span class="linenos">944</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-945"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-945"><span class="linenos">945</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;templates&quot;</span> <span class="o">/</span> <span class="s2">&quot;aspect_grid_only.xml&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-946"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-946"><span class="linenos">946</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-947"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-947"><span class="linenos">947</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-948"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-948"><span class="linenos">948</span></a>        <span class="n">template_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_template_dictionary</span><span class="p">()</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-949"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-949"><span class="linenos">949</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-950"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-950"><span class="linenos">950</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Transit&quot;</span><span class="p">,</span> <span class="s2">&quot;Synastry&quot;</span><span class="p">]:</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-951"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-951"><span class="linenos">951</span></a>            <span class="n">aspects_grid</span> <span class="o">=</span> <span class="n">draw_transit_aspect_grid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;paper_0&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span><span class="p">)</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-952"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-952"><span class="linenos">952</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-953"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-953"><span class="linenos">953</span></a>            <span class="n">aspects_grid</span> <span class="o">=</span> <span class="n">draw_aspect_grid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_colors_settings</span><span class="p">[</span><span class="s1">&#39;paper_0&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_planets_setting</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects_list</span><span class="p">,</span> <span class="n">x_start</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">y_start</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-954"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-954"><span class="linenos">954</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-955"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-955"><span class="linenos">955</span></a>        <span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">substitute</span><span class="p">({</span><span class="o">**</span><span class="n">template_dict</span><span class="p">,</span> <span class="s2">&quot;makeAspectGrid&quot;</span><span class="p">:</span> <span class="n">aspects_grid</span><span class="p">})</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-956"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-956"><span class="linenos">956</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-957"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-957"><span class="linenos">957</span></a>        <span class="k">if</span> <span class="n">remove_css_variables</span><span class="p">:</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-958"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-958"><span class="linenos">958</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">inline_css_variables_in_svg</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-959"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-959"><span class="linenos">959</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-960"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-960"><span class="linenos">960</span></a>        <span class="k">if</span> <span class="n">minify</span><span class="p">:</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-961"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-961"><span class="linenos">961</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">scourString</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;    &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-962"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-962"><span class="linenos">962</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-963"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-963"><span class="linenos">963</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-964"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-964"><span class="linenos">964</span></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-965"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-965"><span class="linenos">965</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlyTemplate-966"><a href="#ChartDrawer.makeAspectGridOnlyTemplate-966"><span class="linenos">966</span></a>        <span class="k">return</span> <span class="n">template</span>
</span></pre></div>


            <div class="docstring"><p>Render the aspect-grid-only chart SVG as a string.</p>

<p>Reads the aspect-grid XML template, generates the aspect grid based on chart type,
and applies optional CSS inlining and minification.</p>

<p>Args:
    minify (bool): Remove whitespace and quotes for compactness.
    remove_css_variables (bool): Embed CSS variable definitions.</p>

<p>Returns:
    str: SVG markup for the aspect grid only.</p>
</div>


                            </div>
                            <div id="ChartDrawer.makeAspectGridOnlySVG" class="classattr">
                                        <input id="ChartDrawer.makeAspectGridOnlySVG-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">

        <span class="def">def</span>
        <span class="name">makeAspectGridOnlySVG</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>, </span><span class="param"><span class="n">remove_css_variables</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ChartDrawer.makeAspectGridOnlySVG-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ChartDrawer.makeAspectGridOnlySVG"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ChartDrawer.makeAspectGridOnlySVG-968"><a href="#ChartDrawer.makeAspectGridOnlySVG-968"><span class="linenos">968</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">makeAspectGridOnlySVG</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">remove_css_variables</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-969"><a href="#ChartDrawer.makeAspectGridOnlySVG-969"><span class="linenos">969</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-970"><a href="#ChartDrawer.makeAspectGridOnlySVG-970"><span class="linenos">970</span></a><span class="sd">        Generate and save aspect-grid-only chart SVG to disk.</span>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-971"><a href="#ChartDrawer.makeAspectGridOnlySVG-971"><span class="linenos">971</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-972"><a href="#ChartDrawer.makeAspectGridOnlySVG-972"><span class="linenos">972</span></a><span class="sd">        Calls makeAspectGridOnlyTemplate and writes a file named</span>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-973"><a href="#ChartDrawer.makeAspectGridOnlySVG-973"><span class="linenos">973</span></a><span class="sd">        &quot;{subject.name} - {chart_type} Chart - Aspect Grid Only.svg&quot; in the output directory.</span>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-974"><a href="#ChartDrawer.makeAspectGridOnlySVG-974"><span class="linenos">974</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-975"><a href="#ChartDrawer.makeAspectGridOnlySVG-975"><span class="linenos">975</span></a><span class="sd">        Args:</span>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-976"><a href="#ChartDrawer.makeAspectGridOnlySVG-976"><span class="linenos">976</span></a><span class="sd">            minify (bool): Pass-through to makeAspectGridOnlyTemplate for compact output.</span>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-977"><a href="#ChartDrawer.makeAspectGridOnlySVG-977"><span class="linenos">977</span></a><span class="sd">            remove_css_variables (bool): Pass-through to makeAspectGridOnlyTemplate to embed CSS variables.</span>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-978"><a href="#ChartDrawer.makeAspectGridOnlySVG-978"><span class="linenos">978</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-979"><a href="#ChartDrawer.makeAspectGridOnlySVG-979"><span class="linenos">979</span></a><span class="sd">        Returns:</span>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-980"><a href="#ChartDrawer.makeAspectGridOnlySVG-980"><span class="linenos">980</span></a><span class="sd">            None</span>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-981"><a href="#ChartDrawer.makeAspectGridOnlySVG-981"><span class="linenos">981</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-982"><a href="#ChartDrawer.makeAspectGridOnlySVG-982"><span class="linenos">982</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-983"><a href="#ChartDrawer.makeAspectGridOnlySVG-983"><span class="linenos">983</span></a>        <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeAspectGridOnlyTemplate</span><span class="p">(</span><span class="n">minify</span><span class="p">,</span> <span class="n">remove_css_variables</span><span class="p">)</span>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-984"><a href="#ChartDrawer.makeAspectGridOnlySVG-984"><span class="linenos">984</span></a>        <span class="n">chartname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_directory</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_type</span><span class="si">}</span><span class="s2"> Chart - Aspect Grid Only.svg&quot;</span>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-985"><a href="#ChartDrawer.makeAspectGridOnlySVG-985"><span class="linenos">985</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-986"><a href="#ChartDrawer.makeAspectGridOnlySVG-986"><span class="linenos">986</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">chartname</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-987"><a href="#ChartDrawer.makeAspectGridOnlySVG-987"><span class="linenos">987</span></a>            <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-988"><a href="#ChartDrawer.makeAspectGridOnlySVG-988"><span class="linenos">988</span></a>
</span><span id="ChartDrawer.makeAspectGridOnlySVG-989"><a href="#ChartDrawer.makeAspectGridOnlySVG-989"><span class="linenos">989</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SVG Generated Correctly in: </span><span class="si">{</span><span class="n">chartname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Generate and save aspect-grid-only chart SVG to disk.</p>

<p>Calls makeAspectGridOnlyTemplate and writes a file named
"{subject.name} - {chart_type} Chart - Aspect Grid Only.svg" in the output directory.</p>

<p>Args:
    minify (bool): Pass-through to makeAspectGridOnlyTemplate for compact output.
    remove_css_variables (bool): Pass-through to makeAspectGridOnlyTemplate to embed CSS variables.</p>

<p>Returns:
    None</p>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>
